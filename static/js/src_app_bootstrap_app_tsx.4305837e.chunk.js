(globalThis.webpackChunksen_farming=globalThis.webpackChunksen_farming||[]).push([["src_app_bootstrap_app_tsx"],{4725:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>p,default:()=>m});var r,n,a,l,i,o,d,c=s(92950);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},u.apply(this,arguments)}function h(e,t){let{title:s,titleId:h,...p}=e;return c.createElement("svg",u({width:257,height:256,viewBox:"0 0 257 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":h},p),s?c.createElement("title",{id:h},s):null,r||(r=c.createElement("path",{d:"M0.622803 60C0.622803 26.8629 27.4857 0 60.6228 0H196.623C229.76 0 256.623 26.8629 256.623 60V196C256.623 229.137 229.76 256 196.623 256H60.6228C27.4857 256 0.622803 229.137 0.622803 196V60Z",fill:"url(#paint0_linear_1802_5774)"})),n||(n=c.createElement("path",{d:"M211.234 115.694H216.613C216.977 115.694 221.629 115.549 219.158 109.01C216.541 102.181 208.4 101.745 208.4 101.745L196.042 56.919C196.042 56.919 194.516 49 186.738 49C178.888 49 113.83 49 113.83 49C113.83 49 103.799 49.218 103.799 60.261H113.249L102.055 102.399H91.006V79.877C91.006 79.877 90.9333 72.2486 83.1555 72.2486C75.305 72.2486 72.7609 72.2486 72.7609 72.2486L75.9593 80.4582H81.1929C81.1929 80.4582 81.2656 80.4582 81.3383 80.4582C81.7744 80.4582 83.0828 80.6762 83.0828 83.219C83.0828 86.2704 83.0828 102.617 83.0828 102.617H47.683C47.683 102.617 47.683 102.617 47.6103 102.617C46.6654 102.617 34.8897 102.835 34.8897 114.677C34.8897 127.028 37.1431 148.824 37.1431 148.824C29.0018 154.636 23.6228 164.226 23.6228 175.123C23.6228 192.923 38.088 207.308 55.8969 207.308C73.7059 207.308 88.1711 192.85 88.1711 175.051C88.1711 167.858 85.7723 161.174 81.7744 155.798H93.6228L96.1669 162.555H122.117L124.37 155.507L133.457 155.58C133.457 156.161 133.457 156.67 133.457 157.251C133.457 184.859 155.845 207.308 183.54 207.308C211.162 207.308 233.623 184.931 233.623 157.251C233.477 139.96 224.609 124.703 211.234 115.694ZM55.9696 191.979C46.52 191.979 38.8149 184.278 38.8149 174.833C38.8149 165.388 46.52 157.687 55.9696 157.687C65.4193 157.687 73.1244 165.388 73.1244 174.833C73.1971 184.278 65.492 191.979 55.9696 191.979ZM159.261 63.3124C159.261 62.8765 159.334 60.6243 161.079 58.9533C161.878 58.1541 163.259 57.2096 165.585 57.2096H185.502C186.302 57.2096 190.445 57.5729 191.899 64.1116C192.989 68.8339 198.95 93.8261 199.168 94.9159C199.313 95.4971 199.968 98.4032 198.223 100.728C197.423 101.818 195.824 103.053 192.917 103.053H165.585C163.041 103.053 159.334 101.382 159.334 96.7322V63.3124H159.261ZM118.119 103.344C118.046 103.344 117.974 103.344 117.901 103.344C117.61 103.344 114.775 103.053 113.104 100.801C112.304 99.7836 111.504 98.0399 112.086 95.3518C113.031 90.9927 119.137 62.0773 119.21 61.7867C119.21 61.7141 119.21 61.6414 119.282 61.4961C119.791 59.8978 121.608 57.2096 125.315 57.2096H149.085C151.484 57.2096 155.336 58.9533 155.336 63.5304V97.6767C155.336 97.7493 155.336 97.822 155.336 97.822C155.191 100.002 153.446 103.271 149.158 103.271H118.119V103.344ZM183.54 190.453C165.44 190.453 150.684 175.705 150.684 157.614C150.684 139.524 165.44 124.776 183.54 124.776C201.639 124.776 216.395 139.524 216.395 157.614C216.395 175.705 201.639 190.453 183.54 190.453Z",fill:"#212433"})),a||(a=c.createElement("path",{opacity:.5,d:"M198.223 100.728C197.423 101.818 195.824 103.053 192.917 103.053H165.585C163.041 103.053 159.334 101.382 159.334 96.7323V63.3125C159.334 62.8766 159.407 60.6244 161.151 58.9534C161.951 58.1542 163.332 57.2097 165.658 57.2097H185.575C186.374 57.2097 190.518 57.573 191.972 64.1116C193.062 68.834 199.022 93.8262 199.241 94.916C199.313 95.5699 199.967 98.4759 198.223 100.728Z",fill:"#212433"})),l||(l=c.createElement("path",{opacity:.5,d:"M155.336 63.5303V97.6766C155.336 97.7493 155.336 97.8219 155.336 97.8219C155.191 100.002 153.446 103.271 149.158 103.271H118.119C118.047 103.271 117.974 103.271 117.901 103.271C117.61 103.271 114.776 102.98 113.104 100.728C112.304 99.7109 111.505 97.9673 112.086 95.2791C113.031 90.92 119.137 62.0046 119.21 61.714C119.21 61.6414 119.21 61.5687 119.282 61.4234C119.791 59.8251 121.608 57.137 125.316 57.137H149.085C151.484 57.2096 155.336 58.9533 155.336 63.5303Z",fill:"#212433"})),i||(i=c.createElement("path",{opacity:.5,d:"M183.54 127.464C166.967 127.464 153.446 140.977 153.446 157.542C153.446 174.106 166.967 187.62 183.54 187.62C200.113 187.62 213.633 174.106 213.633 157.542C213.633 140.977 200.113 127.464 183.54 127.464ZM183.54 172.944C175.035 172.944 168.202 166.042 168.202 157.614C168.202 149.114 175.108 142.285 183.54 142.285C192.044 142.285 198.877 149.187 198.877 157.614C198.877 166.042 191.972 172.944 183.54 172.944Z",fill:"#212433"})),o||(o=c.createElement("path",{opacity:.5,d:"M55.9694 160.375C48.0463 160.375 41.5769 166.841 41.5769 174.76C41.5769 182.679 48.0463 189.145 55.9694 189.145C63.8926 189.145 70.362 182.679 70.362 174.76C70.4346 166.841 63.9653 160.375 55.9694 160.375ZM55.9694 181.807C52.1169 181.807 48.9185 178.683 48.9185 174.76C48.9185 170.91 52.0442 167.713 55.9694 167.713C59.822 167.713 63.0203 170.837 63.0203 174.76C63.0203 178.683 59.8947 181.807 55.9694 181.807Z",fill:"#212433"})),d||(d=c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_1802_5774",x1:.999999,y1:-114739e-11,x2:257,y2:256,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FFD666"}),c.createElement("stop",{offset:1,stopColor:"#FFE58F"})))))}const p=c.forwardRef(h),m=s.p+"static/media/logo.4510beb32107f8e07e512c69e06f7545.svg"},79937:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return l.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return i.default}});var r=o(s(59062)),n=o(s(38340)),a=o(s(45910)),l=o(s(4725)),i=o(s(89374));function o(e){return e&&e.__esModule?e:{default:e}}const d=[r.default,n.default,a.default];t.h0=d},44700:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>Et,__esModule:()=>Tt.X$,logo:()=>Tt.jY,panels:()=>Tt.h0,readme:()=>Tt.ng});var r=s(55754),n=s(47229),a=s(45055),l=s(41630),i=s(94751),o=s(63805);const d={appId:"sen_farming",url:"https://descartesnetwork.github.io/sen-farming/index.js"},c={development:{...d},staging:{...d},production:{...d}};var u=s(95418);const h={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",farmingAddress:"CpEsjrLhBkcuApn5uEE2tZCwxyCQKmT6S4YgT9zuLW2J",get farming(){return new u.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwners:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",farmingAddress:"CpEsjrLhBkcuApn5uEE2tZCwxyCQKmT6S4YgT9zuLW2J",get farming(){return new u.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwners:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},mainnet:{node:"https://ssc-dao.genesysgo.net",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",farmingAddress:"DTvdh6Q13SfYxMoWyibBUmQAUqd2pDPSpjdku5a9NLSF",get farming(){return new u.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwners:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG"]}},p={development:{farmRoute:"/app/senhub"},staging:{farmRoute:"/app/sen_farming"},production:{farmRoute:"/app/sen_farming"}},m={manifest:c[o.OB],sol:h[o.ef],route:p[o.OB]};var x=s(92950),y=s(34559);const f={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},j=e=>{const[t,s]=(0,x.useState)(f),{tokenProvider:r}=(0,n.useMint)(),a=(0,x.useCallback)((async()=>{try{var t;const n=await r.findByAddress(e),a=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId,l=await(0,y.l$)(a);return s(l)}catch(n){return s(f)}}),[e,r]);return(0,x.useEffect)((()=>{a()}),[a]),t},g=e=>{const{tokenProvider:t}=(0,n.useMint)(),{pools:s}=(0,n.usePool)(),[r,a]=(0,x.useState)([]),l=(0,x.useCallback)((async()=>{const r=await t.findByAddress(e);if(r)return a([r]);const n=Object.values(s).find((t=>{let{mint_lpt:s}=t;return s===e}));if(!n)return a([void 0]);const{mint_a:l,mint_b:i}=n,o=await t.findByAddress(l),d=await t.findByAddress(i);return a([o,d])}),[e,s,t]);return(0,x.useEffect)((()=>{l()}),[l]),r};var w=s(45263);const C=e=>{let{mintAddress:t,size:s=24,icon:r=(0,w.jsx)(l.Z,{name:"diamond-outline"}),isReserve:n=!1}=e;const a=g(t),o=(0,x.useMemo)((()=>{const e=JSON.parse(JSON.stringify(a));return n?e.reverse():e}),[n,a]);return(0,w.jsx)(i.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},children:o.map(((e,t)=>(0,w.jsx)(i.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:r},(null===e||void 0===e?void 0:e.address)||t)))})},b=e=>{let{mintAddress:t,separator:s=" \u2022 ",isReverse:r=!1}=e;const n=g(t),a=(0,x.useMemo)((()=>{let e=n.map((e=>{if(!e)return(0,y.Xn)(t);const{name:s,address:r,symbol:a}=e;return 1===n.length&&s?s:a||(0,y.Xn)(r)}));return r&&e.reverse(),e.join(s),1===n.length?e:`${e} LPT`}),[r,t,s,n]);return(0,w.jsx)("span",{children:a})},v=e=>{let{mintAddress:t,separator:s=" \u2022 ",isReverse:r=!1}=e;const n=g(t),a=(0,x.useMemo)((()=>{const e=n.map((e=>{const s=`${null===t||void 0===t?void 0:t.substr(0,3)}...`;return e?e.symbol:s}));return r&&e.reverse(),e.join(s)}),[r,t,s,n]);return(0,w.jsx)("span",{children:a})},A=()=>{const{tokenProvider:e,getMint:t}=(0,n.useMint)(),{pools:s}=(0,n.usePool)(),r=(0,x.useCallback)((async(t,s)=>{try{var r;const n=await e.findByAddress(t),a=null===n||void 0===n||null===(r=n.extensions)||void 0===r?void 0:r.coingeckoId;if(!a)throw new Error("Cant not find coingeckoId");const l=await(0,y.l$)(a);return Number(u.utils.undecimalize(s,n.decimals))*l.price}catch(n){return 0}}),[e]),a=(0,x.useCallback)((async n=>{let{mintAddress:l,amount:i}=n;if(await e.findByAddress(l))return r(l,i);const o=Object.values(s).find((e=>e.mint_lpt===l));if(!o)return 0;const{reserve_a:d,reserve_b:c,mint_a:h,mint_b:p}=o;if(d*c===BigInt(0))return 0;const{[l]:{supply:m}}=await t({address:l}),{deltaA:x,deltaB:y}=u.Swap.oracle.withdraw(i,m,d,c);return await a({mintAddress:h,amount:x})+await a({mintAddress:p,amount:y})}),[t,r,e,s]);return{getTotalValue:a}},{sol:{senOwners:S}}=m,k=()=>{const e=(0,r.useSelector)((e=>e.farms)),[t,s]=(0,x.useState)({}),n=(0,x.useCallback)((t=>{const s=e[t];return S.includes(s.owner)}),[e]),a=(0,x.useCallback)((e=>{const t={};for(const s in e)n(s)&&(t[s]=e[s]);s(t)}),[n]);return(0,x.useEffect)((()=>{a(e)}),[e,a]),{sentreFarms:t,filterSentreFarms:a,checkSentreFarm:n}},{sol:{senAddress:T}}=m,R=()=>{const{ui:{width:e}}=(0,n.useUI)(),t=(0,r.useSelector)((e=>e.farms)),s=j(T),a=(()=>{const[e,t]=(0,x.useState)(0),{sentreFarms:s}=k(),{getTotalValue:r}=A(),n=(0,x.useCallback)((async()=>{let e=0;await Promise.all(Object.values(s).map((async t=>{const{total_shares:s,mint_stake:n}=t,a=await r({mintAddress:n,amount:s});e+=a}))),t(e)}),[s,r]);return(0,x.useEffect)((()=>{n()}),[n]),e})(),o=e>768,d=o?void 0:24,c=o?32:16,u=o?8:4,h=o?"vertical":"horizontal",p=o?"pause-outline":"reorder-two-outline",m=(0,x.useMemo)((()=>{let e=0;for(const s in t)t[s].total_shares&&e++;return e}),[t]);return(0,w.jsx)(i.Card,{bordered:!1,className:(o?"":"banner-farming-mobile ")+"banner-farming",children:(0,w.jsxs)(i.Row,{gutter:[12,c],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Typography.Title,{level:4,style:{color:"#212433"},children:"Sen Farming"})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Row,{gutter:[12,12],children:[(0,w.jsx)(i.Col,{span:d,children:(0,w.jsxs)(i.Space,{direction:"vertical",size:u,children:[(0,w.jsx)(i.Typography.Text,{style:{color:"#212433"},children:"Total Sentre Farms TVL"}),(0,w.jsx)(i.Typography.Title,{level:2,style:{color:"#F9575E"},children:(0,y.uR)(a).format("0,0.[00]$")})]})}),o&&(0,w.jsx)(i.Col,{children:(0,w.jsx)(i.Divider,{type:"vertical",style:{height:"100%"}})}),(0,w.jsx)(i.Col,{span:d,children:(0,w.jsxs)(i.Space,{direction:"vertical",size:u,children:[(0,w.jsx)(i.Typography.Text,{style:{color:"#212433"},children:"Active Farms"}),(0,w.jsx)(i.Typography.Title,{level:2,style:{color:"#F9575E"},children:m})]})}),o&&(0,w.jsx)(i.Col,{children:(0,w.jsx)(i.Divider,{type:"vertical",style:{height:"100%"}})}),(0,w.jsx)(i.Col,{span:d,children:(0,w.jsxs)(i.Space,{direction:h,size:0,align:"center",children:[(0,w.jsxs)(i.Typography.Title,{level:4,style:{color:"#212433"},children:["1 ",(0,w.jsx)(v,{mintAddress:T})]}),(0,w.jsx)(l.Z,{style:{color:"#212433"},name:p}),(0,w.jsx)(i.Typography.Title,{level:4,style:{color:"#F9575E"},children:(0,y.uR)(s.price).format("0,0.[0000]$")})]})})]})})]})})};var E=s(58421);let F;const z=(0,x.forwardRef)(((e,t)=>{let{max:s,onValue:r=(()=>{}),onChange:n=(()=>{}),...a}=e;const[o,d]=(0,x.useState)(""),[c,u]=(0,x.useState)(null),h=(0,x.useRef)(t),p=(0,x.useCallback)((e=>{const t=e=>{F&&(clearTimeout(F),F=void 0),d(e),F=setTimeout((()=>d("")),500)};return/^\d*(\.\d*)?$/.test(e)?s&&parseFloat(e)>parseFloat(s.toString())?t("Not enough balance"):r(e):t("Invalid character")}),[s,r]);return null!==c&&setTimeout((()=>{var e;return null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.setSelectionRange(c,c)}),50),(0,w.jsx)(i.Tooltip,{title:(0,w.jsxs)(i.Space,{children:[(0,w.jsx)(l.Z,{name:"warning"}),o]}),visible:!!o,children:(0,w.jsx)(i.Input,{...a,onChange:e=>{n(e),u(e.target.selectionStart),p(e.target.value||"")},ref:h})})})),P=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open((0,y.kU)(t),"_blank")}),_=e=>window.notify({type:"error",description:e.message}),B=e=>{const[t,s]=(0,x.useState)(void 0),{getDecimals:r}=(0,n.useMint)(),a=(0,x.useCallback)((async()=>{try{const t=await r(e);return s(t)}catch(t){return s(void 0)}}),[e,r]);return(0,x.useEffect)((()=>{a()}),[a]),t},I={Hour:BigInt(3600),Day:BigInt(86400),Month:BigInt(2592e3),Year:BigInt(31536e3)},M=e=>{let{mintAddress:t,onClose:s=(()=>{}),setVisibleInputTokenModal:r=(()=>{})}=e;const{sol:{senAddress:a,farming:o}}=m,[d,c]=(0,x.useState)(""),[h,p]=(0,x.useState)(""),[y,f]=(0,x.useState)("Hour"),[j,g]=(0,x.useState)(!1),b=B(a),{wallet:{address:A}}=(0,n.useWallet)(),S=!d||!h||!u.account.isAddress(t);return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Typography.Title,{level:4,children:"New farm"})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Card,{style:{borderRadius:8},bodyStyle:{padding:16},bordered:!1,children:(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:12,children:(0,w.jsxs)(i.Space,{direction:"vertical",children:[(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Input"}),(0,w.jsxs)(i.Space,{size:12,style:{cursor:"pointer"},onClick:()=>r(!0),children:[(0,w.jsx)(C,{mintAddress:t}),u.account.isAddress(t)?(0,w.jsx)(v,{mintAddress:t}):(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Select token type"}),(0,w.jsx)(l.Z,{name:"chevron-forward-outline",style:{color:"#7A7B85"}})]})]})}),(0,w.jsx)(i.Col,{span:12,children:(0,w.jsxs)(i.Space,{direction:"vertical",children:[(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Output"}),(0,w.jsxs)(i.Space,{size:12,style:{cursor:"pointer"},children:[(0,w.jsx)(C,{mintAddress:a}),(0,w.jsx)(v,{mintAddress:a})]})]})})]})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Row,{gutter:[0,0],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Typography.Text,{type:"secondary",className:"caption",children:"Reward"})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(z,{size:"large",placeholder:"0",value:d,onValue:c,prefix:(0,w.jsx)(i.Typography.Text,{children:"SNTR"})})})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Row,{gutter:[0,0],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Typography.Text,{type:"secondary",className:"caption",children:["Number of ",y]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(z,{size:"large",placeholder:"0",value:h,onValue:p,suffix:(0,w.jsx)(i.Button,{type:"text",size:"small",icon:(0,w.jsx)(l.Z,{name:"time-outline"}),onClick:()=>{const e=Object.keys(I),t=(e.findIndex((e=>e===y))+1)%e.length;return f(e[t])},children:y})})})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{type:"primary",onClick:async()=>{if(!u.account.isAddress(t))return _({message:`Invalid mint address: ${t}`});g(!0);const{wallet:e}=window.sentre;if(!e||!y||!h||!b)return;const r=u.utils.decimalize(d,b),n=Number(null===I||void 0===I?void 0:I[y])*Number(h);try{const{txId:l}=await o.initializeFarm(r,BigInt(n),A,t,a,e);return s(),P("Create a new farm",l)}catch(l){return _({message:l.message})}finally{return g(!1)}},disabled:S,block:!0,loading:j,children:"Confirm"})})]})},Z=e=>{let{accountAddress:t,onClick:s=(()=>{})}=e;const{accounts:{[t]:{mint:r}}}=(0,n.useAccount)(),a=(0,x.useMemo)((()=>t.substring(0,4)+" ... "+t.substring(t.length-4,t.length)),[t]);return(0,w.jsx)(i.Card,{onClick:()=>s(r),className:"account-card",bodyStyle:{padding:12,cursor:"pointer"},bordered:!1,children:(0,w.jsxs)(i.Row,{gutter:[8,8],wrap:!1,align:"middle",children:[(0,w.jsx)(i.Col,{flex:"auto",children:(0,w.jsxs)(i.Space,{direction:"vertical",size:0,children:[(0,w.jsxs)(i.Space,{children:[(0,w.jsx)(C,{mintAddress:r}),(0,w.jsx)(b,{mintAddress:r})]}),(0,w.jsxs)(i.Space,{children:[(0,w.jsxs)(i.Space,{size:4,children:[(0,w.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Account Address:"}),(0,w.jsx)(i.Typography.Text,{children:a})]}),(0,w.jsx)(i.Button,{type:"text",size:"small",onClick:e=>{e.stopPropagation(),(0,y.RB)((0,y.kU)(t))},icon:(0,w.jsx)(l.Z,{name:"open-outline"})})]})]})}),(0,w.jsx)(i.Col,{children:(0,w.jsx)(i.Button,{type:"text",icon:(0,w.jsx)(l.Z,{name:"arrow-forward-outline"})})})]})})},O=e=>{let{onChange:t}=e;const[s,r]=(0,x.useState)("");return(0,x.useEffect)((()=>t(s)),[s,t]),(0,w.jsx)(i.Card,{className:"account-card",bodyStyle:{padding:6},bordered:!1,children:(0,w.jsx)(i.Input,{placeholder:"Search",value:s,size:"small",bordered:!1,prefix:(0,w.jsx)(i.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:s?()=>r(""):()=>{},icon:(0,w.jsx)(l.Z,{name:s?"close-outline":"search-outline"})}),onChange:e=>r(e.target.value)})})},N=e=>{let{onChange:t,onHideInputTokenModal:s=(()=>{})}=e;const{searchedAccount:r,accountAddresses:a,onSearch:l}=(()=>{const[e,t]=(0,x.useState)(),{accounts:s}=(0,n.useAccount)(),{tokenProvider:r}=(0,n.useMint)(),a=(0,x.useMemo)((()=>Object.keys(s)),[s]),l=(0,x.useCallback)((async e=>{if(!e||e.length<3)return t(void 0);const n=(await r.find(e)).map((e=>{let{address:t}=e;return t}));let l=[];return a.forEach((e=>{var t;if(n.includes(null===(t=s[e])||void 0===t?void 0:t.mint))return l.push(e)})),t(l)}),[a,s,r]);return{searchedAccount:e,accountAddresses:a,onSearch:l}})(),o=e=>(s(!1),t(e));return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Typography.Title,{level:4,children:"Select token type"})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(O,{onChange:l})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Row,{gutter:[16,16],style:{height:300,overflow:"auto"},children:(r||a).map(((e,t)=>(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(E.ZP,{height:72,overflow:!0,children:(0,w.jsx)(Z,{accountAddress:e,onClick:o})})},e+t)))})})]})},L=e=>{let{size:t="small"}=e;const[s,r]=(0,x.useState)(!1),[n,a]=(0,x.useState)(""),[o,d]=(0,x.useState)(!1);return(0,w.jsxs)(i.Row,{children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{style:{background:"transparent"},onClick:()=>r(!0),size:t,children:"New Farm"})}),(0,w.jsx)(i.Modal,{visible:s,onCancel:()=>r(!1),footer:!1,closeIcon:(0,w.jsx)(l.Z,{name:"close-outline"}),children:(0,w.jsx)(M,{mintAddress:n,onClose:()=>{r(!1),a("")},setVisibleInputTokenModal:d})}),(0,w.jsx)(i.Modal,{visible:o,onCancel:()=>d(!1),footer:!1,closeIcon:(0,w.jsx)(l.Z,{name:"close-outline"}),children:(0,w.jsx)(N,{onChange:e=>{a(e)},onHideInputTokenModal:d})})]})},D=e=>{let{label:t="",tooltip:s,value:r="",mintAddress:n}=e;return(0,w.jsxs)(i.Space,{direction:"vertical",size:4,children:[(0,w.jsxs)(i.Space,{size:4,children:[(0,w.jsxs)(i.Space,{size:4,children:[n&&(0,w.jsx)(C,{mintAddress:n}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:t})]}),s&&(0,w.jsx)(i.Tooltip,{title:s,children:(0,w.jsx)(i.Button,{type:"text",shape:"circle",size:"small",icon:(0,w.jsx)(i.Typography.Text,{type:"secondary",children:(0,w.jsx)(l.Z,{name:"information-circle-outline"})})})})]}),(0,w.jsxs)(i.Space,{children:[(0,w.jsx)(i.Typography.Title,{level:5,children:r}),n&&(0,w.jsx)(v,{mintAddress:n})]})]})},{sol:{farming:H}}=m,V=e=>{const[t,s]=(0,x.useState)(""),{debts:{[t]:a}}=(0,r.useSelector)((e=>e)),{wallet:{address:l}}=(0,n.useWallet)(),i=(0,x.useCallback)((async()=>{if(!u.account.isAddress(e))return s("");const t=await H.deriveDebtAddress(l,e);return s(t)}),[e,l]);return(0,x.useEffect)((()=>{i()}),[i]),{address:t,data:a}};var Q=s(21111),W=s.n(Q);const $=e=>{const{accounts:t}=(0,n.useAccount)(),{wallet:{address:s}}=(0,n.useWallet)(),a=(0,r.useSelector)((t=>t.farms[e])),[l,i]=(0,x.useState)(),o=(0,x.useCallback)((async()=>{if(!(null===a||void 0===a?void 0:a.mint_stake))return i(void 0);const{splt:e}=window.sentre,r=await e.deriveAssociatedAddress(s,a.mint_stake),n=t[r];return W()(n,null===l||void 0===l?void 0:l.data)?void 0:i({address:r,data:n})}),[null===l||void 0===l?void 0:l.data,t,a.mint_stake,s]);return(0,x.useEffect)((()=>{o()}),[o]),l},q=(e,t)=>{if(null===e||0===Object.keys(e).length)return 0;if(null===t||0===Object.keys(t).length)return 0;if(!t.total_shares)return 0;const r=e.shares,n=t.compensation,a=(s.g.BigInt(Math.floor(Date.now()/1e3))-t.genesis_timestamp)/t.period,l=s.g.BigInt(10**18),i=(l*t.reward/t.total_shares*a+n)*r/l,o=u.utils.undecimalize(i-e.debt,9);return Number(o)},U="The treasury doesn't have enough balance for the claim.",G="Invalid wallet address.",Y="Invalid farm address.",J="Invalid debt address.",X="Cannot fetch data of debts";var K=s(19289),ee=s(71256),te=s(48744),se=s.n(te),re=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const ne={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof ee.PublicKey||e instanceof se()||re.isBuffer(e)}},{sol:{farming:ae,senAddress:le}}=m,ie="farms",oe=(0,K.createAsyncThunk)("farms/getFarms",(async(e,t)=>{let{getState:s}=t;const{farms:r}=s();if(Object.keys(r).length)return r;const n=await ae.connection.getProgramAccounts(ae.farmingProgramId,{filters:[{dataSize:209},{memcmp:{bytes:le,offset:97}}]});let a={};return n.forEach((e=>{let{pubkey:t,account:{data:s}}=e;const r=t.toBase58(),n=ae.parseFarmData(s);a[r]=n})),a})),de=(0,K.createAsyncThunk)("farms/getFarm",(async(e,t)=>{let{address:s}=e,{getState:r}=t;if(!u.account.isAddress(s))throw new Error("Invalid farm address");const{farms:{[s]:n}}=r();if(n)return{[s]:n};return{[s]:await ae.getFarmData(s)}})),ce=(0,K.createAsyncThunk)("farms/upsetFarm",(async e=>{let{address:t,data:s}=e;if(!u.account.isAddress(t))throw new Error("Invalid farm address");if(!s)throw new Error("Data is empty");return{[t]:s}})),ue=(0,K.createAsyncThunk)("farms/deleteFarm",(async e=>{let{farmAddress:t}=e;if(!u.account.isAddress(t))throw new Error("Invalid address");return{farmAddress:t}})),he=(0,K.createSlice)({name:ie,initialState:{},reducers:{},extraReducers:e=>{e.addCase(oe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(de.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ce.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ue.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.farmAddress]}))}}).reducer,{sol:{farming:pe}}=m,me="debts",xe=(0,K.createAsyncThunk)("debts/getDebts",(async e=>{let{owner:t}=e;if(!u.account.isAddress(t))throw new Error("Invalid owner/wallet address");const s=await pe.connection.getProgramAccounts(pe.farmingProgramId,{filters:[{dataSize:89},{memcmp:{bytes:t,offset:32}}]});let r={};return s.forEach((e=>{let{pubkey:t,account:{data:s}}=e;const n=t.toBase58(),a=pe.parseDebtData(s);return r[n]=a})),r})),ye=(0,K.createAsyncThunk)("debts/getDebt",(async(e,t)=>{let{address:s}=e,{getState:r}=t;const{debts:{[s]:n}}=r();if(n)return{[s]:n};return{[s]:await pe.getDebtData(s)}})),fe=(0,K.createAsyncThunk)("debts/upsetDebt",(async e=>{let{address:t,data:s}=e;if(!u.account.isAddress(t))throw new Error("Invalid address");if(!s)throw new Error("Data is empty");return{[t]:s}})),je=(0,K.createAsyncThunk)("debts/deleteDebt",(async e=>{let{address:t}=e;if(!u.account.isAddress(t))throw new Error("Invalid address");return{address:t}})),ge=(0,K.createSlice)({name:me,initialState:{},reducers:{},extraReducers:e=>{e.addCase(xe.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(ye.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(fe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(je.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.address]}))}}).reducer,we="main",Ce=(0,K.createAsyncThunk)("main/setSearch",(async(e,t)=>{let{search:s}=e,{getState:r}=t;return{search:s}})),be=(0,K.createSlice)({name:we,initialState:{search:""},reducers:{},extraReducers:e=>{e.addCase(Ce.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ve=(0,K.configureStore)({middleware:e=>e(ne),devTools:!1,reducer:{farms:he,debts:ge,main:be}}),{sol:{farming:Ae}}=m;class Se{async checkSeedBalance(e){const{splt:t,wallet:s}=window.sentre;if(!s)throw new Error("Please connect wallet first!");const r=ve.getState().farms[e],n=await s.getAddress();if(!u.account.isAddress(n))throw new Error(G);const a=await Ae.deriveDebtAddress(n,e);if(!u.account.isAddress(a))throw new Error(J);const l=ve.getState().debts[a];if(!l)throw new Error(X);const i=q(l,r),{treasury_reward:o,treasury_stake:d,total_shares:c}=r;let{amount:h}=await t.getAccountData(o);o===d&&(h-=c);if(Number(u.utils.undecimalize(h,9))<i)throw new Error(U)}async validate(e){if(!u.account.isAddress(e))throw new Error(Y);return await this.checkSeedBalance(e)}}const{sol:{senAddress:ke,farming:Te}}=m,Re=e=>{let{farmAddress:t,onClose:s}=e;const a=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),{wallet:{address:o}}=(0,n.useWallet)(),{data:d}=V(t),c=$(t),[h,p]=(0,x.useState)(),[m,f]=(0,x.useState)(!0),[j,g]=(0,x.useState)(!1),C=B(a.mint_stake),b=(0,x.useCallback)((async e=>(await p(e),e?await f(!1):await f(!0))),[]),v=(0,x.useMemo)((()=>{if(C)return u.utils.undecimalize(null===d||void 0===d?void 0:d.shares,C)}),[null===d||void 0===d?void 0:d.shares,C]);return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{align:"start",children:[(0,w.jsx)(l.Z,{name:"alert-circle-outline"}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"The pending reward will be automatically harvested when you unstake."})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Card,{bodyStyle:{padding:12},style:{boxShadow:"none",borderRadius:8},children:(0,w.jsxs)(i.Space,{style:{width:"100%"},direction:"vertical",children:[(0,w.jsxs)(i.Row,{children:[(0,w.jsx)(i.Col,{flex:"auto",children:(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Amount"})}),(0,w.jsx)(i.Col,{children:(0,w.jsxs)(i.Space,{size:6,children:[(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Available:"}),(0,w.jsx)(i.Typography.Text,{children:(0,y.uR)(v).format("0,0.[00]")}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"LPT"})]})})]}),(0,w.jsx)(z,{placeholder:"0",value:h,onValue:b,bordered:!1,size:"large",style:{padding:0},suffix:(0,w.jsx)(i.Button,{type:"text",style:{marginRight:-7},onClick:()=>b(v),children:"MAX"}),max:v})]})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{type:"primary",icon:(0,w.jsx)(l.Z,{name:"remove-outline"}),onClick:async()=>{g(!0);try{const{splt:e,wallet:r}=window.sentre;if(!r)throw Error("Please connect wallet first");if(!h||!c||!C)return;const n=u.utils.decimalize(h,C),a=await e.deriveAssociatedAddress(o,ke),l=new Se;await l.validate(t);const{txId:i}=await Te.unstake(n,c.address,a,t,r);return s(!1),P("Unstaked",i)}catch(e){return _(e)}finally{g(!1)}},block:!0,disabled:m,loading:j,children:"Unstake"})})]})},{sol:{senAddress:Ee,farming:Fe}}=m,ze=e=>{let{farmAddress:t,onClose:s}=e;const a=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),{wallet:{address:o}}=(0,n.useWallet)(),{accounts:d}=(0,n.useAccount)(),{data:c}=V(t),h=$(t),[p,m]=(0,x.useState)(),[f,j]=(0,x.useState)(!0),[g,C]=(0,x.useState)(!1),b=B(a.mint_stake),v=(0,x.useCallback)((async e=>(await m(e),e?await j(!1):await j(!0))),[]),A=(0,x.useMemo)((()=>{if(b)return u.utils.undecimalize(BigInt((null===h||void 0===h?void 0:h.data.amount)||0),b)}),[null===h||void 0===h?void 0:h.data.amount,b]);return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{align:"start",children:[(0,w.jsx)(l.Z,{name:"alert-circle-outline"}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"The pending reward will be automatically harvested when you stake more."})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Card,{bodyStyle:{padding:12},style:{boxShadow:"none",borderRadius:8},children:(0,w.jsxs)(i.Space,{style:{width:"100%"},direction:"vertical",children:[(0,w.jsxs)(i.Row,{children:[(0,w.jsx)(i.Col,{flex:"auto",children:(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Amount"})}),(0,w.jsx)(i.Col,{children:(0,w.jsxs)(i.Space,{size:6,children:[(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Available:"}),(0,w.jsx)(i.Typography.Text,{children:(0,y.uR)(A).format("0,0.[00]")}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"LPT"})]})})]}),(0,w.jsx)(z,{placeholder:"0",value:p,onValue:v,bordered:!1,size:"large",style:{padding:0},suffix:(0,w.jsx)(i.Button,{type:"text",style:{marginRight:-15},onClick:()=>v(A),children:"MAX"}),max:A})]})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{type:"primary",icon:(0,w.jsx)(l.Z,{name:"add-outline"}),onClick:async()=>{C(!0);try{const{splt:e,wallet:r}=window.sentre;if(!r)throw Error("Please connect wallet first");if(!p||!h||!b)return;const n=await e.deriveAssociatedAddress(o,Ee);void 0===(null===c||void 0===c?void 0:c.shares)&&await Fe.initializeAccounts(t,o,r),d[n]||await e.initializeAccount(Ee,o,r);const a=new Se;await a.validate(t);const{txId:l}=await Fe.stake(u.utils.decimalize(p,b),h.address,n,t,r);return s(!1),P("Staked",l)}catch(e){return _(e)}finally{C(!1)}},block:!0,disabled:f,loading:g,children:"Stake"})})]})},Pe=e=>{let{title:t}=e;return(0,w.jsxs)(i.Space,{children:[(0,w.jsx)(l.Z,{style:{fontSize:18},name:"alert-circle-outline"}),(0,w.jsx)(i.Typography.Text,{type:"secondary",ellipsis:!0,children:t})]})};var _e=s(51518),Be=s.n(_e);const Ie=e=>{let{address:t,onCopy:s,copieAddress:r,description:n=!1,title:a}=e;return(0,w.jsxs)(i.Row,{gutter:[0,8],children:[(0,w.jsx)(i.Col,{xs:{span:24},sm:{span:10},md:{span:10},lg:{span:10},flex:"auto",children:(0,w.jsx)(Pe,{title:a})}),(0,w.jsx)(i.Col,{xs:{span:22},sm:{span:14},md:{span:14},lg:{span:14},flex:"auto",children:u.account.isAddress(t)&&(0,w.jsx)(i.Typography.Text,{children:t})}),(0,w.jsx)(i.Col,{children:(0,w.jsx)(i.Tooltip,{title:"Copied",visible:t===r,children:(0,w.jsx)(_e.CopyToClipboard,{text:t,onCopy:e=>s(e),children:(0,w.jsx)(i.Button,{type:"text",size:"small",style:{marginRight:-7},icon:(0,w.jsx)(l.Z,{name:"copy-outline"})})})})}),n?(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Typography.Paragraph,{type:"secondary",style:{fontSize:12},children:"Tips: You can use this address for searching the pool coresponding to the farm in Sen LP."})}):null]})},Me=e=>{const[t,s]=(0,x.useState)(0),{farms:{[e]:n}}=(0,r.useSelector)((e=>e)),{treasury_stake:a,treasury_reward:l,mint_reward:i,total_shares:o}=n||{},d=B(i),{symbol:c}=j(i),h=(0,x.useCallback)((async()=>{if(void 0===d)return s(0);try{const{splt:e}=window.sentre;let{amount:t}=await e.getAccountData(l);l===a&&(t-=o);const r=Number(u.utils.undecimalize(t,d));s(r)}catch(e){s(0)}}),[d,o,l,a]);return(0,x.useEffect)((()=>{h()}),[h]),{budget:t,budgetSymbol:c}},Ze=e=>{let{farmAddress:t}=e;const{tokenProvider:s}=(0,n.useMint)(),{pools:a}=(0,n.usePool)(),{budget:l,budgetSymbol:o}=Me(t),d=(0,r.useSelector)((e=>e.farms)),[c,h]=(0,x.useState)(""),[p,m]=(0,x.useState)(""),{mint_stake:f,period:j,reward:g,mint_reward:C}=d[t]||{},b=B(f);(0,x.useEffect)((()=>{(async()=>{const{symbol:e}=await s.findByAddress(C)||{};m(e||"TOKEN")})()}),[C,s]);const v=Object.keys(a).find((e=>{const{mint_lpt:t}=a[e];return t===f})),A=async e=>{e&&(await h(e),await(0,y.sA)(1500),await h(""))},S=(0,x.useMemo)((()=>b?u.utils.undecimalize(g,b):0),[b,g]),k=(0,x.useMemo)((()=>{let e=Number(j)/86400,t="days";return e>29&&(e/=30,t=e>1?"months":"month"),e<2&&(e*=24,t=e>1?"hours":"hour"),`${S} ${o} / ${Math.floor(e)} ${t}`}),[S,j,o]);return(0,w.jsxs)(i.Row,{gutter:[24,24],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(Ie,{title:"Farming address:",address:t,onCopy:e=>A(e),copieAddress:c})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(Ie,{title:v?"Pool address:":"Stake mint address:",address:v||f,onCopy:e=>A(e),copieAddress:c,description:!0})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{align:"baseline",children:[(0,w.jsx)(Pe,{title:"Rewarding:"}),(0,w.jsx)(i.Typography.Text,{style:{wordBreak:"break-all"},children:k})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{align:"baseline",children:[(0,w.jsx)(Pe,{title:"Budget:"}),(0,w.jsx)(i.Typography.Text,{style:{wordBreak:"break-all"},children:(0,y.uR)(l).format("0,0.[00]")}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:p})]})})]})},{sol:{senAddress:Oe,farming:Ne}}=m,Le=e=>{let{farmAddress:t,onChange:s=(()=>{})}=e;const{accounts:a}=(0,n.useAccount)(),{wallet:{address:o}}=(0,n.useWallet)(),d=(0,r.useSelector)((e=>e.farms)),[c,h]=(0,x.useState)(""),[p,m]=(0,x.useState)("0"),[f,j]=(0,x.useState)(!1),{mint_reward:g}=(null===d||void 0===d?void 0:d[t])||{},C=B(g);(0,x.useEffect)((()=>{(async()=>{if(C)try{const{splt:e}=window.sentre,t=await e.deriveAssociatedAddress(o,g),{amount:s}=a[t]||{};m(s?u.utils.undecimalize(s,C):"0")}catch(e){m("0")}})()}),[o,a,g,C]);return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Card,{style:{boxShadow:"unset",borderRadius:8},bodyStyle:{padding:8},children:(0,w.jsxs)(i.Row,{gutter:[0,0],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Row,{gutter:[0,0],wrap:!1,style:{margin:"6px 12px 0px 12px",fontSize:12},children:[(0,w.jsx)(i.Col,{flex:"auto",children:(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Amount"})}),(0,w.jsx)(i.Col,{children:(0,w.jsxs)(i.Space,{size:6,children:[(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Available:"}),(0,w.jsx)(i.Typography.Text,{children:(0,y.uR)(p).format("0,0.[00]")}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"SNTR"})]})})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(z,{placeholder:"0",value:c,onValue:h,suffix:(0,w.jsx)(i.Button,{type:"text",onClick:()=>h(p),size:"small",style:{marginRight:-7},children:"MAX"}),bordered:!1,max:p})})]})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{type:"primary",icon:(0,w.jsx)(l.Z,{name:"add-outline"}),onClick:async()=>{j(!0);const{wallet:e,splt:r}=window.sentre;if(!e)return;const n=await r.deriveAssociatedAddress(o,Oe),a=u.utils.decimalize(c,9);try{const{txId:r}=await Ne.seed(a,t,n,e);return s(r),P("Seed",r)}catch(l){return _(l)}finally{j(!1)}},block:!0,disabled:!c,loading:f,children:"Seed"})})]})},{sol:{farming:De}}=m,He=e=>{let{farmAddress:t,onChange:s=(()=>{})}=e;const{wallet:{address:a}}=(0,n.useWallet)(),o=(0,r.useSelector)((e=>e.farms)),[d,c]=(0,x.useState)(""),[h,p]=(0,x.useState)("0"),[m,f]=(0,x.useState)(!1),{treasury_reward:g,mint_reward:C}=o[t]||{},b=B(C),{symbol:v}=j(C);(0,x.useEffect)((()=>{(async()=>{if(b)try{const{splt:e}=window.sentre,{amount:t}=await e.getAccountData(g);p(t?u.utils.undecimalize(t,b):"0")}catch(e){p("0")}})()}),[b,g]);return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Card,{style:{boxShadow:"unset",borderRadius:8},bodyStyle:{padding:8},children:(0,w.jsxs)(i.Row,{gutter:[0,0],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Row,{gutter:[0,0],wrap:!1,style:{margin:"6px 12px 0px 12px",fontSize:12},children:[(0,w.jsx)(i.Col,{flex:"auto",children:(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Amount"})}),(0,w.jsx)(i.Col,{children:(0,w.jsxs)(i.Space,{size:6,children:[(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"Available:"}),(0,w.jsx)(i.Typography.Text,{children:(0,y.uR)(h).format("0,0.[00]")}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:v})]})})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(z,{placeholder:"0",value:d,onValue:c,suffix:(0,w.jsx)(i.Button,{type:"text",onClick:()=>c(h),size:"small",style:{marginRight:-7},children:"MAX"}),bordered:!1,max:h})})]})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{type:"primary",icon:(0,w.jsx)(l.Z,{name:"remove-outline"}),onClick:async()=>{f(!0);const{wallet:e,splt:r}=window.sentre;if(!e||!b)return;const n=await r.deriveAssociatedAddress(a,C),l=u.utils.decimalize(d,b);try{const{txId:r}=await De.unseed(l,t,n,e);return s(r),P("Unseed",r)}catch(i){return _(i)}finally{f(!1)}},block:!0,disabled:!d,loading:m,children:"Unseed"})})]})};let Ve,Qe;!function(e){e[e.POLICY_AGREEMENT=0]="POLICY_AGREEMENT",e[e.FARM_CREATING_CONFIRMATION=1]="FARM_CREATING_CONFIRMATION"}(Ve||(Ve={})),function(e){e[e.isActive=1]="isActive",e[e.isFreeze=2]="isFreeze"}(Qe||(Qe={}));const{sol:{farming:We}}=m,$e=e=>{let{farmAddress:t,onChange:s=(()=>{})}=e;const n=(0,r.useSelector)((e=>e.farms)),[a,o]=(0,x.useState)(!1),{state:d}=(null===n||void 0===n?void 0:n[t])||{},c=d===Qe.isActive,u=c?{backgroundColor:"#40A9FF",color:"#fff"}:{},h=c?"snow-outline":"sunny-outline",p=c?"Freeze":"Thaw";return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{className:"caption",align:"start",children:[(0,w.jsx)(l.Z,{name:"information-circle-outline"}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:'Freezing a farm will prevent all actions, but "seed" and "unseed", until the farm has been thawed.'})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{type:"primary",style:{...u,border:"unset"},icon:(0,w.jsx)(l.Z,{name:h}),onClick:c?async()=>{const{wallet:e}=window.sentre;if(e){o(!0);try{const{txId:r}=await We.freeze(t,e);return s(r),P("Freeze the farm",r)}catch(r){return _(r)}finally{o(!1)}}}:async()=>{const{wallet:e}=window.sentre;if(e){o(!0);try{const{txId:r}=await We.thaw(t,e);return s(r),P("Thaw the farm",r)}catch(r){return _(r)}finally{o(!1)}}},block:!0,disabled:!d,loading:a,children:p})})]})},{sol:{farming:qe}}=m,Ue=e=>{let{farmAddress:t,onChange:s=(()=>{})}=e;const n=(0,r.useSelector)((e=>e.farms)),[a,o]=(0,x.useState)(!1),{total_shares:d}=(null===n||void 0===n?void 0:n[t])||{},c=(0,r.useDispatch)();return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{className:"caption",children:[(0,w.jsx)(l.Z,{name:"information-circle-outline"}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"The farm can be closed only all farmers unstaked their tokens!"})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{type:"primary",icon:(0,w.jsx)(l.Z,{name:"trash-outline"}),onClick:async()=>{const{wallet:e}=window.sentre;if(e){o(!0);try{const{txId:r}=await qe.closeFarm(t,e);return s(r),c(ue({farmAddress:t})),P("Close the farm",r)}catch(r){return _(r)}finally{o(!1)}}},block:!0,disabled:!!d,loading:a,children:"Close Farm"})})]})},Ge=e=>{let{label:t="",title:s=""}=e;return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{flex:"auto",children:(0,w.jsx)(i.Typography.Text,{type:"secondary",children:t})}),(0,w.jsx)(i.Col,{children:(0,w.jsx)(i.Typography.Text,{children:s})})]})},Ye=e=>{let{farmAddress:t}=e;const s=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),[n,a]=(0,x.useState)(!1),[o,d]=(0,x.useState)(!1),{budget:c,budgetSymbol:h}=Me(t),{mint_stake:p,period:m,reward:f}=s||{},j=B(p),g=(0,x.useMemo)((()=>j?u.utils.undecimalize(f,j):0),[j,f]),b=(0,x.useMemo)((()=>{let e=Number(m)/86400,t="days";return e>29&&(e/=30,t=e>1?"months":"month"),e<2&&(e*=24,t=e>1?"hours":"hour"),`${g} ${h} / ${Math.floor(e)} ${t}`}),[g,m,h]);return(0,w.jsxs)(x.Fragment,{children:[(0,w.jsx)(i.Button,{onClick:()=>a(!0),children:"Manage"}),(0,w.jsx)(i.Modal,{visible:n,onCancel:()=>a(!1),closeIcon:(0,w.jsx)(l.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{style:{lineHeight:1},children:[(0,w.jsx)(l.Z,{name:"leaf"}),(0,w.jsx)(i.Typography.Title,{level:5,style:{margin:0},children:"Farm Management"})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Card,{style:{borderRadius:8},bodyStyle:{padding:16},bordered:!1,children:(0,w.jsxs)(i.Row,{gutter:[8,8],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Row,{gutter:[0,0],children:[(0,w.jsx)(i.Col,{flex:"auto",children:(0,w.jsxs)(i.Space,{size:12,style:{fontWeight:600},children:[(0,w.jsx)(C,{mintAddress:p,size:32}),(0,w.jsx)(v,{mintAddress:p})]})}),(0,w.jsx)(i.Col,{children:(0,w.jsxs)(i.Space,{size:2,children:[(0,w.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:(0,y.Xn)(t)}),(0,w.jsx)(i.Tooltip,{visible:o,title:"Copied",children:(0,w.jsx)(Be(),{text:t,children:(0,w.jsx)(i.Button,{type:"text",size:"small",onClick:async()=>{d(!0),await(0,y.sA)(1500),d(!1)},icon:(0,w.jsx)(l.Z,{name:"copy-outline"})})})}),(0,w.jsx)(i.Button,{type:"text",size:"small",onClick:()=>window.open((0,y.kU)(t),"_blank"),icon:(0,w.jsx)(l.Z,{name:"open-outline"})})]})})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(Ge,{label:"Budget",title:`${c} ${h}`})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(Ge,{label:"Reward",title:b})})]})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Tabs,{children:[(0,w.jsx)(i.Tabs.TabPane,{tab:"Seed",children:(0,w.jsx)(Le,{farmAddress:t,onChange:()=>a(!1)})},"seed"),(0,w.jsx)(i.Tabs.TabPane,{tab:"Unseed",children:(0,w.jsx)(He,{farmAddress:t,onChange:()=>a(!1)})},"unseed"),(0,w.jsx)(i.Tabs.TabPane,{tab:"Freeze/Thaw",children:(0,w.jsx)($e,{farmAddress:t,onChange:()=>a(!1)})},"freeze-thaw"),(0,w.jsx)(i.Tabs.TabPane,{tab:"Ownership",disabled:!0,children:"TBD"},"ownership"),(0,w.jsx)(i.Tabs.TabPane,{tab:"Close",children:(0,w.jsx)(Ue,{farmAddress:t,onChange:()=>a(!1)})},"close")]})})]})})]})},{sol:{senAddress:Je,farming:Xe}}=m,Ke=e=>{let{farmAddress:t,onClose:s}=e;const a=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),{data:o}=V(t),{wallet:{address:d}}=(0,n.useWallet)(),[c,h]=(0,x.useState)(!1),p=u.utils.undecimalize(null===o||void 0===o?void 0:o.shares,9);return(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{align:"start",children:[(0,w.jsx)(l.Z,{name:"alert-circle-outline"}),(0,w.jsx)(i.Typography.Text,{children:"When the reward budget is too low, you may be not able to unstake. Exiting the farm means you give up on rewards and merely get back your tokens."})]})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Card,{style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:12},children:(0,w.jsxs)(i.Row,{gutter:[0,0],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Typography.Text,{className:"caption",type:"secondary",children:"Amount"})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(z,{placeholder:"0",value:p,size:"small",bordered:!1})})]})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Button,{type:"primary",icon:(0,w.jsx)(l.Z,{name:"remove"}),onClick:async()=>{h(!0);const{splt:e,wallet:r}=window.sentre,{mint_stake:n}=a;if(!r||!u.account.isAddress(n))return;const l=await e.deriveAssociatedAddress(d,Je),i=await e.deriveAssociatedAddress(d,n);try{const{txId:e}=await Xe.rid(i,l,t,r);return s(!1),P("Exit",e)}catch(o){return _(o)}finally{h(!1)}},block:!0,disabled:!p,loading:c,children:"Exit"})})]})},et=e=>{const{farms:{[e]:t}}=(0,r.useSelector)((e=>e)),{getTotalValue:s}=A(),[n,a]=(0,x.useState)(0),l=(0,x.useCallback)((async()=>{if(!t)return a(0);const{total_shares:e,mint_stake:r}=t,n=await s({mintAddress:r,amount:e});return a(n)}),[t,s]);return(0,x.useEffect)((()=>{l()}),[l]),n},{sol:{senAddress:tt,farming:st}}=m,rt="The budget of reward is very low. Please unstake your tokens for safety.",nt=e=>{let{farmAddress:t}=e;const s=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),{data:o}=V(t),d=(e=>{const t=(0,r.useSelector)((t=>t.farms[e])),{data:s}=V(e),[n,a]=(0,x.useState)(0),l=(0,x.useCallback)((()=>{if(!s||!t)return a(0);const e=q(s,t)||0;return a(e)}),[s,t]);return(0,x.useEffect)((()=>{l()}),[l]),n})(t),c=(e=>{const[t,s]=(0,x.useState)(),{farms:{[e]:a}}=(0,r.useSelector)((e=>e)),{pools:l}=(0,n.usePool)(),i=(0,x.useCallback)((async()=>{const e=null===a||void 0===a?void 0:a.mint_stake;if(!e)return s(void 0);const t=Object.keys(l).find((t=>{const{mint_lpt:s}=l[t];return s===e}));if(!u.account.isAddress(t))return s(void 0);const r=l[t];return s({address:t,data:r})}),[null===a||void 0===a?void 0:a.mint_stake,l]);return(0,x.useEffect)((()=>{i()}),[i]),t})(t),h=et(t),{apr:p}=(e=>{const t=(0,r.useSelector)((t=>t.farms[e])),s=et(e),{getTotalValue:n}=A(),[a,l]=(0,x.useState)(0),i=(0,x.useCallback)((async()=>{if(!s)return l(0);const{mint_reward:e,reward:r,period:a}=t,i=r*BigInt(86400)/a,o=await n({mintAddress:e,amount:i});return l(o/s)}),[t,n,s]);return(0,x.useEffect)((()=>{i()}),[i]),{roi:a,apr:365*a}})(t),{ui:{width:m}}=(0,n.useUI)(),{wallet:{address:f}}=(0,n.useWallet)(),j=(0,a.useHistory)(),[g,b]=(0,x.useState)(),[S,k]=(0,x.useState)(!1),[T,R]=(0,x.useState)(!1),[E,F]=(0,x.useState)(!1),[z,I]=(0,x.useState)(""),{owner:M,state:Z,reward:O}=s||{},N=M===f,L=(0,r.useSelector)((e=>e.main.search)),H=Z===Qe.isFreeze,Q=B(null===s||void 0===s?void 0:s.mint_stake),W=B(null===s||void 0===s?void 0:s.mint_stake),{budget:$}=Me(t),U=(0,x.useMemo)((()=>0!==W&&W?Number(u.utils.undecimalize(O,W)):0),[W,O]),G=()=>b(g?void 0:t);(0,x.useEffect)((()=>{L&&L===t&&b(L)}),[$,t,U,L]),(0,x.useEffect)((()=>I(U?$<3*U?rt:"":rt)),[$,U]);const Y=()=>(0,w.jsxs)(i.Row,{gutter:[8,8],children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsxs)(i.Space,{size:4,children:[(0,w.jsx)(i.Typography.Title,{style:{color:"#fff"},level:5,children:"APR"}),(0,w.jsx)(i.Typography.Text,{type:"secondary",children:"(Annual Percentage Rate)"})]})}),(0,w.jsx)(i.Col,{children:(0,w.jsx)(i.Typography.Text,{style:{color:"#E9E9EB"},children:"Refers to the simple interest accured from a particular inverstment over a 1 year period."})})]});let J="0";o&&Q&&(J=u.utils.undecimalize(o.shares,Q));const X=m>768?g?"chevron-down-outline":"chevron-forward-outline":g?"chevron-up-outline":"chevron-down-outline",K=H?{opacity:.6}:{};return(0,w.jsxs)(i.Row,{style:{...K},children:[(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Card,{bordered:!1,className:"farming-card",bodyStyle:{padding:16},style:{boxShadow:"unset",borderRadius:8,position:"relative",zIndex:1},hoverable:!0,onClick:G,children:(0,w.jsxs)(i.Row,{gutter:[16,16],justify:"center",align:"middle",children:[(0,w.jsx)(i.Col,{flex:"auto",children:(0,w.jsxs)(i.Row,{gutter:[16,16],align:"middle",children:[(0,w.jsx)(i.Col,{xs:24,md:5,children:(0,w.jsxs)(i.Space,{children:[(0,w.jsx)(C,{mintAddress:null===s||void 0===s?void 0:s.mint_stake,size:24}),(0,w.jsx)(v,{mintAddress:null===s||void 0===s?void 0:s.mint_stake}),(0,w.jsx)(i.Button,{type:"text",shape:"circle",size:"small",icon:(0,w.jsx)(i.Typography.Text,{type:"secondary",children:(0,w.jsx)(l.Z,{name:"information-circle-outline"})}),onClick:e=>{e.stopPropagation(),R(!0)}})]})}),(0,w.jsx)(i.Col,{xs:12,md:4,children:(0,w.jsx)(D,{label:"APR",tooltip:(0,w.jsx)(Y,{}),value:(0,y.uR)(p).format("0,0.[00]a%")})}),(0,w.jsx)(i.Col,{xs:12,md:5,children:(0,w.jsx)(D,{label:"Liquidity",value:(0,y.uR)(h).format("0,0.00[00]a$")})}),(0,w.jsx)(i.Col,{xs:12,md:5,children:(0,w.jsx)(D,{label:"Your staked LPT",value:(0,y.uR)(J).format("0,0.00[00]")})}),(0,w.jsx)(i.Col,{xs:12,md:5,children:(0,w.jsx)(D,{mintAddress:null===s||void 0===s?void 0:s.mint_reward,label:"Reward",value:(0,y.uR)(d).format("0,0.00[00]")})})]})}),(0,w.jsx)(i.Col,{children:(0,w.jsxs)(i.Space,{children:[H&&(0,w.jsx)(l.Z,{name:"snow-outline"}),z&&(0,w.jsx)(i.Tooltip,{title:rt,children:(0,w.jsx)(l.Z,{name:"warning-outline",style:{color:"#f9575e"}})}),(0,w.jsx)(i.Button,{type:"text",icon:(0,w.jsx)(l.Z,{name:X}),disabled:!N&&H,onClick:G})]})})]})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(i.Collapse,{activeKey:g,className:"expand-farm-card",children:(0,w.jsx)(i.Collapse.Panel,{header:null,showArrow:!1,children:(0,w.jsxs)(i.Row,{gutter:[16,16],children:[(0,w.jsx)(i.Col,{xs:{order:2},md:{order:1},flex:"auto",children:c&&(0,w.jsxs)(i.Button,{type:"text",style:{padding:0,background:"transparent"},onClick:()=>{j.push(`/app/sen_lp/details?poolAddress=${c.address}`)},children:["To the pool",(0,w.jsx)(l.Z,{name:"chevron-forward-outline"})]})}),(0,w.jsx)(i.Col,{xs:{order:1},md:{order:2},children:(0,w.jsxs)(i.Space,{children:[N&&(0,w.jsx)(Ye,{farmAddress:t}),(0,w.jsx)(i.Button,{onClick:()=>k(!0),children:"Stake / Unstake"}),(0,w.jsx)(i.Button,{type:"primary",loading:E,onClick:async()=>{F(!0);const{splt:e,wallet:s}=window.sentre,r=await e.deriveAssociatedAddress(f,tt);try{if(!s)throw new Error("please connect wallet first!");const e=new Se;await e.validate(t);const{txId:n}=await st.harvest(t,r,s);return P("Harvest",n)}catch(n){return _(n)}finally{F(!1)}},disabled:H||0===d,children:"Harvest"})]})})]})},t)})}),(0,w.jsx)(i.Modal,{onCancel:()=>k(!1),closeIcon:(0,w.jsx)(l.Z,{name:"close"}),footer:null,title:null,visible:S,children:(0,w.jsxs)(i.Tabs,{defaultActiveKey:H?"exit":"stake",children:[(0,w.jsx)(i.Tabs.TabPane,{tab:"Stake",disabled:H,children:(0,w.jsx)(ze,{farmAddress:t,onClose:k})},"stake"),(0,w.jsx)(i.Tabs.TabPane,{tab:"Unstake",disabled:H,children:(0,w.jsx)(Re,{farmAddress:t,onClose:k})},"unstake"),(0,w.jsx)(i.Tabs.TabPane,{tab:"Exit",children:(0,w.jsx)(Ke,{farmAddress:t,onClose:k})},"exit")]})}),(0,w.jsx)(i.Modal,{visible:T,onCancel:()=>R(!1),closeIcon:(0,w.jsx)(l.Z,{name:"close"}),title:"Farm Info",footer:null,destroyOnClose:!0,centered:!0,children:(0,w.jsx)(Ze,{farmAddress:t})})]})},at=e=>{const{tokenProvider:t}=(0,n.useMint)(),{sentreFarms:s}=k(),{pools:a}=(0,n.usePool)(),{search:l}=(0,r.useSelector)((e=>e.main)),[i,o]=(0,x.useState)({}),d=(0,x.useCallback)((e=>Object.keys(a).find((t=>a[t].mint_lpt===e))),[a]),c=(0,x.useCallback)((async()=>{const r={},n=(await t.find(l)).map((e=>e.address));Object.keys(e).filter((t=>{if(!l||!a||!e||l.length<3)return!0;const s=e[t],{mint_stake:r}=s,i=d(r);if(i){if(i===l)return!0;const{mint_a:e,mint_b:t}=a[i];if(n.includes(e)||n.includes(t))return!0}return t===l||(n.includes(r)||r===l)})).sort(((t,r)=>!s[t]&&s[r]?1:s[t]&&!s[r]?-1:e[t].total_shares<e[r].total_shares?1:-1)).map((t=>r[t]=e[t])),await o(r)}),[e,d,l,a,s,t]);return(0,x.useEffect)((()=>{c().then((()=>{setTimeout((()=>{(0,E.be)()}),500)}))}),[c]),i},lt=()=>{const{farms:e}=(0,r.useSelector)((e=>e)),t=at(e),s=(0,x.useMemo)((()=>Object.keys(t)),[t]);return s.length?(0,w.jsx)(i.Row,{gutter:[16,16],children:s.map((e=>(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(E.ZP,{height:84,children:(0,w.jsx)(nt,{farmAddress:e})})},e)))}):(0,w.jsx)(i.Empty,{})},{sol:{senOwners:it}}=m,ot=()=>{const{sentreFarms:e}=k(),t=at(e),s=(0,x.useMemo)((()=>Object.keys(t)),[t]),r=(0,x.useMemo)((()=>s.filter((e=>it.includes(t[e].owner)))),[t,s]),n=(0,x.useMemo)((()=>r.sort(((e,s)=>t[e].total_shares<t[s].total_shares?1:-1))),[t,r]);return 0===n.length?(0,w.jsx)(i.Empty,{}):(0,w.jsx)(i.Row,{gutter:[16,16],children:n.map(((e,t)=>(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(E.ZP,{height:84,children:(0,w.jsx)(nt,{farmAddress:e})})},e+t)))})},{sol:{farming:dt}}=m,ct=()=>{const[e,t]=(0,x.useState)({}),{farms:s,debts:a}=(0,r.useSelector)((e=>e)),{wallet:{address:l}}=(0,n.useWallet)(),i=(0,x.useCallback)((async e=>{const t=await dt.deriveDebtAddress(l,e),s=a[t];return(null===s||void 0===s?void 0:s.shares)>BigInt(0)}),[a,l]),o=(0,x.useCallback)((async e=>{const s={};for(const t in e){await i(t)&&(s[t]=e[t])}t(s)}),[i]);return(0,x.useEffect)((()=>{o(s)}),[s,o]),{stakedFarms:e,filterStakedFarms:o,checkStakedFarm:i}},ut=()=>{const{stakedFarms:e}=ct(),t=at(e);return 0===Object.keys(t).length?(0,w.jsx)(i.Empty,{}):(0,w.jsx)(i.Row,{gutter:[16,16],children:Object.keys(t).map((e=>(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(E.ZP,{height:84,children:(0,w.jsx)(nt,{farmAddress:e})})},e)))})},ht=()=>{const[e,t]=(0,x.useState)({}),s=(0,r.useSelector)((e=>e.farms)),{wallet:{address:a}}=(0,n.useWallet)(),l=(0,x.useCallback)((e=>s[e].owner===a),[s,a]),i=(0,x.useCallback)((e=>{const s={};for(const t in e)l(t)&&(s[t]=e[t]);t(s)}),[l]);return(0,x.useEffect)((()=>{i(s)}),[s,i]),{yourFarms:e,filterYourFarms:i,checkYourFarm:l}},pt=()=>{const{yourFarms:e}=ht(),t=at(e);return Object.keys(t).length?(0,w.jsx)(i.Row,{gutter:[16,16],children:Object.keys(t).map((e=>(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(E.ZP,{height:84,children:(0,w.jsx)(nt,{farmAddress:e})})},e)))}):(0,w.jsx)(i.Empty,{})};var mt;!function(e){e.YourFarms="YourFarms",e.SenFarm="SenFarm",e.StakedFarm="StakedFarm",e.AllFarms="AllFarms"}(mt||(mt={}));const xt=()=>{const e=(0,a.useLocation)().search,t=(0,r.useSelector)((e=>e.main.search)),{checkStakedFarm:s}=ct(),{checkYourFarm:n}=ht(),{checkSentreFarm:l}=k(),o=(0,r.useDispatch)(),[d,c]=(0,x.useState)(mt.SenFarm),[h,p]=(0,x.useState)(!1);(0,x.useEffect)((()=>{(async()=>{if(u.account.isAddress(t)&&!h)try{if(n(t))return c(mt.YourFarms);if(l(t))return c(mt.SenFarm);const e=await s(t);c(e?mt.StakedFarm:mt.AllFarms)}catch(e){}finally{p(!0)}})()}),[l,s,n,t,h]),(0,x.useEffect)((()=>{const t=new URLSearchParams(e).get("search");if(t)return o(Ce({search:t})),c(mt.AllFarms),()=>{o(Ce({search:""}))}}),[o,e]);return(0,w.jsxs)(i.Tabs,{activeKey:d,onChange:e=>{c(e),setTimeout((()=>{(0,E.be)()}),500)},tabBarExtraContent:(0,w.jsx)(L,{}),children:[(0,w.jsx)(i.Tabs.TabPane,{tab:"Sentre Farms",children:(0,w.jsx)(ot,{})},mt.SenFarm),(0,w.jsx)(i.Tabs.TabPane,{tab:"Staked Farms",children:(0,w.jsx)(ut,{})},mt.StakedFarm),(0,w.jsx)(i.Tabs.TabPane,{tab:"Your Farms",children:(0,w.jsx)(pt,{})},mt.YourFarms),(0,w.jsx)(i.Tabs.TabPane,{tab:"All Farms",children:(0,w.jsx)(lt,{})},mt.AllFarms)]})},{sol:{farming:yt}}=m;let ft=0,jt=BigInt(0);const gt=e=>{let{children:t}=e;const s=(0,r.useDispatch)(),{wallet:{address:a,lamports:l}}=(0,n.useWallet)(),i=(0,x.useCallback)((async()=>{try{if(!u.account.isAddress(a))return;await s(xe({owner:a})).unwrap()}catch(e){await _(e)}}),[s,a]),o=(0,x.useCallback)((async()=>{if(!u.account.isAddress(a))return console.warn("Wallet is not connected");if(ft)return console.warn("Already watched");const e=[{dataSize:89},{memcmp:{bytes:a,offset:32}}];ft=yt.watch(((e,t)=>{if(e)return console.error(e);const{type:r,address:n,data:a}=t;return"debt"===r?s(fe({address:n,data:a})):void 0}),e)}),[s,a]);return(0,x.useEffect)((()=>{jt&&l>jt&&s(xe({owner:a})),jt=l}),[s,a,l]),(0,x.useEffect)((()=>(i(),o(),()=>{(async()=>{try{await yt.unwatch(ft)}catch(e){}})(),ft=0})),[i,o]),t},{sol:{farming:wt,senAddress:Ct}}=m;let bt=0;const vt=e=>{let{children:t,style:s={}}=e;const n=(0,r.useDispatch)(),[a,l]=(0,x.useState)(!1),o=(0,x.useCallback)((async()=>{try{l(!0),await n(oe())}catch(e){await _(e)}finally{l(!1)}}),[n]),d=(0,x.useCallback)((async()=>{if(bt)return console.warn("Already watched");const e=[{dataSize:209},{memcmp:{bytes:Ct,offset:97}}];bt=wt.watch(((e,t)=>{if(e)return console.error(e);const{type:s,address:r,data:a}=t;return"farm"===s?n(ce({address:r,data:a})):void 0}),e)}),[n]);return(0,x.useEffect)((()=>(o(),d(),()=>{(async()=>{try{wt.unwatch(bt)}catch(e){}})(),bt=0})),[o,d]),(0,w.jsx)(i.Spin,{spinning:a,style:s,children:t})},At=e=>{let{children:t,style:s}=e;return(0,w.jsx)(vt,{style:s,children:(0,w.jsx)(gt,{children:t})})},{route:{farmRoute:St}}=m,kt=()=>{const{search:e,pathname:t}=(0,a.useLocation)(),{search:s}=(0,r.useSelector)((e=>e.main)),n=(0,r.useDispatch)(),o=(0,a.useHistory)();return(0,w.jsx)(At,{children:(0,w.jsxs)(i.Row,{gutter:[24,24],style:{paddingBottom:12},justify:"center",children:[(0,w.jsx)(i.Col,{xs:24,lg:18,children:(0,w.jsx)(R,{})}),(0,w.jsx)(i.Col,{xs:24,lg:18,children:(0,w.jsxs)(i.Row,{gutter:[8,8],children:[(0,w.jsx)(i.Col,{xs:24,lg:8,children:(0,w.jsx)(i.Card,{bodyStyle:{padding:0},style:{borderRadius:8,background:"transparent",boxShadow:"unset"},children:(0,w.jsx)(i.Input,{placeholder:"Search by name, address",value:s,onChange:s=>(new URLSearchParams(e).get("search")&&o.push(t),n(Ce({search:s.target.value}))),prefix:s?(0,w.jsx)(i.Button,{type:"text",style:{width:"auto",height:"auto",background:"transparent"},onClick:()=>(n(Ce({search:""})),o.push(St)),icon:(0,w.jsx)(l.Z,{name:"close-outline"})}):(0,w.jsx)(l.Z,{name:"search-outline"}),bordered:!1,size:"large"})})}),(0,w.jsx)(i.Col,{span:24,children:(0,w.jsx)(xt,{})})]})})]})})};var Tt=s(79937);const{manifest:{appId:Rt}}=m,Et=()=>(0,w.jsx)(n.UIProvider,{appId:Rt,antd:!0,children:(0,w.jsx)(n.PoolProvider,{children:(0,w.jsx)(n.MintProvider,{children:(0,w.jsx)(n.AccountProvider,{children:(0,w.jsx)(n.WalletProvider,{children:(0,w.jsx)(r.Provider,{store:ve,children:(0,w.jsx)(kt,{})})})})})})})},57452:(e,t,s)=>{"use strict";s.d(t,{R:()=>i});const r={ttl:3e4},n={limit:{calls:10,time:1e3},cache:r};class a{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class l{static set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}l.mapCache=new Map;class i{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new o(e);return this.mapInstance.set(t,s),s}static async load(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let r=i.getSingleFlight(s);i.mapInstance.set(e,r);const n=new a(e);return r.load(n,t)}}i.mapInstance=new Map;class o{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(n,e)}async load(e,t){const s=l.get(e.key);if(s)return Promise.resolve(s);let r=!1,n=this.mapRequestCalling.get(e.key);return n||(n=e,r=!0,this.mapRequestCalling.set(n.key,n)),new Promise(((e,s)=>{if(!n)return s("Not found request!");n.add(e,s),r&&this.fetch(n,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{l.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}},63805:(e,t,s)=>{"use strict";s.d(t,{Bv:()=>l,OB:()=>n,ef:()=>a,f4:()=>i});var r=s(53933);const n="production",a=(()=>{switch(r.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})(),l=(()=>{switch(a){case"devnet":return 103;case"testnet":return 102;default:return 101}})(),i={devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com",mainnet:"development"===n?"https://api.mainnet-beta.solana.com":"https://solitary-autumn-water.solana-mainnet.quiknode.pro/dcbac9d444818a20ac583541dec35b44c6840888/"}[a]},53933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const r="sentre",n=window.localStorage,a=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},l={set:(e,t)=>{let s=a(n.getItem(r));s&&"object"===typeof s||(s={}),s[e]=t,n.setItem(r,JSON.stringify(s))},get:e=>{let t=a(n.getItem(r));return t&&"object"===typeof t?t[e]:null},clear:e=>{l.set(e,null)}},i=l},34559:(e,t,s)=>{"use strict";s.d(t,{RB:()=>o,Xn:()=>c,kU:()=>u,l$:()=>p,sA:()=>d,uR:()=>h});var r=s(95418),n=s(16200),a=s.n(n),l=s(63805),i=s(57452);const o=e=>window.open(e,"_blank"),d=e=>new Promise((t=>setTimeout(t,e))),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.substring(0,t)+s+e.substring(e.length-t,e.length)},u=e=>r.account.isAddress(e)?`https://solscan.io/account/${e}?cluster=${l.ef}`:`https://solscan.io/tx/${e}?cluster=${l.ef}`,h=e=>e?a()(e):a()("0"),p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.R.load("fetchCGK"+e,(()=>r.utils.parseCGK(e)))}},89374:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.dd3222bdab290f263138.md"},59062:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.b9f205289419b34b5909.png"},38340:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.18a27df4f6df24a4cda6.png"},45910:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.c1dd88a37d9553466530.png"},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_app_bootstrap_app_tsx.4305837e.chunk.js.map