/*! For license information please see src_bootstrap_app_tsx.6e6adc8e.chunk.js.LICENSE.txt */
(globalThis.webpackChunksen_farming=globalThis.webpackChunksen_farming||[]).push([["src_bootstrap_app_tsx"],{98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>p,default:()=>f});var r,n,a,o,l,i,d,c=s(92950);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},u.apply(this,arguments)}function h(e,t){let{title:s,titleId:h,...p}=e;return c.createElement("svg",u({width:257,height:256,viewBox:"0 0 257 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":h},p),s?c.createElement("title",{id:h},s):null,r||(r=c.createElement("path",{d:"M0.622803 60C0.622803 26.8629 27.4857 0 60.6228 0H196.623C229.76 0 256.623 26.8629 256.623 60V196C256.623 229.137 229.76 256 196.623 256H60.6228C27.4857 256 0.622803 229.137 0.622803 196V60Z",fill:"url(#paint0_linear_1802_5774)"})),n||(n=c.createElement("path",{d:"M211.234 115.694H216.613C216.977 115.694 221.629 115.549 219.158 109.01C216.541 102.181 208.4 101.745 208.4 101.745L196.042 56.919C196.042 56.919 194.516 49 186.738 49C178.888 49 113.83 49 113.83 49C113.83 49 103.799 49.218 103.799 60.261H113.249L102.055 102.399H91.006V79.877C91.006 79.877 90.9333 72.2486 83.1555 72.2486C75.305 72.2486 72.7609 72.2486 72.7609 72.2486L75.9593 80.4582H81.1929C81.1929 80.4582 81.2656 80.4582 81.3383 80.4582C81.7744 80.4582 83.0828 80.6762 83.0828 83.219C83.0828 86.2704 83.0828 102.617 83.0828 102.617H47.683C47.683 102.617 47.683 102.617 47.6103 102.617C46.6654 102.617 34.8897 102.835 34.8897 114.677C34.8897 127.028 37.1431 148.824 37.1431 148.824C29.0018 154.636 23.6228 164.226 23.6228 175.123C23.6228 192.923 38.088 207.308 55.8969 207.308C73.7059 207.308 88.1711 192.85 88.1711 175.051C88.1711 167.858 85.7723 161.174 81.7744 155.798H93.6228L96.1669 162.555H122.117L124.37 155.507L133.457 155.58C133.457 156.161 133.457 156.67 133.457 157.251C133.457 184.859 155.845 207.308 183.54 207.308C211.162 207.308 233.623 184.931 233.623 157.251C233.477 139.96 224.609 124.703 211.234 115.694ZM55.9696 191.979C46.52 191.979 38.8149 184.278 38.8149 174.833C38.8149 165.388 46.52 157.687 55.9696 157.687C65.4193 157.687 73.1244 165.388 73.1244 174.833C73.1971 184.278 65.492 191.979 55.9696 191.979ZM159.261 63.3124C159.261 62.8765 159.334 60.6243 161.079 58.9533C161.878 58.1541 163.259 57.2096 165.585 57.2096H185.502C186.302 57.2096 190.445 57.5729 191.899 64.1116C192.989 68.8339 198.95 93.8261 199.168 94.9159C199.313 95.4971 199.968 98.4032 198.223 100.728C197.423 101.818 195.824 103.053 192.917 103.053H165.585C163.041 103.053 159.334 101.382 159.334 96.7322V63.3124H159.261ZM118.119 103.344C118.046 103.344 117.974 103.344 117.901 103.344C117.61 103.344 114.775 103.053 113.104 100.801C112.304 99.7836 111.504 98.0399 112.086 95.3518C113.031 90.9927 119.137 62.0773 119.21 61.7867C119.21 61.7141 119.21 61.6414 119.282 61.4961C119.791 59.8978 121.608 57.2096 125.315 57.2096H149.085C151.484 57.2096 155.336 58.9533 155.336 63.5304V97.6767C155.336 97.7493 155.336 97.822 155.336 97.822C155.191 100.002 153.446 103.271 149.158 103.271H118.119V103.344ZM183.54 190.453C165.44 190.453 150.684 175.705 150.684 157.614C150.684 139.524 165.44 124.776 183.54 124.776C201.639 124.776 216.395 139.524 216.395 157.614C216.395 175.705 201.639 190.453 183.54 190.453Z",fill:"#212433"})),a||(a=c.createElement("path",{opacity:.5,d:"M198.223 100.728C197.423 101.818 195.824 103.053 192.917 103.053H165.585C163.041 103.053 159.334 101.382 159.334 96.7323V63.3125C159.334 62.8766 159.407 60.6244 161.151 58.9534C161.951 58.1542 163.332 57.2097 165.658 57.2097H185.575C186.374 57.2097 190.518 57.573 191.972 64.1116C193.062 68.834 199.022 93.8262 199.241 94.916C199.313 95.5699 199.967 98.4759 198.223 100.728Z",fill:"#212433"})),o||(o=c.createElement("path",{opacity:.5,d:"M155.336 63.5303V97.6766C155.336 97.7493 155.336 97.8219 155.336 97.8219C155.191 100.002 153.446 103.271 149.158 103.271H118.119C118.047 103.271 117.974 103.271 117.901 103.271C117.61 103.271 114.776 102.98 113.104 100.728C112.304 99.7109 111.505 97.9673 112.086 95.2791C113.031 90.92 119.137 62.0046 119.21 61.714C119.21 61.6414 119.21 61.5687 119.282 61.4234C119.791 59.8251 121.608 57.137 125.316 57.137H149.085C151.484 57.2096 155.336 58.9533 155.336 63.5303Z",fill:"#212433"})),l||(l=c.createElement("path",{opacity:.5,d:"M183.54 127.464C166.967 127.464 153.446 140.977 153.446 157.542C153.446 174.106 166.967 187.62 183.54 187.62C200.113 187.62 213.633 174.106 213.633 157.542C213.633 140.977 200.113 127.464 183.54 127.464ZM183.54 172.944C175.035 172.944 168.202 166.042 168.202 157.614C168.202 149.114 175.108 142.285 183.54 142.285C192.044 142.285 198.877 149.187 198.877 157.614C198.877 166.042 191.972 172.944 183.54 172.944Z",fill:"#212433"})),i||(i=c.createElement("path",{opacity:.5,d:"M55.9694 160.375C48.0463 160.375 41.5769 166.841 41.5769 174.76C41.5769 182.679 48.0463 189.145 55.9694 189.145C63.8926 189.145 70.362 182.679 70.362 174.76C70.4346 166.841 63.9653 160.375 55.9694 160.375ZM55.9694 181.807C52.1169 181.807 48.9185 178.683 48.9185 174.76C48.9185 170.91 52.0442 167.713 55.9694 167.713C59.822 167.713 63.0203 170.837 63.0203 174.76C63.0203 178.683 59.8947 181.807 55.9694 181.807Z",fill:"#212433"})),d||(d=c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_1802_5774",x1:.999999,y1:-114739e-11,x2:257,y2:256,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FFD666"}),c.createElement("stop",{offset:1,stopColor:"#FFE58F"})))))}const p=c.forwardRef(h),f=s.p+"static/media/logo.4510beb32107f8e07e512c69e06f7545.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return o.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return l.default}});var r=i(s(70854)),n=i(s(27803)),a=i(s(85468)),o=i(s(98463)),l=i(s(83272));function i(e){return e&&e.__esModule?e:{default:e}}const d=[r.default,n.default,a.default];t.h0=d},68796:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>kt,__esModule:()=>St.X$,logo:()=>St.jY,panels:()=>St.h0,readme:()=>St.ng});var r=s(55754),n=s(44490),a=s(45055),o=s(69716),l=s(94751);const i={appId:"sen_farming",url:"https://descartesnetwork.github.io/sen-farming/index.js"},d={development:{...i},staging:{...i},production:{...i}};var c=s(95418);const u={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",farmingAddress:"CpEsjrLhBkcuApn5uEE2tZCwxyCQKmT6S4YgT9zuLW2J",get farming(){return new c.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwners:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",farmingAddress:"CpEsjrLhBkcuApn5uEE2tZCwxyCQKmT6S4YgT9zuLW2J",get farming(){return new c.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwners:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},mainnet:{node:"https://ssc-dao.genesysgo.net",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",farmingAddress:"DTvdh6Q13SfYxMoWyibBUmQAUqd2pDPSpjdku5a9NLSF",get farming(){return new c.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwners:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG"]}},h={development:{farmRoute:"/app/senhub"},staging:{farmRoute:"/app/sen_farming"},production:{farmRoute:"/app/sen_farming"}},p={manifest:d[n.env],sol:u[n.net],route:h[n.env]};var f=s(92950);const m={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},y=e=>{const[t,s]=(0,f.useState)(m),{tokenProvider:r}=(0,n.useMint)(),a=(0,f.useCallback)((async()=>{try{var t;const a=await r.findByAddress(e),o=null===a||void 0===a||null===(t=a.extensions)||void 0===t?void 0:t.coingeckoId,l=await n.util.fetchCGK(o);return s(l)}catch(a){return s(m)}}),[e,r]);return(0,f.useEffect)((()=>{a()}),[a]),t},x=e=>{const{tokenProvider:t}=(0,n.useMint)(),{pools:s}=(0,n.usePool)(),[r,a]=(0,f.useState)([]),o=(0,f.useCallback)((async()=>{const r=await t.findByAddress(e);if(r)return a([r]);const n=Object.values(s).find((t=>{let{mint_lpt:s}=t;return s===e}));if(!n)return a([void 0]);const{mint_a:o,mint_b:l}=n,i=await t.findByAddress(o),d=await t.findByAddress(l);return a([i,d])}),[e,s,t]);return(0,f.useEffect)((()=>{o()}),[o]),r};var j=s(45263);const g=e=>{let{mintAddress:t,size:s=24,icon:r=(0,j.jsx)(o.Z,{name:"diamond-outline"}),isReserve:n=!1}=e;const a=x(t),i=(0,f.useMemo)((()=>{const e=JSON.parse(JSON.stringify(a));return n?e.reverse():e}),[n,a]);return(0,j.jsx)(l.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},children:i.map(((e,t)=>(0,j.jsx)(l.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:r},(null===e||void 0===e?void 0:e.address)||t)))})},b=e=>{let{mintAddress:t,separator:s=" \u2022 ",isReverse:r=!1}=e;const a=x(t),o=(0,f.useMemo)((()=>{let e=a.map((e=>{if(!e)return n.util.shortenAddress(t);const{name:s,address:r,symbol:o}=e;return 1===a.length&&s?s:o||n.util.shortenAddress(r)}));return r&&e.reverse(),e.join(s),1===a.length?e:`${e} LPT`}),[r,t,s,a]);return(0,j.jsx)("span",{children:o})},w=e=>{let{mintAddress:t,separator:s=" \u2022 ",isReverse:r=!1}=e;const n=x(t),a=(0,f.useMemo)((()=>{const e=n.map((e=>{const s=`${null===t||void 0===t?void 0:t.substr(0,3)}...`;return e?e.symbol:s}));return r&&e.reverse(),e.join(s)}),[r,t,s,n]);return(0,j.jsx)("span",{children:a})},v=()=>{const{tokenProvider:e,getMint:t}=(0,n.useMint)(),{pools:s}=(0,n.usePool)(),r=(0,f.useCallback)((async(t,s)=>{try{var r;const a=await e.findByAddress(t),o=null===a||void 0===a||null===(r=a.extensions)||void 0===r?void 0:r.coingeckoId;if(!o)throw new Error("Cant not find coingeckoId");const l=await n.util.fetchCGK(o);return Number(c.utils.undecimalize(s,a.decimals))*l.price}catch(a){return 0}}),[e]),a=(0,f.useCallback)((async n=>{let{mintAddress:o,amount:l}=n;if(await e.findByAddress(o))return r(o,l);const i=Object.values(s).find((e=>e.mint_lpt===o));if(!i)return 0;const{reserve_a:d,reserve_b:u,mint_a:h,mint_b:p}=i;if(d*u===BigInt(0))return 0;const{[o]:{supply:f}}=await t({address:o}),{deltaA:m,deltaB:y}=c.Swap.oracle.withdraw(l,f,d,u);return await a({mintAddress:h,amount:m})+await a({mintAddress:p,amount:y})}),[t,r,e,s]);return{getTotalValue:a}},{sol:{senOwners:C}}=p,A=()=>{const e=(0,r.useSelector)((e=>e.farms)),[t,s]=(0,f.useState)({}),n=(0,f.useCallback)((t=>{const s=e[t];return C.includes(s.owner)}),[e]),a=(0,f.useCallback)((e=>{const t={};for(const s in e)n(s)&&(t[s]=e[s]);s(t)}),[n]);return(0,f.useEffect)((()=>{a(e)}),[e,a]),{sentreFarms:t,filterSentreFarms:a,checkSentreFarm:n}},{sol:{senAddress:S}}=p,T=()=>{const{ui:{width:e}}=(0,n.useUI)(),t=(0,r.useSelector)((e=>e.farms)),s=y(S),a=(()=>{const[e,t]=(0,f.useState)(0),{sentreFarms:s}=A(),{getTotalValue:r}=v(),n=(0,f.useCallback)((async()=>{let e=0;await Promise.all(Object.values(s).map((async t=>{const{total_shares:s,mint_stake:n}=t,a=await r({mintAddress:n,amount:s});e+=a}))),t(e)}),[s,r]);return(0,f.useEffect)((()=>{n()}),[n]),e})(),i=e>768,d=i?void 0:24,c=i?32:16,u=i?8:4,h=i?"vertical":"horizontal",p=i?"pause-outline":"reorder-two-outline",m=(0,f.useMemo)((()=>{let e=0;for(const s in t)t[s].total_shares&&e++;return e}),[t]);return(0,j.jsx)(l.Card,{bordered:!1,className:(i?"":"banner-farming-mobile ")+"banner-farming",children:(0,j.jsxs)(l.Row,{gutter:[12,c],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Typography.Title,{level:4,style:{color:"#212433"},children:"Sen Farming"})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Row,{gutter:[12,12],children:[(0,j.jsx)(l.Col,{span:d,children:(0,j.jsxs)(l.Space,{direction:"vertical",size:u,children:[(0,j.jsx)(l.Typography.Text,{style:{color:"#212433"},children:"Total Sentre Farms TVL"}),(0,j.jsx)(l.Typography.Title,{level:2,style:{color:"#F9575E"},children:n.util.numeric(a).format("0,0.[00]$")})]})}),i&&(0,j.jsx)(l.Col,{children:(0,j.jsx)(l.Divider,{type:"vertical",style:{height:"100%"}})}),(0,j.jsx)(l.Col,{span:d,children:(0,j.jsxs)(l.Space,{direction:"vertical",size:u,children:[(0,j.jsx)(l.Typography.Text,{style:{color:"#212433"},children:"Active Farms"}),(0,j.jsx)(l.Typography.Title,{level:2,style:{color:"#F9575E"},children:m})]})}),i&&(0,j.jsx)(l.Col,{children:(0,j.jsx)(l.Divider,{type:"vertical",style:{height:"100%"}})}),(0,j.jsx)(l.Col,{span:d,children:(0,j.jsxs)(l.Space,{direction:h,size:0,align:"center",children:[(0,j.jsxs)(l.Typography.Title,{level:4,style:{color:"#212433"},children:["1 ",(0,j.jsx)(w,{mintAddress:S})]}),(0,j.jsx)(o.Z,{style:{color:"#212433"},name:p}),(0,j.jsx)(l.Typography.Title,{level:4,style:{color:"#F9575E"},children:n.util.numeric(s.price).format("0,0.[0000]$")})]})})]})})]})})};var k=s(58421);let E;const _=(0,f.forwardRef)(((e,t)=>{let{max:s,onValue:r=(()=>{}),onChange:n=(()=>{}),...a}=e;const[i,d]=(0,f.useState)(""),[c,u]=(0,f.useState)(null),h=(0,f.useRef)(t),p=(0,f.useCallback)((e=>{const t=e=>{E&&(clearTimeout(E),E=void 0),d(e),E=setTimeout((()=>d("")),500)};return/^\d*(\.\d*)?$/.test(e)?s&&parseFloat(e)>parseFloat(s.toString())?t("Not enough balance"):r(e):t("Invalid character")}),[s,r]);return null!==c&&setTimeout((()=>{var e;return null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.setSelectionRange(c,c)}),50),(0,j.jsx)(l.Tooltip,{title:(0,j.jsxs)(l.Space,{children:[(0,j.jsx)(o.Z,{name:"warning"}),i]}),visible:!!i,children:(0,j.jsx)(l.Input,{...a,onChange:e=>{n(e),u(e.target.selectionStart),p(e.target.value||"")},ref:h})})})),R=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(n.util.explorer(t),"_blank")}),O=e=>window.notify({type:"error",description:e.message}),P=e=>{const[t,s]=(0,f.useState)(void 0),{getDecimals:r}=(0,n.useMint)(),a=(0,f.useCallback)((async()=>{try{const t=await r(e);return s(t)}catch(t){return s(void 0)}}),[e,r]);return(0,f.useEffect)((()=>{a()}),[a]),t},z={Hour:BigInt(3600),Day:BigInt(86400),Month:BigInt(2592e3),Year:BigInt(31536e3)},F=e=>{let{mintAddress:t,onClose:s=(()=>{}),setVisibleInputTokenModal:r=(()=>{})}=e;const{sol:{senAddress:a,farming:i}}=p,[d,u]=(0,f.useState)(""),[h,m]=(0,f.useState)(""),[y,x]=(0,f.useState)("Hour"),[b,v]=(0,f.useState)(!1),C=P(a),{wallet:{address:A}}=(0,n.useWallet)(),S=!d||!h||!c.account.isAddress(t);return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Typography.Title,{level:4,children:"New farm"})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Card,{style:{borderRadius:8},bodyStyle:{padding:16},bordered:!1,children:(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:12,children:(0,j.jsxs)(l.Space,{direction:"vertical",children:[(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Input"}),(0,j.jsxs)(l.Space,{size:12,style:{cursor:"pointer"},onClick:()=>r(!0),children:[(0,j.jsx)(g,{mintAddress:t}),c.account.isAddress(t)?(0,j.jsx)(w,{mintAddress:t}):(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Select token type"}),(0,j.jsx)(o.Z,{name:"chevron-forward-outline",style:{color:"#7A7B85"}})]})]})}),(0,j.jsx)(l.Col,{span:12,children:(0,j.jsxs)(l.Space,{direction:"vertical",children:[(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Output"}),(0,j.jsxs)(l.Space,{size:12,style:{cursor:"pointer"},children:[(0,j.jsx)(g,{mintAddress:a}),(0,j.jsx)(w,{mintAddress:a})]})]})})]})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Row,{gutter:[0,0],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"Reward"})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(_,{size:"large",placeholder:"0",value:d,onValue:u,prefix:(0,j.jsx)(l.Typography.Text,{children:"SNTR"})})})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Row,{gutter:[0,0],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Typography.Text,{type:"secondary",className:"caption",children:["Number of ",y]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(_,{size:"large",placeholder:"0",value:h,onValue:m,suffix:(0,j.jsx)(l.Button,{type:"text",size:"small",icon:(0,j.jsx)(o.Z,{name:"time-outline"}),onClick:()=>{const e=Object.keys(z),t=(e.findIndex((e=>e===y))+1)%e.length;return x(e[t])},children:y})})})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{type:"primary",onClick:async()=>{if(!c.account.isAddress(t))return O({message:`Invalid mint address: ${t}`});v(!0);const{wallet:e}=window.sentre;if(!e||!y||!h||!C)return;const r=c.utils.decimalize(d,C),n=Number(null===z||void 0===z?void 0:z[y])*Number(h);try{const{txId:o}=await i.initializeFarm(r,BigInt(n),A,t,a,e);return s(),R("Create a new farm",o)}catch(o){return O({message:o.message})}finally{return v(!1)}},disabled:S,block:!0,loading:b,children:"Confirm"})})]})},M=e=>{let{accountAddress:t,onClick:s=(()=>{})}=e;const{accounts:{[t]:{mint:r}}}=(0,n.useAccount)(),a=(0,f.useMemo)((()=>t.substring(0,4)+" ... "+t.substring(t.length-4,t.length)),[t]);return(0,j.jsx)(l.Card,{onClick:()=>s(r),className:"account-card",bodyStyle:{padding:12,cursor:"pointer"},bordered:!1,children:(0,j.jsxs)(l.Row,{gutter:[8,8],wrap:!1,align:"middle",children:[(0,j.jsx)(l.Col,{flex:"auto",children:(0,j.jsxs)(l.Space,{direction:"vertical",size:0,children:[(0,j.jsxs)(l.Space,{children:[(0,j.jsx)(g,{mintAddress:r}),(0,j.jsx)(b,{mintAddress:r})]}),(0,j.jsxs)(l.Space,{children:[(0,j.jsxs)(l.Space,{size:4,children:[(0,j.jsx)(l.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Account Address:"}),(0,j.jsx)(l.Typography.Text,{children:a})]}),(0,j.jsx)(l.Button,{type:"text",size:"small",onClick:e=>{e.stopPropagation(),window.open(n.util.explorer(t))},icon:(0,j.jsx)(o.Z,{name:"open-outline"})})]})]})}),(0,j.jsx)(l.Col,{children:(0,j.jsx)(l.Button,{type:"text",icon:(0,j.jsx)(o.Z,{name:"arrow-forward-outline"})})})]})})},I=e=>{let{onChange:t}=e;const[s,r]=(0,f.useState)("");return(0,f.useEffect)((()=>t(s)),[s,t]),(0,j.jsx)(l.Card,{className:"account-card",bodyStyle:{padding:6},bordered:!1,children:(0,j.jsx)(l.Input,{placeholder:"Search",value:s,size:"small",bordered:!1,prefix:(0,j.jsx)(l.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:s?()=>r(""):()=>{},icon:(0,j.jsx)(o.Z,{name:s?"close-outline":"search-outline"})}),onChange:e=>r(e.target.value)})})},B=e=>{let{onChange:t,onHideInputTokenModal:s=(()=>{})}=e;const{searchedAccount:r,accountAddresses:a,onSearch:o}=(()=>{const[e,t]=(0,f.useState)(),{accounts:s}=(0,n.useAccount)(),{tokenProvider:r}=(0,n.useMint)(),a=(0,f.useMemo)((()=>Object.keys(s)),[s]),o=(0,f.useCallback)((async e=>{if(!e||e.length<3)return t(void 0);const n=(await r.find(e)).map((e=>{let{address:t}=e;return t}));let o=[];return a.forEach((e=>{var t;if(n.includes(null===(t=s[e])||void 0===t?void 0:t.mint))return o.push(e)})),t(o)}),[a,s,r]);return{searchedAccount:e,accountAddresses:a,onSearch:o}})(),i=e=>(s(!1),t(e));return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Typography.Title,{level:4,children:"Select token type"})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(I,{onChange:o})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Row,{gutter:[16,16],style:{height:300,overflow:"auto"},children:(r||a).map(((e,t)=>(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(k.ZP,{height:72,overflow:!0,children:(0,j.jsx)(M,{accountAddress:e,onClick:i})})},e+t)))})})]})},N=e=>{let{size:t="small"}=e;const[s,r]=(0,f.useState)(!1),[n,a]=(0,f.useState)(""),[i,d]=(0,f.useState)(!1);return(0,j.jsxs)(l.Row,{children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{style:{background:"transparent"},onClick:()=>r(!0),size:t,children:"New Farm"})}),(0,j.jsx)(l.Modal,{visible:s,onCancel:()=>r(!1),footer:!1,closeIcon:(0,j.jsx)(o.Z,{name:"close-outline"}),children:(0,j.jsx)(F,{mintAddress:n,onClose:()=>{r(!1),a("")},setVisibleInputTokenModal:d})}),(0,j.jsx)(l.Modal,{visible:i,onCancel:()=>d(!1),footer:!1,closeIcon:(0,j.jsx)(o.Z,{name:"close-outline"}),children:(0,j.jsx)(B,{onChange:e=>{a(e)},onHideInputTokenModal:d})})]})},Z=e=>{let{label:t="",tooltip:s,value:r="",mintAddress:n}=e;return(0,j.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,j.jsxs)(l.Space,{size:4,children:[(0,j.jsxs)(l.Space,{size:4,children:[n&&(0,j.jsx)(g,{mintAddress:n}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:t})]}),s&&(0,j.jsx)(l.Tooltip,{title:s,children:(0,j.jsx)(l.Button,{type:"text",shape:"circle",size:"small",icon:(0,j.jsx)(l.Typography.Text,{type:"secondary",children:(0,j.jsx)(o.Z,{name:"information-circle-outline"})})})})]}),(0,j.jsxs)(l.Space,{children:[(0,j.jsx)(l.Typography.Title,{level:5,children:r}),n&&(0,j.jsx)(w,{mintAddress:n})]})]})},{sol:{farming:D}}=p,L=e=>{const[t,s]=(0,f.useState)(""),{debts:{[t]:a}}=(0,r.useSelector)((e=>e)),{wallet:{address:o}}=(0,n.useWallet)(),l=(0,f.useCallback)((async()=>{if(!c.account.isAddress(e))return s("");const t=await D.deriveDebtAddress(o,e);return s(t)}),[e,o]);return(0,f.useEffect)((()=>{l()}),[l]),{address:t,data:a}};var H=s(21111),V=s.n(H);const W=e=>{const{accounts:t}=(0,n.useAccount)(),{wallet:{address:s}}=(0,n.useWallet)(),a=(0,r.useSelector)((t=>t.farms[e])),[o,l]=(0,f.useState)(),i=(0,f.useCallback)((async()=>{if(!(null===a||void 0===a?void 0:a.mint_stake))return l(void 0);const{splt:e}=window.sentre,r=await e.deriveAssociatedAddress(s,a.mint_stake),n=t[r];return V()(n,null===o||void 0===o?void 0:o.data)?void 0:l({address:r,data:n})}),[null===o||void 0===o?void 0:o.data,t,a.mint_stake,s]);return(0,f.useEffect)((()=>{i()}),[i]),o},U=(e,t)=>{if(null===e||0===Object.keys(e).length)return 0;if(null===t||0===Object.keys(t).length)return 0;if(!t.total_shares)return 0;const r=e.shares,n=t.compensation,a=(s.g.BigInt(Math.floor(Date.now()/1e3))-t.genesis_timestamp)/t.period,o=s.g.BigInt(10**18),l=(o*t.reward/t.total_shares*a+n)*r/o,i=c.utils.undecimalize(l-e.debt,9);return Number(i)},G="The treasury doesn't have enough balance for the claim.",Y="Invalid wallet address.",$="Invalid farm address.",J="Invalid debt address.",K="Cannot fetch data of debts";var X=s(19289),Q=s(42224),q=s(48744),ee=s.n(q),te=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const se={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof Q.PublicKey||e instanceof ee()||te.isBuffer(e)}},{sol:{farming:re,senAddress:ne}}=p,ae="farms",oe=(0,X.createAsyncThunk)("farms/getFarms",(async(e,t)=>{let{getState:s}=t;const{farms:r}=s();if(Object.keys(r).length)return r;const n=await re.connection.getProgramAccounts(re.farmingProgramId,{filters:[{dataSize:209},{memcmp:{bytes:ne,offset:97}}]});let a={};return n.forEach((e=>{let{pubkey:t,account:{data:s}}=e;const r=t.toBase58(),n=re.parseFarmData(s);a[r]=n})),a})),le=(0,X.createAsyncThunk)("farms/getFarm",(async(e,t)=>{let{address:s}=e,{getState:r}=t;if(!c.account.isAddress(s))throw new Error("Invalid farm address");const{farms:{[s]:n}}=r();if(n)return{[s]:n};return{[s]:await re.getFarmData(s)}})),ie=(0,X.createAsyncThunk)("farms/upsetFarm",(async e=>{let{address:t,data:s}=e;if(!c.account.isAddress(t))throw new Error("Invalid farm address");if(!s)throw new Error("Data is empty");return{[t]:s}})),de=(0,X.createAsyncThunk)("farms/deleteFarm",(async e=>{let{farmAddress:t}=e;if(!c.account.isAddress(t))throw new Error("Invalid address");return{farmAddress:t}})),ce=(0,X.createSlice)({name:ae,initialState:{},reducers:{},extraReducers:e=>{e.addCase(oe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(le.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ie.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(de.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.farmAddress]}))}}).reducer,{sol:{farming:ue}}=p,he="debts",pe=(0,X.createAsyncThunk)("debts/getDebts",(async e=>{let{owner:t}=e;if(!c.account.isAddress(t))throw new Error("Invalid owner/wallet address");const s=await ue.connection.getProgramAccounts(ue.farmingProgramId,{filters:[{dataSize:89},{memcmp:{bytes:t,offset:32}}]});let r={};return s.forEach((e=>{let{pubkey:t,account:{data:s}}=e;const n=t.toBase58(),a=ue.parseDebtData(s);return r[n]=a})),r})),fe=(0,X.createAsyncThunk)("debts/getDebt",(async(e,t)=>{let{address:s}=e,{getState:r}=t;const{debts:{[s]:n}}=r();if(n)return{[s]:n};return{[s]:await ue.getDebtData(s)}})),me=(0,X.createAsyncThunk)("debts/upsetDebt",(async e=>{let{address:t,data:s}=e;if(!c.account.isAddress(t))throw new Error("Invalid address");if(!s)throw new Error("Data is empty");return{[t]:s}})),ye=(0,X.createAsyncThunk)("debts/deleteDebt",(async e=>{let{address:t}=e;if(!c.account.isAddress(t))throw new Error("Invalid address");return{address:t}})),xe=(0,X.createSlice)({name:he,initialState:{},reducers:{},extraReducers:e=>{e.addCase(pe.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(fe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(me.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ye.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.address]}))}}).reducer,je="main",ge=(0,X.createAsyncThunk)("main/setSearch",(async(e,t)=>{let{search:s}=e,{getState:r}=t;return{search:s}})),be=(0,X.createSlice)({name:je,initialState:{search:""},reducers:{},extraReducers:e=>{e.addCase(ge.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,we=(0,X.configureStore)({middleware:e=>e(se),devTools:!1,reducer:{farms:ce,debts:xe,main:be}}),{sol:{farming:ve}}=p;class Ce{async checkSeedBalance(e){const{splt:t,wallet:s}=window.sentre;if(!s)throw new Error("Please connect wallet first!");const r=we.getState().farms[e],n=await s.getAddress();if(!c.account.isAddress(n))throw new Error(Y);const a=await ve.deriveDebtAddress(n,e);if(!c.account.isAddress(a))throw new Error(J);const o=we.getState().debts[a];if(!o)throw new Error(K);const l=U(o,r),{treasury_reward:i,treasury_stake:d,total_shares:u}=r;let{amount:h}=await t.getAccountData(i);i===d&&(h-=u);if(Number(c.utils.undecimalize(h,9))<l)throw new Error(G)}async validate(e){if(!c.account.isAddress(e))throw new Error($);return await this.checkSeedBalance(e)}}const{sol:{senAddress:Ae,farming:Se}}=p,Te=e=>{let{farmAddress:t,onClose:s}=e;const a=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),{wallet:{address:i}}=(0,n.useWallet)(),{data:d}=L(t),u=W(t),[h,p]=(0,f.useState)(),[m,y]=(0,f.useState)(!0),[x,g]=(0,f.useState)(!1),b=P(a.mint_stake),w=(0,f.useCallback)((async e=>(await p(e),e?await y(!1):await y(!0))),[]),v=(0,f.useMemo)((()=>{if(b)return c.utils.undecimalize(null===d||void 0===d?void 0:d.shares,b)}),[null===d||void 0===d?void 0:d.shares,b]);return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{align:"start",children:[(0,j.jsx)(o.Z,{name:"alert-circle-outline"}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"The pending reward will be automatically harvested when you unstake."})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Card,{bodyStyle:{padding:12},style:{boxShadow:"none",borderRadius:8},children:(0,j.jsxs)(l.Space,{style:{width:"100%"},direction:"vertical",children:[(0,j.jsxs)(l.Row,{children:[(0,j.jsx)(l.Col,{flex:"auto",children:(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})}),(0,j.jsx)(l.Col,{children:(0,j.jsxs)(l.Space,{size:6,children:[(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,j.jsx)(l.Typography.Text,{children:n.util.numeric(v).format("0,0.[00]")}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"LPT"})]})})]}),(0,j.jsx)(_,{placeholder:"0",value:h,onValue:w,bordered:!1,size:"large",style:{padding:0},suffix:(0,j.jsx)(l.Button,{type:"text",style:{marginRight:-7},onClick:()=>w(v),children:"MAX"}),max:v})]})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{type:"primary",icon:(0,j.jsx)(o.Z,{name:"remove-outline"}),onClick:async()=>{g(!0);try{const{splt:e,wallet:r}=window.sentre;if(!r)throw Error("Please connect wallet first");if(!h||!u||!b)return;const n=c.utils.decimalize(h,b),a=await e.deriveAssociatedAddress(i,Ae),o=new Ce;await o.validate(t);const{txId:l}=await Se.unstake(n,u.address,a,t,r);return s(!1),R("Unstaked",l)}catch(e){return O(e)}finally{g(!1)}},block:!0,disabled:m,loading:x,children:"Unstake"})})]})},{sol:{senAddress:ke,farming:Ee}}=p,_e=e=>{let{farmAddress:t,onClose:s}=e;const a=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),{wallet:{address:i}}=(0,n.useWallet)(),{accounts:d}=(0,n.useAccount)(),{data:u}=L(t),h=W(t),[p,m]=(0,f.useState)(),[y,x]=(0,f.useState)(!0),[g,b]=(0,f.useState)(!1),w=P(a.mint_stake),v=(0,f.useCallback)((async e=>(await m(e),e?await x(!1):await x(!0))),[]),C=(0,f.useMemo)((()=>{if(w)return c.utils.undecimalize(BigInt((null===h||void 0===h?void 0:h.data.amount)||0),w)}),[null===h||void 0===h?void 0:h.data.amount,w]);return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{align:"start",children:[(0,j.jsx)(o.Z,{name:"alert-circle-outline"}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"The pending reward will be automatically harvested when you stake more."})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Card,{bodyStyle:{padding:12},style:{boxShadow:"none",borderRadius:8},children:(0,j.jsxs)(l.Space,{style:{width:"100%"},direction:"vertical",children:[(0,j.jsxs)(l.Row,{children:[(0,j.jsx)(l.Col,{flex:"auto",children:(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})}),(0,j.jsx)(l.Col,{children:(0,j.jsxs)(l.Space,{size:6,children:[(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,j.jsx)(l.Typography.Text,{children:n.util.numeric(C).format("0,0.[00]")}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"LPT"})]})})]}),(0,j.jsx)(_,{placeholder:"0",value:p,onValue:v,bordered:!1,size:"large",style:{padding:0},suffix:(0,j.jsx)(l.Button,{type:"text",style:{marginRight:-15},onClick:()=>v(C),children:"MAX"}),max:C})]})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{type:"primary",icon:(0,j.jsx)(o.Z,{name:"add-outline"}),onClick:async()=>{b(!0);try{const{splt:e,wallet:r}=window.sentre;if(!r)throw Error("Please connect wallet first");if(!p||!h||!w)return;const n=await e.deriveAssociatedAddress(i,ke);void 0===(null===u||void 0===u?void 0:u.shares)&&await Ee.initializeAccounts(t,i,r),d[n]||await e.initializeAccount(ke,i,r);const a=new Ce;await a.validate(t);const{txId:o}=await Ee.stake(c.utils.decimalize(p,w),h.address,n,t,r);return s(!1),R("Staked",o)}catch(e){return O(e)}finally{b(!1)}},block:!0,disabled:y,loading:g,children:"Stake"})})]})},Re=e=>{let{title:t}=e;return(0,j.jsxs)(l.Space,{children:[(0,j.jsx)(o.Z,{style:{fontSize:18},name:"alert-circle-outline"}),(0,j.jsx)(l.Typography.Text,{type:"secondary",ellipsis:!0,children:t})]})};var Oe=s(51518),Pe=s.n(Oe);const ze=e=>{let{address:t,onCopy:s,copieAddress:r,description:n=!1,title:a}=e;return(0,j.jsxs)(l.Row,{gutter:[0,8],children:[(0,j.jsx)(l.Col,{xs:{span:24},sm:{span:10},md:{span:10},lg:{span:10},flex:"auto",children:(0,j.jsx)(Re,{title:a})}),(0,j.jsx)(l.Col,{xs:{span:22},sm:{span:14},md:{span:14},lg:{span:14},flex:"auto",children:c.account.isAddress(t)&&(0,j.jsx)(l.Typography.Text,{children:t})}),(0,j.jsx)(l.Col,{children:(0,j.jsx)(l.Tooltip,{title:"Copied",visible:t===r,children:(0,j.jsx)(Oe.CopyToClipboard,{text:t,onCopy:e=>s(e),children:(0,j.jsx)(l.Button,{type:"text",size:"small",style:{marginRight:-7},icon:(0,j.jsx)(o.Z,{name:"copy-outline"})})})})}),n?(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Typography.Paragraph,{type:"secondary",style:{fontSize:12},children:"Tips: You can use this address for searching the pool coresponding to the farm in Sen LP."})}):null]})},Fe=e=>{const[t,s]=(0,f.useState)(0),{farms:{[e]:n}}=(0,r.useSelector)((e=>e)),{treasury_stake:a,treasury_reward:o,mint_reward:l,total_shares:i}=n||{},d=P(l),{symbol:u}=y(l),h=(0,f.useCallback)((async()=>{if(void 0===d)return s(0);try{const{splt:e}=window.sentre;let{amount:t}=await e.getAccountData(o);o===a&&(t-=i);const r=Number(c.utils.undecimalize(t,d));s(r)}catch(e){s(0)}}),[d,i,o,a]);return(0,f.useEffect)((()=>{h()}),[h]),{budget:t,budgetSymbol:u}},Me=e=>{let{farmAddress:t}=e;const{tokenProvider:s}=(0,n.useMint)(),{pools:a}=(0,n.usePool)(),{budget:o,budgetSymbol:i}=Fe(t),d=(0,r.useSelector)((e=>e.farms)),[u,h]=(0,f.useState)(""),[p,m]=(0,f.useState)(""),{mint_stake:y,period:x,reward:g,mint_reward:b}=d[t]||{},w=P(y);(0,f.useEffect)((()=>{(async()=>{const{symbol:e}=await s.findByAddress(b)||{};m(e||"TOKEN")})()}),[b,s]);const v=Object.keys(a).find((e=>{const{mint_lpt:t}=a[e];return t===y})),C=async e=>{e&&(await h(e),await n.util.asyncWait(1500),await h(""))},A=(0,f.useMemo)((()=>w?c.utils.undecimalize(g,w):0),[w,g]),S=(0,f.useMemo)((()=>{let e=Number(x)/86400,t="days";return e>29&&(e/=30,t=e>1?"months":"month"),e<2&&(e*=24,t=e>1?"hours":"hour"),`${A} ${i} / ${Math.floor(e)} ${t}`}),[A,x,i]);return(0,j.jsxs)(l.Row,{gutter:[24,24],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(ze,{title:"Farming address:",address:t,onCopy:e=>C(e),copieAddress:u})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(ze,{title:v?"Pool address:":"Stake mint address:",address:v||y,onCopy:e=>C(e),copieAddress:u,description:!0})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{align:"baseline",children:[(0,j.jsx)(Re,{title:"Rewarding:"}),(0,j.jsx)(l.Typography.Text,{style:{wordBreak:"break-all"},children:S})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{align:"baseline",children:[(0,j.jsx)(Re,{title:"Budget:"}),(0,j.jsx)(l.Typography.Text,{style:{wordBreak:"break-all"},children:n.util.numeric(o).format("0,0.[00]")}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:p})]})})]})},{sol:{senAddress:Ie,farming:Be}}=p,Ne=e=>{let{farmAddress:t,onChange:s=(()=>{})}=e;const{accounts:a}=(0,n.useAccount)(),{wallet:{address:i}}=(0,n.useWallet)(),d=(0,r.useSelector)((e=>e.farms)),[u,h]=(0,f.useState)(""),[p,m]=(0,f.useState)("0"),[y,x]=(0,f.useState)(!1),{mint_reward:g}=(null===d||void 0===d?void 0:d[t])||{},b=P(g);(0,f.useEffect)((()=>{(async()=>{if(b)try{const{splt:e}=window.sentre,t=await e.deriveAssociatedAddress(i,g),{amount:s}=a[t]||{};m(s?c.utils.undecimalize(s,b):"0")}catch(e){m("0")}})()}),[i,a,g,b]);return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Card,{style:{boxShadow:"unset",borderRadius:8},bodyStyle:{padding:8},children:(0,j.jsxs)(l.Row,{gutter:[0,0],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Row,{gutter:[0,0],wrap:!1,style:{margin:"6px 12px 0px 12px",fontSize:12},children:[(0,j.jsx)(l.Col,{flex:"auto",children:(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})}),(0,j.jsx)(l.Col,{children:(0,j.jsxs)(l.Space,{size:6,children:[(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,j.jsx)(l.Typography.Text,{children:n.util.numeric(p).format("0,0.[00]")}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"SNTR"})]})})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(_,{placeholder:"0",value:u,onValue:h,suffix:(0,j.jsx)(l.Button,{type:"text",onClick:()=>h(p),size:"small",style:{marginRight:-7},children:"MAX"}),bordered:!1,max:p})})]})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{type:"primary",icon:(0,j.jsx)(o.Z,{name:"add-outline"}),onClick:async()=>{x(!0);const{wallet:e,splt:r}=window.sentre;if(!e)return;const n=await r.deriveAssociatedAddress(i,Ie),a=c.utils.decimalize(u,9);try{const{txId:r}=await Be.seed(a,t,n,e);return s(r),R("Seed",r)}catch(o){return O(o)}finally{x(!1)}},block:!0,disabled:!u,loading:y,children:"Seed"})})]})},{sol:{farming:Ze}}=p,De=e=>{let{farmAddress:t,onChange:s=(()=>{})}=e;const{wallet:{address:a}}=(0,n.useWallet)(),i=(0,r.useSelector)((e=>e.farms)),[d,u]=(0,f.useState)(""),[h,p]=(0,f.useState)("0"),[m,x]=(0,f.useState)(!1),{treasury_reward:g,mint_reward:b}=i[t]||{},w=P(b),{symbol:v}=y(b);(0,f.useEffect)((()=>{(async()=>{if(w)try{const{splt:e}=window.sentre,{amount:t}=await e.getAccountData(g);p(t?c.utils.undecimalize(t,w):"0")}catch(e){p("0")}})()}),[w,g]);return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Card,{style:{boxShadow:"unset",borderRadius:8},bodyStyle:{padding:8},children:(0,j.jsxs)(l.Row,{gutter:[0,0],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Row,{gutter:[0,0],wrap:!1,style:{margin:"6px 12px 0px 12px",fontSize:12},children:[(0,j.jsx)(l.Col,{flex:"auto",children:(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})}),(0,j.jsx)(l.Col,{children:(0,j.jsxs)(l.Space,{size:6,children:[(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,j.jsx)(l.Typography.Text,{children:n.util.numeric(h).format("0,0.[00]")}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:v})]})})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(_,{placeholder:"0",value:d,onValue:u,suffix:(0,j.jsx)(l.Button,{type:"text",onClick:()=>u(h),size:"small",style:{marginRight:-7},children:"MAX"}),bordered:!1,max:h})})]})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{type:"primary",icon:(0,j.jsx)(o.Z,{name:"remove-outline"}),onClick:async()=>{x(!0);const{wallet:e,splt:r}=window.sentre;if(!e||!w)return;const n=await r.deriveAssociatedAddress(a,b),o=c.utils.decimalize(d,w);try{const{txId:r}=await Ze.unseed(o,t,n,e);return s(r),R("Unseed",r)}catch(l){return O(l)}finally{x(!1)}},block:!0,disabled:!d,loading:m,children:"Unseed"})})]})};let Le,He;!function(e){e[e.POLICY_AGREEMENT=0]="POLICY_AGREEMENT",e[e.FARM_CREATING_CONFIRMATION=1]="FARM_CREATING_CONFIRMATION"}(Le||(Le={})),function(e){e[e.isActive=1]="isActive",e[e.isFreeze=2]="isFreeze"}(He||(He={}));const{sol:{farming:Ve}}=p,We=e=>{let{farmAddress:t,onChange:s=(()=>{})}=e;const n=(0,r.useSelector)((e=>e.farms)),[a,i]=(0,f.useState)(!1),{state:d}=(null===n||void 0===n?void 0:n[t])||{},c=d===He.isActive,u=c?{backgroundColor:"#40A9FF",color:"#fff"}:{},h=c?"snow-outline":"sunny-outline",p=c?"Freeze":"Thaw";return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{className:"caption",align:"start",children:[(0,j.jsx)(o.Z,{name:"information-circle-outline"}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:'Freezing a farm will prevent all actions, but "seed" and "unseed", until the farm has been thawed.'})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{type:"primary",style:{...u,border:"unset"},icon:(0,j.jsx)(o.Z,{name:h}),onClick:c?async()=>{const{wallet:e}=window.sentre;if(e){i(!0);try{const{txId:r}=await Ve.freeze(t,e);return s(r),R("Freeze the farm",r)}catch(r){return O(r)}finally{i(!1)}}}:async()=>{const{wallet:e}=window.sentre;if(e){i(!0);try{const{txId:r}=await Ve.thaw(t,e);return s(r),R("Thaw the farm",r)}catch(r){return O(r)}finally{i(!1)}}},block:!0,disabled:!d,loading:a,children:p})})]})},{sol:{farming:Ue}}=p,Ge=e=>{let{farmAddress:t,onChange:s=(()=>{})}=e;const n=(0,r.useSelector)((e=>e.farms)),[a,i]=(0,f.useState)(!1),{total_shares:d}=(null===n||void 0===n?void 0:n[t])||{},c=(0,r.useDispatch)();return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{className:"caption",children:[(0,j.jsx)(o.Z,{name:"information-circle-outline"}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"The farm can be closed only all farmers unstaked their tokens!"})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{type:"primary",icon:(0,j.jsx)(o.Z,{name:"trash-outline"}),onClick:async()=>{const{wallet:e}=window.sentre;if(e){i(!0);try{const{txId:r}=await Ue.closeFarm(t,e);return s(r),c(de({farmAddress:t})),R("Close the farm",r)}catch(r){return O(r)}finally{i(!1)}}},block:!0,disabled:!!d,loading:a,children:"Close Farm"})})]})},Ye=e=>{let{label:t="",title:s=""}=e;return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{flex:"auto",children:(0,j.jsx)(l.Typography.Text,{type:"secondary",children:t})}),(0,j.jsx)(l.Col,{children:(0,j.jsx)(l.Typography.Text,{children:s})})]})},$e=e=>{let{farmAddress:t}=e;const s=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),[a,i]=(0,f.useState)(!1),[d,u]=(0,f.useState)(!1),{budget:h,budgetSymbol:p}=Fe(t),{mint_stake:m,period:y,reward:x}=s||{},b=P(m),v=(0,f.useMemo)((()=>b?c.utils.undecimalize(x,b):0),[b,x]),C=(0,f.useMemo)((()=>{let e=Number(y)/86400,t="days";return e>29&&(e/=30,t=e>1?"months":"month"),e<2&&(e*=24,t=e>1?"hours":"hour"),`${v} ${p} / ${Math.floor(e)} ${t}`}),[v,y,p]);return(0,j.jsxs)(f.Fragment,{children:[(0,j.jsx)(l.Button,{onClick:()=>i(!0),children:"Manage"}),(0,j.jsx)(l.Modal,{visible:a,onCancel:()=>i(!1),closeIcon:(0,j.jsx)(o.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{style:{lineHeight:1},children:[(0,j.jsx)(o.Z,{name:"leaf"}),(0,j.jsx)(l.Typography.Title,{level:5,style:{margin:0},children:"Farm Management"})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Card,{style:{borderRadius:8},bodyStyle:{padding:16},bordered:!1,children:(0,j.jsxs)(l.Row,{gutter:[8,8],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Row,{gutter:[0,0],children:[(0,j.jsx)(l.Col,{flex:"auto",children:(0,j.jsxs)(l.Space,{size:12,style:{fontWeight:600},children:[(0,j.jsx)(g,{mintAddress:m,size:32}),(0,j.jsx)(w,{mintAddress:m})]})}),(0,j.jsx)(l.Col,{children:(0,j.jsxs)(l.Space,{size:2,children:[(0,j.jsx)(l.Typography.Text,{type:"secondary",style:{fontSize:12},children:n.util.shortenAddress(t)}),(0,j.jsx)(l.Tooltip,{visible:d,title:"Copied",children:(0,j.jsx)(Pe(),{text:t,children:(0,j.jsx)(l.Button,{type:"text",size:"small",onClick:async()=>{u(!0),await n.util.asyncWait(1500),u(!1)},icon:(0,j.jsx)(o.Z,{name:"copy-outline"})})})}),(0,j.jsx)(l.Button,{type:"text",size:"small",onClick:()=>window.open(n.util.explorer(t),"_blank"),icon:(0,j.jsx)(o.Z,{name:"open-outline"})})]})})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(Ye,{label:"Budget",title:`${h} ${p}`})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(Ye,{label:"Reward",title:C})})]})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Tabs,{children:[(0,j.jsx)(l.Tabs.TabPane,{tab:"Seed",children:(0,j.jsx)(Ne,{farmAddress:t,onChange:()=>i(!1)})},"seed"),(0,j.jsx)(l.Tabs.TabPane,{tab:"Unseed",children:(0,j.jsx)(De,{farmAddress:t,onChange:()=>i(!1)})},"unseed"),(0,j.jsx)(l.Tabs.TabPane,{tab:"Freeze/Thaw",children:(0,j.jsx)(We,{farmAddress:t,onChange:()=>i(!1)})},"freeze-thaw"),(0,j.jsx)(l.Tabs.TabPane,{tab:"Ownership",disabled:!0,children:"TBD"},"ownership"),(0,j.jsx)(l.Tabs.TabPane,{tab:"Close",children:(0,j.jsx)(Ge,{farmAddress:t,onChange:()=>i(!1)})},"close")]})})]})})]})},{sol:{senAddress:Je,farming:Ke}}=p,Xe=e=>{let{farmAddress:t,onClose:s}=e;const a=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),{data:i}=L(t),{wallet:{address:d}}=(0,n.useWallet)(),[u,h]=(0,f.useState)(!1),p=c.utils.undecimalize(null===i||void 0===i?void 0:i.shares,9);return(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{align:"start",children:[(0,j.jsx)(o.Z,{name:"alert-circle-outline"}),(0,j.jsx)(l.Typography.Text,{children:"When the reward budget is too low, you may be not able to unstake. Exiting the farm means you give up on rewards and merely get back your tokens."})]})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Card,{style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:12},children:(0,j.jsxs)(l.Row,{gutter:[0,0],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:"Amount"})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(_,{placeholder:"0",value:p,size:"small",bordered:!1})})]})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Button,{type:"primary",icon:(0,j.jsx)(o.Z,{name:"remove"}),onClick:async()=>{h(!0);const{splt:e,wallet:r}=window.sentre,{mint_stake:n}=a;if(!r||!c.account.isAddress(n))return;const o=await e.deriveAssociatedAddress(d,Je),l=await e.deriveAssociatedAddress(d,n);try{const{txId:e}=await Ke.rid(l,o,t,r);return s(!1),R("Exit",e)}catch(i){return O(i)}finally{h(!1)}},block:!0,disabled:!p,loading:u,children:"Exit"})})]})},Qe=e=>{const{farms:{[e]:t}}=(0,r.useSelector)((e=>e)),{getTotalValue:s}=v(),[n,a]=(0,f.useState)(0),o=(0,f.useCallback)((async()=>{if(!t)return a(0);const{total_shares:e,mint_stake:r}=t,n=await s({mintAddress:r,amount:e});return a(n)}),[t,s]);return(0,f.useEffect)((()=>{o()}),[o]),n},{sol:{senAddress:qe,farming:et}}=p,tt="The budget of reward is very low. Please unstake your tokens for safety.",st=e=>{let{farmAddress:t}=e;const s=(0,r.useSelector)((e=>{var s;return null===(s=e.farms)||void 0===s?void 0:s[t]})),{data:i}=L(t),d=(e=>{const t=(0,r.useSelector)((t=>t.farms[e])),{data:s}=L(e),[n,a]=(0,f.useState)(0),o=(0,f.useCallback)((()=>{if(!s||!t)return a(0);const e=U(s,t)||0;return a(e)}),[s,t]);return(0,f.useEffect)((()=>{o()}),[o]),n})(t),u=(e=>{const[t,s]=(0,f.useState)(),{farms:{[e]:a}}=(0,r.useSelector)((e=>e)),{pools:o}=(0,n.usePool)(),l=(0,f.useCallback)((async()=>{const e=null===a||void 0===a?void 0:a.mint_stake;if(!e)return s(void 0);const t=Object.keys(o).find((t=>{const{mint_lpt:s}=o[t];return s===e}));if(!c.account.isAddress(t))return s(void 0);const r=o[t];return s({address:t,data:r})}),[null===a||void 0===a?void 0:a.mint_stake,o]);return(0,f.useEffect)((()=>{l()}),[l]),t})(t),h=Qe(t),{apr:p}=(e=>{const t=(0,r.useSelector)((t=>t.farms[e])),s=Qe(e),{getTotalValue:n}=v(),[a,o]=(0,f.useState)(0),l=(0,f.useCallback)((async()=>{if(!s)return o(0);const{mint_reward:e,reward:r,period:a}=t,l=r*BigInt(86400)/a,i=await n({mintAddress:e,amount:l});return o(i/s)}),[t,n,s]);return(0,f.useEffect)((()=>{l()}),[l]),{roi:a,apr:365*a}})(t),{ui:{width:m}}=(0,n.useUI)(),{wallet:{address:y}}=(0,n.useWallet)(),x=(0,a.useHistory)(),[b,C]=(0,f.useState)(),[A,S]=(0,f.useState)(!1),[T,k]=(0,f.useState)(!1),[E,_]=(0,f.useState)(!1),[z,F]=(0,f.useState)(""),{owner:M,state:I,reward:B}=s||{},N=M===y,D=(0,r.useSelector)((e=>e.main.search)),H=I===He.isFreeze,V=P(null===s||void 0===s?void 0:s.mint_stake),W=P(null===s||void 0===s?void 0:s.mint_stake),{budget:G}=Fe(t),Y=(0,f.useMemo)((()=>0!==W&&W?Number(c.utils.undecimalize(B,W)):0),[W,B]),$=()=>C(b?void 0:t);(0,f.useEffect)((()=>{D&&D===t&&C(D)}),[G,t,Y,D]),(0,f.useEffect)((()=>F(Y?G<3*Y?tt:"":tt)),[G,Y]);const J=()=>(0,j.jsxs)(l.Row,{gutter:[8,8],children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsxs)(l.Space,{size:4,children:[(0,j.jsx)(l.Typography.Title,{style:{color:"#fff"},level:5,children:"APR"}),(0,j.jsx)(l.Typography.Text,{type:"secondary",children:"(Annual Percentage Rate)"})]})}),(0,j.jsx)(l.Col,{children:(0,j.jsx)(l.Typography.Text,{style:{color:"#E9E9EB"},children:"Refers to the simple interest accured from a particular inverstment over a 1 year period."})})]});let K="0";i&&V&&(K=c.utils.undecimalize(i.shares,V));const X=m>768?b?"chevron-down-outline":"chevron-forward-outline":b?"chevron-up-outline":"chevron-down-outline",Q=H?{opacity:.6}:{};return(0,j.jsxs)(l.Row,{style:{...Q},children:[(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Card,{bordered:!1,className:"farming-card",bodyStyle:{padding:16},style:{boxShadow:"unset",borderRadius:8,position:"relative",zIndex:1},hoverable:!0,onClick:$,children:(0,j.jsxs)(l.Row,{gutter:[16,16],justify:"center",align:"middle",children:[(0,j.jsx)(l.Col,{flex:"auto",children:(0,j.jsxs)(l.Row,{gutter:[16,16],align:"middle",children:[(0,j.jsx)(l.Col,{xs:24,md:5,children:(0,j.jsxs)(l.Space,{children:[(0,j.jsx)(g,{mintAddress:null===s||void 0===s?void 0:s.mint_stake,size:24}),(0,j.jsx)(w,{mintAddress:null===s||void 0===s?void 0:s.mint_stake}),(0,j.jsx)(l.Button,{type:"text",shape:"circle",size:"small",icon:(0,j.jsx)(l.Typography.Text,{type:"secondary",children:(0,j.jsx)(o.Z,{name:"information-circle-outline"})}),onClick:e=>{e.stopPropagation(),k(!0)}})]})}),(0,j.jsx)(l.Col,{xs:12,md:4,children:(0,j.jsx)(Z,{label:"APR",tooltip:(0,j.jsx)(J,{}),value:n.util.numeric(p).format("0,0.[00]a%")})}),(0,j.jsx)(l.Col,{xs:12,md:5,children:(0,j.jsx)(Z,{label:"Liquidity",value:n.util.numeric(h).format("0,0.00[00]a$")})}),(0,j.jsx)(l.Col,{xs:12,md:5,children:(0,j.jsx)(Z,{label:"Your staked LPT",value:n.util.numeric(K).format("0,0.00[00]")})}),(0,j.jsx)(l.Col,{xs:12,md:5,children:(0,j.jsx)(Z,{mintAddress:null===s||void 0===s?void 0:s.mint_reward,label:"Reward",value:n.util.numeric(d).format("0,0.00[00]")})})]})}),(0,j.jsx)(l.Col,{children:(0,j.jsxs)(l.Space,{children:[H&&(0,j.jsx)(o.Z,{name:"snow-outline"}),z&&(0,j.jsx)(l.Tooltip,{title:tt,children:(0,j.jsx)(o.Z,{name:"warning-outline",style:{color:"#f9575e"}})}),(0,j.jsx)(l.Button,{type:"text",icon:(0,j.jsx)(o.Z,{name:X}),disabled:!N&&H,onClick:$})]})})]})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(l.Collapse,{activeKey:b,className:"expand-farm-card",children:(0,j.jsx)(l.Collapse.Panel,{header:null,showArrow:!1,children:(0,j.jsxs)(l.Row,{gutter:[16,16],children:[(0,j.jsx)(l.Col,{xs:{order:2},md:{order:1},flex:"auto",children:u&&(0,j.jsxs)(l.Button,{type:"text",style:{padding:0,background:"transparent"},onClick:()=>{x.push(`/app/sen_lp/details?poolAddress=${u.address}`)},children:["To the pool",(0,j.jsx)(o.Z,{name:"chevron-forward-outline"})]})}),(0,j.jsx)(l.Col,{xs:{order:1},md:{order:2},children:(0,j.jsxs)(l.Space,{children:[N&&(0,j.jsx)($e,{farmAddress:t}),(0,j.jsx)(l.Button,{onClick:()=>S(!0),children:"Stake / Unstake"}),(0,j.jsx)(l.Button,{type:"primary",loading:E,onClick:async()=>{_(!0);const{splt:e,wallet:s}=window.sentre,r=await e.deriveAssociatedAddress(y,qe);try{if(!s)throw new Error("please connect wallet first!");const e=new Ce;await e.validate(t);const{txId:n}=await et.harvest(t,r,s);return R("Harvest",n)}catch(n){return O(n)}finally{_(!1)}},disabled:H||0===d,children:"Harvest"})]})})]})},t)})}),(0,j.jsx)(l.Modal,{onCancel:()=>S(!1),closeIcon:(0,j.jsx)(o.Z,{name:"close"}),footer:null,title:null,visible:A,children:(0,j.jsxs)(l.Tabs,{defaultActiveKey:H?"exit":"stake",children:[(0,j.jsx)(l.Tabs.TabPane,{tab:"Stake",disabled:H,children:(0,j.jsx)(_e,{farmAddress:t,onClose:S})},"stake"),(0,j.jsx)(l.Tabs.TabPane,{tab:"Unstake",disabled:H,children:(0,j.jsx)(Te,{farmAddress:t,onClose:S})},"unstake"),(0,j.jsx)(l.Tabs.TabPane,{tab:"Exit",children:(0,j.jsx)(Xe,{farmAddress:t,onClose:S})},"exit")]})}),(0,j.jsx)(l.Modal,{visible:T,onCancel:()=>k(!1),closeIcon:(0,j.jsx)(o.Z,{name:"close"}),title:"Farm Info",footer:null,destroyOnClose:!0,centered:!0,children:(0,j.jsx)(Me,{farmAddress:t})})]})},rt=e=>{const{tokenProvider:t}=(0,n.useMint)(),{sentreFarms:s}=A(),{pools:a}=(0,n.usePool)(),{search:o}=(0,r.useSelector)((e=>e.main)),[l,i]=(0,f.useState)({}),d=(0,f.useCallback)((e=>Object.keys(a).find((t=>a[t].mint_lpt===e))),[a]),c=(0,f.useCallback)((async()=>{const r={},n=(await t.find(o)).map((e=>e.address));Object.keys(e).filter((t=>{if(!o||!a||!e||o.length<3)return!0;const s=e[t],{mint_stake:r}=s,l=d(r);if(l){if(l===o)return!0;const{mint_a:e,mint_b:t}=a[l];if(n.includes(e)||n.includes(t))return!0}return t===o||(n.includes(r)||r===o)})).sort(((t,r)=>!s[t]&&s[r]?1:s[t]&&!s[r]?-1:e[t].total_shares<e[r].total_shares?1:-1)).map((t=>r[t]=e[t])),await i(r)}),[e,d,o,a,s,t]);return(0,f.useEffect)((()=>{c().then((()=>{setTimeout((()=>{(0,k.be)()}),500)}))}),[c]),l},nt=()=>{const{farms:e}=(0,r.useSelector)((e=>e)),t=rt(e),s=(0,f.useMemo)((()=>Object.keys(t)),[t]);return s.length?(0,j.jsx)(l.Row,{gutter:[16,16],children:s.map((e=>(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(k.ZP,{height:84,children:(0,j.jsx)(st,{farmAddress:e})})},e)))}):(0,j.jsx)(l.Empty,{})},{sol:{senOwners:at}}=p,ot=()=>{const{sentreFarms:e}=A(),t=rt(e),s=(0,f.useMemo)((()=>Object.keys(t)),[t]),r=(0,f.useMemo)((()=>s.filter((e=>at.includes(t[e].owner)))),[t,s]),n=(0,f.useMemo)((()=>r.sort(((e,s)=>t[e].total_shares<t[s].total_shares?1:-1))),[t,r]);return 0===n.length?(0,j.jsx)(l.Empty,{}):(0,j.jsx)(l.Row,{gutter:[16,16],children:n.map(((e,t)=>(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(k.ZP,{height:84,children:(0,j.jsx)(st,{farmAddress:e})})},e+t)))})},{sol:{farming:lt}}=p,it=()=>{const[e,t]=(0,f.useState)({}),{farms:s,debts:a}=(0,r.useSelector)((e=>e)),{wallet:{address:o}}=(0,n.useWallet)(),l=(0,f.useCallback)((async e=>{const t=await lt.deriveDebtAddress(o,e),s=a[t];return(null===s||void 0===s?void 0:s.shares)>BigInt(0)}),[a,o]),i=(0,f.useCallback)((async e=>{const s={};for(const t in e){await l(t)&&(s[t]=e[t])}t(s)}),[l]);return(0,f.useEffect)((()=>{i(s)}),[s,i]),{stakedFarms:e,filterStakedFarms:i,checkStakedFarm:l}},dt=()=>{const{stakedFarms:e}=it(),t=rt(e);return 0===Object.keys(t).length?(0,j.jsx)(l.Empty,{}):(0,j.jsx)(l.Row,{gutter:[16,16],children:Object.keys(t).map((e=>(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(k.ZP,{height:84,children:(0,j.jsx)(st,{farmAddress:e})})},e)))})},ct=()=>{const[e,t]=(0,f.useState)({}),s=(0,r.useSelector)((e=>e.farms)),{wallet:{address:a}}=(0,n.useWallet)(),o=(0,f.useCallback)((e=>s[e].owner===a),[s,a]),l=(0,f.useCallback)((e=>{const s={};for(const t in e)o(t)&&(s[t]=e[t]);t(s)}),[o]);return(0,f.useEffect)((()=>{l(s)}),[s,l]),{yourFarms:e,filterYourFarms:l,checkYourFarm:o}},ut=()=>{const{yourFarms:e}=ct(),t=rt(e);return Object.keys(t).length?(0,j.jsx)(l.Row,{gutter:[16,16],children:Object.keys(t).map((e=>(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(k.ZP,{height:84,children:(0,j.jsx)(st,{farmAddress:e})})},e)))}):(0,j.jsx)(l.Empty,{})};var ht;!function(e){e.YourFarms="YourFarms",e.SenFarm="SenFarm",e.StakedFarm="StakedFarm",e.AllFarms="AllFarms"}(ht||(ht={}));const pt=()=>{const e=(0,a.useLocation)().search,t=(0,r.useSelector)((e=>e.main.search)),{checkStakedFarm:s}=it(),{checkYourFarm:n}=ct(),{checkSentreFarm:o}=A(),i=(0,r.useDispatch)(),[d,u]=(0,f.useState)(ht.SenFarm),[h,p]=(0,f.useState)(!1);(0,f.useEffect)((()=>{(async()=>{if(c.account.isAddress(t)&&!h)try{if(n(t))return u(ht.YourFarms);if(o(t))return u(ht.SenFarm);const e=await s(t);u(e?ht.StakedFarm:ht.AllFarms)}catch(e){}finally{p(!0)}})()}),[o,s,n,t,h]),(0,f.useEffect)((()=>{const t=new URLSearchParams(e).get("search");if(t)return i(ge({search:t})),u(ht.AllFarms),()=>{i(ge({search:""}))}}),[i,e]);return(0,j.jsxs)(l.Tabs,{activeKey:d,onChange:e=>{u(e),setTimeout((()=>{(0,k.be)()}),500)},tabBarExtraContent:(0,j.jsx)(N,{}),children:[(0,j.jsx)(l.Tabs.TabPane,{tab:"Sentre Farms",children:(0,j.jsx)(ot,{})},ht.SenFarm),(0,j.jsx)(l.Tabs.TabPane,{tab:"Staked Farms",children:(0,j.jsx)(dt,{})},ht.StakedFarm),(0,j.jsx)(l.Tabs.TabPane,{tab:"Your Farms",children:(0,j.jsx)(ut,{})},ht.YourFarms),(0,j.jsx)(l.Tabs.TabPane,{tab:"All Farms",children:(0,j.jsx)(nt,{})},ht.AllFarms)]})},{sol:{farming:ft}}=p;let mt=0,yt=BigInt(0);const xt=e=>{let{children:t}=e;const s=(0,r.useDispatch)(),{wallet:{address:a,lamports:o}}=(0,n.useWallet)(),l=(0,f.useCallback)((async()=>{try{if(!c.account.isAddress(a))return;await s(pe({owner:a})).unwrap()}catch(e){await O(e)}}),[s,a]),i=(0,f.useCallback)((async()=>{if(!c.account.isAddress(a))return console.warn("Wallet is not connected");if(mt)return console.warn("Already watched");const e=[{dataSize:89},{memcmp:{bytes:a,offset:32}}];mt=ft.watch(((e,t)=>{if(e)return console.error(e);const{type:r,address:n,data:a}=t;return"debt"===r?s(me({address:n,data:a})):void 0}),e)}),[s,a]);return(0,f.useEffect)((()=>{yt&&o>yt&&s(pe({owner:a})),yt=o}),[s,a,o]),(0,f.useEffect)((()=>(l(),i(),()=>{(async()=>{try{await ft.unwatch(mt)}catch(e){}})(),mt=0})),[l,i]),t},{sol:{farming:jt,senAddress:gt}}=p;let bt=0;const wt=e=>{let{children:t,style:s={}}=e;const n=(0,r.useDispatch)(),[a,o]=(0,f.useState)(!1),i=(0,f.useCallback)((async()=>{try{o(!0),await n(oe())}catch(e){await O(e)}finally{o(!1)}}),[n]),d=(0,f.useCallback)((async()=>{if(bt)return console.warn("Already watched");const e=[{dataSize:209},{memcmp:{bytes:gt,offset:97}}];bt=jt.watch(((e,t)=>{if(e)return console.error(e);const{type:s,address:r,data:a}=t;return"farm"===s?n(ie({address:r,data:a})):void 0}),e)}),[n]);return(0,f.useEffect)((()=>(i(),d(),()=>{(async()=>{try{jt.unwatch(bt)}catch(e){}})(),bt=0})),[i,d]),(0,j.jsx)(l.Spin,{spinning:a,style:s,children:t})},vt=e=>{let{children:t,style:s}=e;return(0,j.jsx)(wt,{style:s,children:(0,j.jsx)(xt,{children:t})})},{route:{farmRoute:Ct}}=p,At=()=>{const{search:e,pathname:t}=(0,a.useLocation)(),{search:s}=(0,r.useSelector)((e=>e.main)),n=(0,r.useDispatch)(),i=(0,a.useHistory)();return(0,j.jsx)(vt,{children:(0,j.jsxs)(l.Row,{gutter:[24,24],style:{paddingBottom:12},justify:"center",children:[(0,j.jsx)(l.Col,{xs:24,lg:18,children:(0,j.jsx)(T,{})}),(0,j.jsx)(l.Col,{xs:24,lg:18,children:(0,j.jsxs)(l.Row,{gutter:[8,8],children:[(0,j.jsx)(l.Col,{xs:24,lg:8,children:(0,j.jsx)(l.Card,{bodyStyle:{padding:0},style:{borderRadius:8,background:"transparent",boxShadow:"unset"},children:(0,j.jsx)(l.Input,{placeholder:"Search by name, address",value:s,onChange:s=>(new URLSearchParams(e).get("search")&&i.push(t),n(ge({search:s.target.value}))),prefix:s?(0,j.jsx)(l.Button,{type:"text",style:{width:"auto",height:"auto",background:"transparent"},onClick:()=>(n(ge({search:""})),i.push(Ct)),icon:(0,j.jsx)(o.Z,{name:"close-outline"})}):(0,j.jsx)(o.Z,{name:"search-outline"}),bordered:!1,size:"large"})})}),(0,j.jsx)(l.Col,{span:24,children:(0,j.jsx)(pt,{})})]})})]})})};var St=s(45597);const{manifest:{appId:Tt}}=p,kt=()=>(0,j.jsx)(n.UIProvider,{appId:Tt,antd:!0,children:(0,j.jsx)(n.PoolProvider,{children:(0,j.jsx)(n.MintProvider,{children:(0,j.jsx)(n.AccountProvider,{children:(0,j.jsx)(n.WalletProvider,{children:(0,j.jsx)(r.Provider,{store:we,children:(0,j.jsx)(At,{})})})})})})})},58421:(e,t,s)=>{"use strict";t.be=void 0;var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=s(92950),a=u(n),o=u(s(43091)),l=s(2471),i=u(s(31161)),d=u(s(23698)),c=u(s(51941));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=0,y=0,x=0,j=0,g="data-lazyload-listened",b=[],w=[],v=!1;try{var C=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,C)}catch(P){}var A=!!v&&{capture:!1,passive:!0},S=function(e){var t=e.ref;if(t instanceof HTMLElement){var s=(0,i.default)(t),r=e.props.overflow&&s!==t.ownerDocument&&s!==document&&s!==document.documentElement?function(e,t){var s=e.ref,r=void 0,n=void 0,a=void 0,o=void 0;try{var l=t.getBoundingClientRect();r=l.top,n=l.left,a=l.height,o=l.width}catch(P){r=m,n=y,a=j,o=x}var i=window.innerHeight||document.documentElement.clientHeight,d=window.innerWidth||document.documentElement.clientWidth,c=Math.max(r,0),u=Math.max(n,0),h=Math.min(i,r+a)-c,p=Math.min(d,n+o)-u,f=void 0,g=void 0,b=void 0,w=void 0;try{var v=s.getBoundingClientRect();f=v.top,g=v.left,b=v.height,w=v.width}catch(P){f=m,g=y,b=j,w=x}var C=f-c,A=g-u,S=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return C-S[0]<=h&&C+b+S[1]>=0&&A-S[0]<=p&&A+w+S[1]>=0}(e,s):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var s=void 0,r=void 0;try{var n=t.getBoundingClientRect();s=n.top,r=n.height}catch(P){s=m,r=j}var a=window.innerHeight||document.documentElement.clientHeight,o=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return s-o[0]<=a&&s+r+o[1]>=0}(e);r?e.visible||(e.props.once&&w.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},T=function(){w.forEach((function(e){var t=b.indexOf(e);-1!==t&&b.splice(t,1)})),w=[]},k=function(){for(var e=0;e<b.length;++e){var t=b[e];S(t)}T()},E=void 0,_=null,R=function(e){function t(e){h(this,t);var s=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.visible=!1,s.setRef=s.setRef.bind(s),s}return f(t,e),r(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"===typeof t&&(e=e.document.querySelector(t));var s=void 0!==this.props.debounce&&"throttle"===E||"debounce"===E&&void 0===this.props.debounce;if(s&&((0,l.off)(e,"scroll",_,A),(0,l.off)(window,"resize",_,A),_=null),_||(void 0!==this.props.debounce?(_=(0,d.default)(k,"number"===typeof this.props.debounce?this.props.debounce:300),E="debounce"):void 0!==this.props.throttle?(_=(0,c.default)(k,"number"===typeof this.props.throttle?this.props.throttle:300),E="throttle"):_=k),this.props.overflow){var r=(0,i.default)(this.ref);if(r&&"function"===typeof r.getAttribute){var n=+r.getAttribute(g)+1;1===n&&r.addEventListener("scroll",_,A),r.setAttribute(g,n)}}else if(0===b.length||s){var a=this.props,o=a.scroll,u=a.resize;o&&(0,l.on)(e,"scroll",_,A),u&&(0,l.on)(window,"resize",_,A)}b.push(this),S(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,i.default)(this.ref);if(e&&"function"===typeof e.getAttribute){var t=+e.getAttribute(g)-1;0===t?(e.removeEventListener("scroll",_,A),e.removeAttribute(g)):e.setAttribute(g,t)}}var s=b.indexOf(this);-1!==s&&b.splice(s,1),0===b.length&&"undefined"!==typeof window&&((0,l.off)(window,"resize",_,A),(0,l.off)(window,"scroll",_,A))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,s=e.children,r=e.placeholder,n=e.className,o=e.classNamePrefix,l=e.style;return a.default.createElement("div",{className:o+"-wrapper "+n,ref:this.setRef,style:l},this.visible?s:r||a.default.createElement("div",{style:{height:t},className:o+"-placeholder"}))}}]),t}(n.Component);R.propTypes={className:o.default.string,classNamePrefix:o.default.string,once:o.default.bool,height:o.default.oneOfType([o.default.number,o.default.string]),offset:o.default.oneOfType([o.default.number,o.default.arrayOf(o.default.number)]),overflow:o.default.bool,resize:o.default.bool,scroll:o.default.bool,children:o.default.node,throttle:o.default.oneOfType([o.default.number,o.default.bool]),debounce:o.default.oneOfType([o.default.number,o.default.bool]),placeholder:o.default.node,scrollContainer:o.default.oneOfType([o.default.string,o.default.object]),unmountIfInvisible:o.default.bool,style:o.default.object},R.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};var O=function(e){return e.displayName||e.name||"Component"};t.ZP=R,t.be=k},23698:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var r=void 0,n=void 0,a=void 0,o=void 0,l=void 0,i=function i(){var d=+new Date-o;d<t&&d>=0?r=setTimeout(i,t-d):(r=null,s||(l=e.apply(a,n),r||(a=null,n=null)))};return function(){a=this,n=arguments,o=+new Date;var d=s&&!r;return r||(r=setTimeout(i,t)),d&&(l=e.apply(a,n),a=null,n=null),l}}},2471:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,s,r){r=r||!1,e.addEventListener?e.addEventListener(t,s,r):e.attachEvent&&e.attachEvent("on"+t,(function(t){s.call(e,t||window.event)}))},t.off=function(e,t,s,r){r=r||!1,e.removeEventListener?e.removeEventListener(t,s,r):e.detachEvent&&e.detachEvent("on"+t,s)}},31161:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,s=/(scroll|auto|overlay)/,r=e;r;){if(!r.parentNode)return e.ownerDocument||document.documentElement;var n=window.getComputedStyle(r),a=n.position,o=n.overflow,l=n["overflow-x"],i=n["overflow-y"];if("static"===a&&t)r=r.parentNode;else{if(s.test(o)&&s.test(l)&&s.test(i))return r;r=r.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},51941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var r,n;return t||(t=250),function(){var a=s||this,o=+new Date,l=arguments;r&&o<r+t?(clearTimeout(n),n=setTimeout((function(){r=o,e.apply(a,l)}),t)):(r=o,e.apply(a,l))}}},25882:e=>{"use strict";var t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(n){return!1}}()?Object.assign:function(e,a){for(var o,l,i=n(e),d=1;d<arguments.length;d++){for(var c in o=Object(arguments[d]))s.call(o,c)&&(i[c]=o[c]);if(t){l=t(o);for(var u=0;u<l.length;u++)r.call(o,l[u])&&(i[l[u]]=o[l[u]])}}return i}},62175:(e,t,s)=>{"use strict";s(25882);var r=s(92950),n=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;n=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var r,a={},d=null,c=null;for(r in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,r)&&!i.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:n,type:e,key:d,ref:c,props:a,_owner:o.current}}t.jsx=d,t.jsxs=d},45263:(e,t,s)=>{"use strict";e.exports=s(62175)},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.dd3222bdab290f263138.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.b9f205289419b34b5909.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.18a27df4f6df24a4cda6.png"},85468:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.c1dd88a37d9553466530.png"},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx.6e6adc8e.chunk.js.map