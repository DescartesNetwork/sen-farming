(globalThis.webpackChunksenhub=globalThis.webpackChunksenhub||[]).push([[974],{1671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>zt,Widget:()=>_t,widgetConfig:()=>It});var r=s(55754),n=s(49142),a=s(78589),o=s(92950);const i={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var l=s(45263);const d=(0,o.forwardRef)((({name:e,className:t,...s},r)=>{const n=t?"anticon "+t:"anticon";return(0,l.jsx)("span",{className:n,...s,children:i[e]?(0,l.jsx)("ion-icon",{ref:r,src:i[e]}):(0,l.jsx)("ion-icon",{ref:r,name:e})})}));var c=s(63805);const u={appId:"senhub",url:"https://descartesnetwork.github.io/senhub/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},h={development:{...u},staging:{...u},production:{...u}};var p=s(95418);const f={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",farmingAddress:"CpEsjrLhBkcuApn5uEE2tZCwxyCQKmT6S4YgT9zuLW2J",get farming(){return new p.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwner:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",farmingAddress:"CpEsjrLhBkcuApn5uEE2tZCwxyCQKmT6S4YgT9zuLW2J",get farming(){return new p.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwner:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",senAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",farmingAddress:"DTvdh6Q13SfYxMoWyibBUmQAUqd2pDPSpjdku5a9NLSF",get farming(){return new p.Farming(this.farmingAddress,this.spltAddress,this.splataAddress,this.node)},senOwner:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG"]}},x={manifest:h[c.OB],sol:f[c.ef]};var m=s(16200),y=s.n(m);const j={ttl:3e4},g={limit:{calls:10,time:1e3},cache:j};class w{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class v{static set(e,t,s=j){this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}v.mapCache=new Map;class b{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new C(e);return this.mapInstance.set(t,s),s}static async load(e,t,s={}){"object"===typeof e&&(e=JSON.stringify(e));let r=b.getSingleFlight(s);b.mapInstance.set(e,r);const n=new w(e);return r.load(n,t)}}b.mapInstance=new Map;class C{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(g,e)}async load(e,t){const s=v.get(e.key);if(s)return Promise.resolve(s);let r=!1,n=this.mapRequestCalling.get(e.key);return n||(n=e,r=!0,this.mapRequestCalling.set(n.key,n)),new Promise(((e,s)=>{if(!n)return s("Not found request!");n.add(e,s),r&&this.fetch(n,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{v.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const S=(e,t=4,s="...")=>e.substring(0,t)+s+e.substring(e.length-t,e.length),A=e=>p.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${c.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${c.ef}`,T=e=>e?y()(e):y()("0"),k=async(e="")=>b.load("fetchCGK"+e,(()=>p.utils.parseCGK(e))),R={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},E=e=>{const[t,s]=(0,o.useState)(R),{tokenProvider:r}=(0,n.useMint)(),a=(0,o.useCallback)((async()=>{try{var t;const n=await r.findByAddress(e),a=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId,o=await k(a);return s(o)}catch(n){return s(R)}}),[e,r]);return(0,o.useEffect)((()=>{a()}),[a]),t},P=e=>{const{tokenProvider:t}=(0,n.useMint)(),{pools:s}=(0,n.usePool)(),[r,a]=(0,o.useState)([]),i=(0,o.useCallback)((async()=>{const r=await t.findByAddress(e);if(r)return a([r]);const n=Object.values(s).find((({mint_lpt:t})=>t===e));if(!n)return a([void 0]);const{mint_a:o,mint_b:i}=n,l=await t.findByAddress(o),d=await t.findByAddress(i);return a([l,d])}),[e,s,t]);return(0,o.useEffect)((()=>{i()}),[i]),r},z=({mintAddress:e,size:t=24,icon:s=(0,l.jsx)(d,{name:"diamond-outline"}),isReserve:r=!1})=>{const n=P(e),i=(0,o.useMemo)((()=>{const e=JSON.parse(JSON.stringify(n));return r?e.reverse():e}),[r,n]);return(0,l.jsx)(a.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},children:i.map(((e,r)=>(0,l.jsx)(a.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:t,style:{backgroundColor:"#2D3355",border:"none"},children:s},(null===e||void 0===e?void 0:e.address)||r)))})},I=({mintAddress:e,separator:t=" \u2022 ",isReverse:s=!1})=>{const r=P(e),n=(0,o.useMemo)((()=>{const n=r.map((t=>{const s=`${null===e||void 0===e?void 0:e.substr(0,3)}...`;return t?t.symbol:s}));return s&&n.reverse(),n.join(t)}),[s,e,t,r]);return(0,l.jsx)("span",{children:n})},{sol:{senAddress:_}}=x,O=()=>{const{ui:{width:e}}=(0,n.useUI)(),t=(0,r.useSelector)((e=>e.farms)),s=E(_),i=e>768,c=i?void 0:24,u=i?32:16,h=i?8:4,p=i?"vertical":"horizontal",f=i?"pause-outline":"reorder-two-outline",x=(0,o.useMemo)((()=>{let e=0;for(const s in t)t[s].total_shares&&e++;return e}),[t]);return(0,l.jsx)(a.Card,{bordered:!1,className:(i?"":"banner-farming-mobile ")+"banner-farming",children:(0,l.jsxs)(a.Row,{gutter:[12,u],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Typography.Title,{level:4,style:{color:"#212433"},children:"Sen Farming"})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{gutter:[12,12],children:[(0,l.jsx)(a.Col,{span:c,children:(0,l.jsxs)(a.Space,{direction:"vertical",size:h,children:[(0,l.jsx)(a.Typography.Text,{style:{color:"#212433"},children:"Positive Farms"}),(0,l.jsx)(a.Typography.Title,{level:2,style:{color:"#F9575E"},children:x})]})}),i&&(0,l.jsx)(a.Col,{children:(0,l.jsx)(a.Divider,{type:"vertical",style:{height:"100%"}})}),(0,l.jsx)(a.Col,{span:c,children:(0,l.jsxs)(a.Space,{direction:p,size:0,align:"center",children:[(0,l.jsxs)(a.Typography.Title,{level:4,style:{color:"#212433"},children:["1 ",(0,l.jsx)(I,{mintAddress:_})]}),(0,l.jsx)(d,{style:{color:"#212433"},name:f}),(0,l.jsxs)(a.Typography.Title,{level:4,style:{color:"#F9575E"},children:["$",T(s.price).format("0,0.[00]")]})]})})]})})]})})};var B=s(45055);const M=({title:e="",description:t,checked:s=!1,onChange:r=(()=>{})})=>(0,l.jsxs)(a.Space,{direction:"vertical",children:[(0,l.jsx)(a.Checkbox,{checked:s,onChange:r,children:(0,l.jsx)(a.Typography.Title,{level:5,children:e})}),(0,l.jsx)(a.Typography.Text,{children:t})]}),N=()=>(0,l.jsxs)(a.Space,{direction:"vertical",size:6,children:[(0,l.jsx)(a.Typography.Text,{children:"The Sentre team will try to respond within a week:"}),(0,l.jsxs)(a.Space,{direction:"vertical",size:6,className:"list-type-items",children:[(0,l.jsx)(a.Typography.Text,{children:"Community Farm qualifiers will be asked to provide the address of the wallet which you\u2019ll use for bidding SEN in the auction."}),(0,l.jsx)(a.Typography.Text,{children:"Core Farm/Pool qualifiers will receive directions separately."})]})]}),D=({setFarmCreatingStep:e=(()=>{})})=>{const[t,s]=(0,o.useState)(!1),[r,n]=(0,o.useState)(!1),[i,d]=(0,o.useState)(!1),c=!t||!r||!i;return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Typography.Title,{level:4,children:"New farm"})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{gutter:[24,24],justify:"center",children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(M,{title:"Step1: Submit application",description:(0,l.jsx)(a.Typography.Text,{children:"Project can submit an application to sponsor a yield farm and pool on Sentre via Application Form"}),checked:t,onChange:e=>s(e.target.checked)})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(M,{title:"Step2: Await whitelisting",description:(0,l.jsx)(N,{}),checked:r,onChange:e=>n(e.target.checked)})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(M,{title:"Step3: During the auction",description:"During the auction period, if you connect your project\u2019s whitelisted wallet to the Auction page, you\u2019ll see a \u201cPlace Bid\u201d button during when is live. You can then commit SEN to bid during the auction, completing against other project for one of the available farms.",checked:i,onChange:e=>d(e.target.checked)})}),(0,l.jsx)(a.Col,{children:(0,l.jsx)(a.Button,{type:"primary",onClick:()=>e("FARM_CREATING_CONFIRMATION"),disabled:c,children:"Next"})})]})})]})};let L;const F=(0,o.forwardRef)((({max:e,onValue:t=(()=>{}),onChange:s=(()=>{}),onBlur:r=(()=>{}),...n},i)=>{var c;const[u,h]=(0,o.useState)(""),[p,f]=(0,o.useState)(null),x=(0,o.useRef)(i),m=(0,o.useCallback)((s=>{const r=e=>{L&&(clearTimeout(L),L=void 0),h(e),L=setTimeout((()=>h("")),500)};return/^\d*(\.\d*)?$/.test(s)?e&&parseFloat(s)>parseFloat(e.toString())?r("Not enough balance"):t(s):r("Invalid character")}),[e,t]);return null===x||void 0===x||null===(c=x.current)||void 0===c||c.setSelectionRange(p,p),(0,l.jsx)(a.Tooltip,{title:(0,l.jsxs)(a.Space,{children:[(0,l.jsx)(d,{name:"warning"}),u]}),visible:!!u,children:(0,l.jsx)(a.Input,{...n,onBlur:e=>{r(e);const t=Number(e.target.value);e.target.value&&m(t?t.toString():"")},onChange:e=>{s(e),f(e.target.selectionStart),m(e.target.value||"")},ref:x})})})),W=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(A(t),"_blank")}),V=e=>window.notify({type:"error",description:e.message}),U=({mintAddress:e,onClose:t=(()=>{}),setVisibleInputTokenModal:s=(()=>{})})=>{const{sol:{senAddress:r,farming:i}}=x,[d,c]=(0,o.useState)(""),[u,h]=(0,o.useState)(""),[f,m]=(0,o.useState)(!1),{wallet:{address:y}}=(0,n.useWallet)(),j=!d||!u||!p.account.isAddress(e);return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Card,{bodyStyle:{padding:16},bordered:!1,children:(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsxs)(a.Col,{span:12,children:[(0,l.jsx)(a.Typography.Title,{type:"secondary",level:5,children:"Input token type"}),(0,l.jsxs)(a.Space,{onClick:()=>s(!0),children:[(0,l.jsx)(z,{mintAddress:e}),(0,l.jsx)(I,{mintAddress:e})]})]}),(0,l.jsxs)(a.Col,{span:12,children:[(0,l.jsx)(a.Typography.Title,{type:"secondary",level:5,children:"Output token type"}),(0,l.jsxs)(a.Space,{children:[(0,l.jsx)(z,{mintAddress:r}),(0,l.jsx)(I,{mintAddress:r})]})]})]})})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{gutter:[0,0],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Typography.Text,{type:"secondary",style:{marginLeft:12,fontSize:12},children:"Reward"})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(F,{size:"large",placeholder:"0",value:d,onValue:c,prefix:(0,l.jsx)(a.Typography.Text,{children:"SNTR"})})})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{gutter:[0,0],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Typography.Text,{style:{marginLeft:12,fontSize:12},children:"Number of days"})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(F,{size:"large",placeholder:"0",value:u,onValue:h})})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Button,{type:"primary",onClick:async()=>{if(!p.account.isAddress(e))return V({message:`Invalid mint address: ${e}`});m(!0);const{wallet:s}=window.sentre;if(!s)return;const n=p.utils.decimalize(d,9),a=BigInt(86400*Number(u));try{const{txId:o}=await i.initializeFarm(n,a,y,e,r,s);return t(),W("Create a new farm",o)}catch(o){return V({message:o.message})}finally{return m(!1)}},disabled:j,block:!0,loading:f,children:"Confirm"})})]})};var q=s(44891);const Q=({accountAddress:e,onClick:t=(()=>{})})=>{const{accounts:{[e]:{mint:s}}}=(0,n.useAccount)(),r=(0,o.useMemo)((()=>e.substring(0,4)+" ... "+e.substring(e.length-4,e.length)),[e]);return(0,l.jsx)(a.Card,{onClick:()=>t(s),style:{boxShadow:"unset",borderRadius:8,background:"#fff"},bodyStyle:{padding:12},bordered:!1,children:(0,l.jsxs)(a.Row,{gutter:[8,8],wrap:!1,align:"middle",children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsxs)(a.Space,{direction:"vertical",size:0,children:[(0,l.jsx)(z,{mintAddress:s}),(0,l.jsxs)(a.Space,{children:[(0,l.jsxs)(a.Space,{size:4,children:[(0,l.jsx)(a.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Account Address:"}),(0,l.jsx)(a.Typography.Text,{children:r})]}),(0,l.jsx)(a.Button,{type:"text",size:"small",onClick:t=>{var s;t.stopPropagation(),s=A(e),window.open(s,"_blank")},icon:(0,l.jsx)(d,{name:"open-outline"})})]})]})}),(0,l.jsx)(a.Col,{children:(0,l.jsx)(a.Button,{type:"text",icon:(0,l.jsx)(d,{name:"arrow-forward-outline"})})})]})})},H=({onChange:e})=>{const[t,s]=(0,o.useState)("");return(0,o.useEffect)((()=>{if(!t)return;return e([t])}),[t,e]),(0,l.jsx)(a.Card,{style:{boxShadow:"unset",borderRadius:8,background:"#fff"},bodyStyle:{padding:6},bordered:!1,children:(0,l.jsx)(a.Input,{placeholder:"Search",value:t,size:"small",bordered:!1,prefix:(0,l.jsx)(a.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:t?()=>s(""):()=>{},icon:(0,l.jsx)(d,{name:t?"close-outline":"search-outline"})}),onChange:e=>s(e.target.value)})})},G=({onChange:e,onHideInputTokenModal:t=(()=>{})})=>{const{searchedResult:s,accountAddresses:r,onSearch:i}=(()=>{const[e,t]=(0,o.useState)(),{accounts:s}=(0,n.useAccount)(),r=(0,o.useMemo)((()=>Object.keys(s)),[s]),a=(0,o.useCallback)((e=>{if(!e)return t(void 0);let n=r.filter((t=>{const{mint:r}=s[t];return e.includes(r)}));return t(n)}),[r,s]);return{searchedResult:e,accountAddresses:r,onSearch:a}})(),d=s=>(t(!1),e(s));return(0,l.jsxs)(a.Row,{gutter:[16,16],style:{height:400,overflow:"auto"},children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Typography.Title,{level:4,children:"Select token type"})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(H,{onChange:i})}),(s||r).map(((e,t)=>(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(q.ZP,{height:84,overflow:!0,children:(0,l.jsx)(Q,{accountAddress:e,onClick:d})})},e+t)))]})},J=({size:e="small"})=>{const[t,s]=(0,o.useState)(!1),[r,n]=(0,o.useState)("POLICY_AGREEMENT"),[i,c]=(0,o.useState)(""),[u,h]=(0,o.useState)(!1);return(0,l.jsxs)(a.Row,{children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Button,{onClick:()=>s(!0),size:e,children:"New farm"})}),(0,l.jsxs)(a.Modal,{visible:t,onCancel:()=>s(!1),footer:!1,closeIcon:(0,l.jsx)(d,{name:"close-outline"}),children:["POLICY_AGREEMENT"===r&&(0,l.jsx)(D,{setFarmCreatingStep:n}),"FARM_CREATING_CONFIRMATION"===r&&(0,l.jsx)(U,{mintAddress:i,onClose:()=>{s(!1),n("POLICY_AGREEMENT"),c("")},setVisibleInputTokenModal:h})]}),(0,l.jsx)(a.Modal,{visible:u,onCancel:()=>h(!1),footer:!1,closeIcon:(0,l.jsx)(d,{name:"close-outline"}),children:(0,l.jsx)(G,{onChange:e=>{c(e)},onHideInputTokenModal:h})})]})},Z=({label:e="",tooltip:t,value:s="",mintAddress:r})=>(0,l.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,l.jsxs)(a.Space,{size:4,children:[(0,l.jsxs)(a.Space,{size:4,children:[r&&(0,l.jsx)(z,{mintAddress:r}),(0,l.jsx)(a.Typography.Text,{type:"secondary",children:e})]}),t&&(0,l.jsx)(a.Tooltip,{title:t,children:(0,l.jsx)(a.Button,{type:"text",shape:"circle",size:"small",icon:(0,l.jsx)(d,{name:"alert-circle-outline"})})})]}),(0,l.jsxs)(a.Space,{children:[(0,l.jsx)(a.Typography.Title,{level:5,children:s}),r&&(0,l.jsx)(I,{mintAddress:r})]})]}),{sol:{farming:$}}=x,Y=e=>{const{wallet:t}=(0,n.useWallet)(),[s,a]=(0,o.useState)(""),i=(0,r.useSelector)((e=>e.debts[s])),l=(0,o.useCallback)((async()=>{if(!p.account.isAddress(e))return;const s=await $.deriveDebtAddress(t.address,e);a(s)}),[e,t.address]);return(0,o.useEffect)((()=>{l()}),[l]),{address:s,data:i}};var K=s(21111),X=s.n(K);const ee=e=>{const{accounts:t}=(0,n.useAccount)(),{wallet:{address:s}}=(0,n.useWallet)(),a=(0,r.useSelector)((t=>t.farms[e])),[i,l]=(0,o.useState)(),d=(0,o.useCallback)((async()=>{if(!(null===a||void 0===a?void 0:a.mint_stake))return l(void 0);const{splt:e}=window.sentre;let r=await e.deriveAssociatedAddress(s,a.mint_stake);const n=t[r];return X()(n,null===i||void 0===i?void 0:i.data)?void 0:l({address:r,data:n})}),[null===i||void 0===i?void 0:i.data,t,a.mint_stake,s]);return(0,o.useEffect)((()=>{d()}),[d]),i},te=(e,t)=>{if(null===e||0===Object.keys(e).length)return 0;if(null===t||0===Object.keys(t).length)return 0;if(!t.total_shares)return 0;const r=e.shares,n=t.compensation,a=(s.g.BigInt(Math.floor(Date.now()/1e3))-t.genesis_timestamp)/t.period,o=s.g.BigInt(10**18),i=(o*t.reward/t.total_shares*a+n)*r/o,l=p.utils.undecimalize(i-e.debt,9);return Number(l)},se="The treasury doesn't have enough balance for the claim.",re="Invalid wallet address.",ne="Invalid farm address.",ae="Invalid debt address.",oe="Cannot fetch data of debts";var ie=s(19289);BigInt.prototype.toJSON=function(){return this.toString()};const le={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}},{sol:{farming:de,senAddress:ce}}=x,ue="farms",he=(0,ie.createAsyncThunk)("farms/getFarms",(async(e,{getState:t})=>{const{farms:s}=t();if(Object.keys(s).length)return s;const r=await de.connection.getProgramAccounts(de.farmingProgramId,{filters:[{dataSize:209},{memcmp:{bytes:ce,offset:97}}]});let n={};return r.forEach((({pubkey:e,account:{data:t}})=>{const s=e.toBase58(),r=de.parseFarmData(t);n[s]=r})),n})),pe=(0,ie.createAsyncThunk)("farms/getFarm",(async({address:e},{getState:t})=>{if(!p.account.isAddress(e))throw new Error("Invalid farm address");const{farms:{[e]:s}}=t();if(s)return{[e]:s};return{[e]:await de.getFarmData(e)}})),fe=(0,ie.createAsyncThunk)("farms/upsetFarm",(async({address:e,data:t})=>{if(!p.account.isAddress(e))throw new Error("Invalid farm address");if(!t)throw new Error("Data is empty");return{[e]:t}})),xe=(0,ie.createSlice)({name:ue,initialState:{},reducers:{},extraReducers:e=>{e.addCase(he.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(pe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(fe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,{sol:{farming:me}}=x,ye="debts",je=(0,ie.createAsyncThunk)("debts/getDebts",(async({owner:e})=>{if(!p.account.isAddress(e))throw new Error("Invalid owner/wallet address");const t=await me.connection.getProgramAccounts(me.farmingProgramId,{filters:[{dataSize:89},{memcmp:{bytes:e,offset:32}}]});let s={};return t.forEach((({pubkey:e,account:{data:t}})=>{const r=e.toBase58(),n=me.parseDebtData(t);return s[r]=n})),s})),ge=(0,ie.createAsyncThunk)("debts/getDebt",(async({address:e},{getState:t})=>{const{debts:{[e]:s}}=t();if(s)return{[e]:s};return{[e]:await me.getDebtData(e)}})),we=(0,ie.createAsyncThunk)("debts/upsetDebt",(async({address:e,data:t})=>{if(!p.account.isAddress(e))throw new Error("Invalid address");if(!t)throw new Error("Data is empty");return{[e]:t}})),ve=(0,ie.createAsyncThunk)("debts/deleteDebt",(async({address:e})=>{if(!p.account.isAddress(e))throw new Error("Invalid address");return{address:e}})),be=(0,ie.createSlice)({name:ye,initialState:{},reducers:{},extraReducers:e=>{e.addCase(je.fulfilled,((e,{payload:t})=>t)).addCase(ge.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(we.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ve.fulfilled,((e,{payload:t})=>{delete e[t.address]}))}}).reducer,Ce="main",Se=(0,ie.createAsyncThunk)("main/setSearch",(async({search:e},{getState:t})=>({search:e}))),Ae=(0,ie.createSlice)({name:Ce,initialState:{search:""},reducers:{},extraReducers:e=>{e.addCase(Se.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,Te=(0,ie.configureStore)({middleware:e=>e(le),devTools:!1,reducer:{farms:xe,debts:be,main:Ae}}),{sol:{farming:ke}}=x;class Re{async checkSeedBalance(e){const{splt:t,wallet:s}=window.sentre;if(!s)throw new Error("Please connect wallet first!");const r=Te.getState().farms[e],n=await s.getAddress();if(!p.account.isAddress(n))throw new Error(re);const a=await ke.deriveDebtAddress(n,e);if(!p.account.isAddress(a))throw new Error(ae);const o=Te.getState().debts[a];if(!o)throw new Error(oe);const i=te(o,r),{treasury_reward:l,treasury_stake:d,total_shares:c}=r;let{amount:u}=await t.getAccountData(l);l===d&&(u-=c);if(Number(p.utils.undecimalize(u,9))<i)throw new Error(se)}async validate(e){if(!p.account.isAddress(e))throw new Error(ne);return await this.checkSeedBalance(e)}}const{sol:{senAddress:Ee,farming:Pe}}=x,ze=({farmAddress:e,onClose:t})=>{const{wallet:{address:s}}=(0,n.useWallet)(),{data:r}=Y(e),i=ee(e),[c,u]=(0,o.useState)(),[h,f]=(0,o.useState)(!0),[x,m]=(0,o.useState)(!1),y=(0,o.useCallback)((async e=>(await u(e),e?await f(!1):await f(!0))),[]),j=p.utils.undecimalize(null===r||void 0===r?void 0:r.shares,9);return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Space,{align:"start",children:[(0,l.jsx)(d,{name:"alert-circle-outline"}),(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"The pending reward will be automatically harvested when you unstake."})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Card,{bodyStyle:{padding:12},style:{boxShadow:"none"},children:(0,l.jsxs)(a.Space,{style:{width:"100%"},direction:"vertical",children:[(0,l.jsxs)(a.Row,{children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Amount"})}),(0,l.jsx)(a.Col,{children:(0,l.jsxs)(a.Space,{size:6,children:[(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Available:"}),(0,l.jsx)(a.Typography.Text,{children:T(j).format("0,0.[00]")}),(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"LPT"})]})})]}),(0,l.jsx)(F,{placeholder:"0",value:c,onValue:y,bordered:!1,size:"large",style:{padding:0},suffix:(0,l.jsx)(a.Button,{type:"text",style:{marginRight:-7},onClick:()=>y(j),children:"MAX"}),max:j})]})})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Button,{type:"primary",icon:(0,l.jsx)(d,{name:"remove-outline"}),onClick:async()=>{m(!0);try{const{splt:r,wallet:n}=window.sentre;if(!n)throw Error("Please connect wallet first");if(!c||!i)return;const a=p.utils.decimalize(c,9),o=await r.deriveAssociatedAddress(s,Ee),l=new Re;await l.validate(e);const{txId:d}=await Pe.unstake(a,i.address,o,e,n);return t(!1),W("Unstaked",d)}catch(r){return V(r)}finally{m(!1)}},block:!0,disabled:h,loading:x,children:"Unstake"})})]})},{sol:{senAddress:Ie,farming:_e}}=x,Oe=({farmAddress:e,onClose:t})=>{const{wallet:{address:s}}=(0,n.useWallet)(),{accounts:r}=(0,n.useAccount)(),{data:i}=Y(e),c=ee(e),[u,h]=(0,o.useState)(),[f,x]=(0,o.useState)(!0),[m,y]=(0,o.useState)(!1),j=(0,o.useCallback)((async e=>(await h(e),e?await x(!1):await x(!0))),[]),g=p.utils.undecimalize(BigInt((null===c||void 0===c?void 0:c.data.amount)||0),9);return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Space,{align:"start",children:[(0,l.jsx)(d,{name:"alert-circle-outline"}),(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"The pending reward will be automatically harvested when you stake more."})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Card,{bodyStyle:{padding:12},style:{boxShadow:"none"},children:(0,l.jsxs)(a.Space,{style:{width:"100%"},direction:"vertical",children:[(0,l.jsxs)(a.Row,{children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Amount"})}),(0,l.jsx)(a.Col,{children:(0,l.jsxs)(a.Space,{size:6,children:[(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Available:"}),(0,l.jsx)(a.Typography.Text,{children:T(g).format("0,0.[00]")}),(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"LPT"})]})})]}),(0,l.jsx)(F,{placeholder:"0",value:u,onValue:j,bordered:!1,size:"large",style:{padding:0},suffix:(0,l.jsx)(a.Button,{type:"text",style:{marginRight:-15},onClick:()=>j(g),children:"MAX"}),max:g})]})})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Button,{type:"primary",icon:(0,l.jsx)(d,{name:"add-outline"}),onClick:async()=>{y(!0);try{const{splt:n,wallet:a}=window.sentre;if(!a)throw Error("Please connect wallet first");if(!u||!c)return;const o=await n.deriveAssociatedAddress(s,Ie);void 0===(null===i||void 0===i?void 0:i.shares)&&await _e.initializeAccounts(e,s,a),r[o]||await n.initializeAccount(Ie,s,a);const l=new Re;await l.validate(e);const{txId:d}=await _e.stake(p.utils.decimalize(u,9),c.address,o,e,a);return t(!1),W("Staked",d)}catch(n){return V(n)}finally{y(!1)}},block:!0,disabled:f,loading:m,children:"Stake"})})]})};var Be=s(51518),Me=s.n(Be);const Ne=e=>{const[t,s]=(0,o.useState)(0),{tokenProvider:r,getMint:a}=(0,n.useMint)(),i=(0,o.useCallback)((async()=>{if(!e)return s(0);const t=await r.findByAddress(e);if(t)return s(t.decimals);try{const t=await a({address:e});return s(t[e].decimals)}catch(n){}return s(0)}),[a,e,r]);return(0,o.useEffect)((()=>{i()}),[i]),t},{sol:{senAddress:De,farming:Le}}=x,Fe=({farmAddress:e,onChange:t=(()=>{})})=>{const{accounts:s}=(0,n.useAccount)(),{wallet:{address:i}}=(0,n.useWallet)(),c=(0,r.useSelector)((e=>e.farms)),[u,h]=(0,o.useState)(""),[f,x]=(0,o.useState)("0"),[m,y]=(0,o.useState)(!1),{mint_reward:j}=(null===c||void 0===c?void 0:c[e])||{},g=Ne(j);(0,o.useEffect)((()=>{(async()=>{if(0!==g)try{const{splt:e}=window.sentre,t=await e.deriveAssociatedAddress(i,j),{amount:r}=s[t]||{};x(r?p.utils.undecimalize(r,g):"0")}catch(e){x("0")}})()}),[i,s,j,g]);return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Card,{style:{boxShadow:"unset",borderRadius:8},bodyStyle:{padding:8},children:(0,l.jsxs)(a.Row,{gutter:[0,0],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{gutter:[0,0],wrap:!1,style:{margin:"6px 12px 0px 12px",fontSize:12},children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Amount"})}),(0,l.jsx)(a.Col,{children:(0,l.jsxs)(a.Space,{size:6,children:[(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Available:"}),(0,l.jsx)(a.Typography.Text,{children:T(f).format("0,0.[00]")}),(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"SNTR"})]})})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(F,{placeholder:"0",value:u,onValue:h,suffix:(0,l.jsx)(a.Button,{type:"text",onClick:()=>h(f),size:"small",style:{marginRight:-7},children:"MAX"}),bordered:!1,max:f})})]})})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Button,{type:"primary",icon:(0,l.jsx)(d,{name:"add-outline"}),onClick:async()=>{y(!0);const{wallet:s,splt:r}=window.sentre;if(!s)return;const n=await r.deriveAssociatedAddress(i,De),a=p.utils.decimalize(u,9);try{const{txId:r}=await Le.seed(a,e,n,s);return t(r),W("Seed",r)}catch(o){return V(o)}finally{y(!1)}},block:!0,disabled:!u,loading:m,children:"Seed"})})]})},{sol:{farming:We}}=x,Ve=({farmAddress:e,onChange:t=(()=>{})})=>{const{wallet:{address:s}}=(0,n.useWallet)(),i=(0,r.useSelector)((e=>e.farms)),[c,u]=(0,o.useState)(""),[h,f]=(0,o.useState)("0"),[x,m]=(0,o.useState)(!1),{treasury_reward:y,mint_reward:j}=i[e]||{},g=Ne(j),{symbol:w}=E(j);(0,o.useEffect)((()=>{(async()=>{if(0!==g)try{const{splt:e}=window.sentre,{amount:t}=await e.getAccountData(y);f(t?p.utils.undecimalize(t,g):"0")}catch(e){f("0")}})()}),[g,y]);return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Card,{style:{boxShadow:"unset",borderRadius:8},bodyStyle:{padding:8},children:(0,l.jsxs)(a.Row,{gutter:[0,0],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{gutter:[0,0],wrap:!1,style:{margin:"6px 12px 0px 12px",fontSize:12},children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Amount"})}),(0,l.jsx)(a.Col,{children:(0,l.jsxs)(a.Space,{size:6,children:[(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Available:"}),(0,l.jsx)(a.Typography.Text,{children:T(h).format("0,0.[00]")}),(0,l.jsx)(a.Typography.Text,{type:"secondary",children:w})]})})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(F,{placeholder:"0",value:c,onValue:u,suffix:(0,l.jsx)(a.Button,{type:"text",onClick:()=>u(h),size:"small",style:{marginRight:-7},children:"MAX"}),bordered:!1,max:h})})]})})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Button,{type:"primary",icon:(0,l.jsx)(d,{name:"remove-outline"}),onClick:async()=>{m(!0);const{wallet:r,splt:n}=window.sentre;if(!r)return;const a=await n.deriveAssociatedAddress(s,j),o=p.utils.decimalize(c,g);try{const{txId:s}=await We.unseed(o,e,a,r);return t(s),W("Unseed",s)}catch(i){return V(i)}finally{m(!1)}},block:!0,disabled:!c,loading:x,children:"Unseed"})})]})},{sol:{farming:Ue}}=x,qe=({farmAddress:e,onChange:t=(()=>{})})=>{const s=(0,r.useSelector)((e=>e.farms)),[n,i]=(0,o.useState)(!1),{state:c}=(null===s||void 0===s?void 0:s[e])||{};return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Card,{style:{boxShadow:"unset",borderRadius:8},bodyStyle:{padding:16},children:(0,l.jsxs)(a.Space,{align:"start",children:[(0,l.jsx)(d,{name:"information-circle-outline"}),(0,l.jsx)(a.Typography.Text,{children:'Freezing a farm will prevent all actions, but "seed" and "unseed", until the farm has been thawed.'})]})})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Button,{type:"primary",icon:(0,l.jsx)(d,{name:1===c?"snow-outline":"sunny-outline"}),onClick:1===c?async()=>{const{wallet:s}=window.sentre;if(s){i(!0);try{const{txId:r}=await Ue.freeze(e,s);return t(r),W("Freeze the farm",r)}catch(r){return V(r)}finally{i(!1)}}}:async()=>{const{wallet:s}=window.sentre;if(s){i(!0);try{const{txId:r}=await Ue.thaw(e,s);return t(r),W("Thaw the farm",r)}catch(r){return V(r)}finally{i(!1)}}},block:!0,disabled:!c,loading:n,children:1===c?"Freeze":"Thaw"})})]})},{sol:{farming:Qe}}=x,He=({farmAddress:e,onChange:t=(()=>{})})=>{const s=(0,r.useSelector)((e=>e.farms)),[n,i]=(0,o.useState)(!1),{total_shares:c}=(null===s||void 0===s?void 0:s[e])||{};return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Card,{style:{boxShadow:"unset",borderRadius:8},bodyStyle:{padding:16},children:(0,l.jsx)(a.Row,{gutter:[0,0],children:(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Space,{children:[(0,l.jsx)(d,{name:"information-circle-outline"}),(0,l.jsx)(a.Typography.Text,{children:"The farm can be closed only all farmers unstaked their tokens!"})]})})})})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Button,{type:"primary",icon:(0,l.jsx)(d,{name:"trash-outline"}),onClick:async()=>{const{wallet:s}=window.sentre;if(s){i(!0);try{const{txId:r}=await Qe.closeFarm(e,s);return t(r),W("Close the farm",r)}catch(r){return V(r)}finally{i(!1)}}},block:!0,disabled:!!c,loading:n,children:"Close Farm"})})]})},Ge=({label:e="",title:t=""})=>(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsx)(a.Typography.Text,{type:"secondary",children:e})}),(0,l.jsx)(a.Col,{children:(0,l.jsx)(a.Typography.Text,{children:t})})]}),Je=({farmAddress:e})=>{const t=(0,r.useSelector)((t=>{var s;return null===(s=t.farms)||void 0===s?void 0:s[e]})),[s,n]=(0,o.useState)(!1),[i,c]=(0,o.useState)(!1),{budget:u,symbol:h}=(e=>{const[t,s]=(0,o.useState)("0"),n=(0,r.useSelector)((e=>e.farms)),{treasury_stake:a,treasury_reward:i,mint_reward:l,total_shares:d}=n[e]||{},c=Ne(l),{symbol:u}=E(l);return(0,o.useEffect)((()=>{(async()=>{try{const{splt:e}=window.sentre;let{amount:t}=await e.getAccountData(i);i===a&&(t-=d);const r=p.utils.undecimalize(t,c);s(r)}catch(e){s("0")}})()}),[c,d,i,a]),{budget:t,symbol:u}})(e),{mint_stake:f,period:x,reward:m}=t||{},y=Ne(f),j=Number(x)/3600,g=(0,o.useMemo)((()=>0===y?0:p.utils.undecimalize(m,y)),[y,m]);return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(a.Button,{onClick:()=>n(!0),children:"Manage"}),(0,l.jsx)(a.Modal,{visible:s,onCancel:()=>n(!1),closeIcon:(0,l.jsx)(d,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Space,{style:{lineHeight:1},children:[(0,l.jsx)(d,{name:"leaf"}),(0,l.jsx)(a.Typography.Title,{level:5,style:{margin:0},children:"Farm Management"})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Card,{style:{borderRadius:8},bodyStyle:{padding:16},bordered:!1,children:(0,l.jsxs)(a.Row,{gutter:[8,8],children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{gutter:[0,0],children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsxs)(a.Space,{size:4,style:{fontWeight:600},children:[(0,l.jsx)(z,{mintAddress:f,size:32}),(0,l.jsx)(I,{mintAddress:f})]})}),(0,l.jsx)(a.Col,{children:(0,l.jsxs)(a.Space,{size:2,children:[(0,l.jsx)(a.Typography.Text,{type:"secondary",style:{fontSize:12},children:S(e)}),(0,l.jsx)(a.Tooltip,{visible:i,title:"Copied",children:(0,l.jsx)(Me(),{text:e,children:(0,l.jsx)(a.Button,{type:"text",size:"small",onClick:async()=>{var e;c(!0),await(e=1500,new Promise((t=>setTimeout(t,e)))),c(!1)},icon:(0,l.jsx)(d,{name:"copy"})})})}),(0,l.jsx)(a.Button,{type:"text",size:"small",onClick:()=>window.open(A(e),"_blank"),icon:(0,l.jsx)(d,{name:"open"})})]})})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(Ge,{label:"Budget",title:`${u} ${h}`})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(Ge,{label:"Reward",title:`${g} ${h}/${j} hour`})})]})})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Tabs,{children:[(0,l.jsx)(a.Tabs.TabPane,{tab:"Seed",children:(0,l.jsx)(Fe,{farmAddress:e,onChange:()=>n(!1)})},"seed"),(0,l.jsx)(a.Tabs.TabPane,{tab:"Unseed",children:(0,l.jsx)(Ve,{farmAddress:e,onChange:()=>n(!1)})},"unseed"),(0,l.jsx)(a.Tabs.TabPane,{tab:"Freeze/Thaw",children:(0,l.jsx)(qe,{farmAddress:e,onChange:()=>n(!1)})},"freeze-thaw"),(0,l.jsx)(a.Tabs.TabPane,{tab:"Ownership",disabled:!0,children:"TBD"},"ownership"),(0,l.jsx)(a.Tabs.TabPane,{tab:"Close",children:(0,l.jsx)(He,{farmAddress:e,onChange:()=>n(!1)})},"close")]})})]})})]})},Ze=e=>{const t=(0,r.useSelector)((t=>t.farms[e])),{data:s}=Y(e),[n,a]=(0,o.useState)(0),i=(0,o.useCallback)((()=>{if(!s||!t)return a(0);const e=te(s,t)||0;return a(e)}),[s,t]);return(0,o.useEffect)((()=>{i()}),[i]),n},$e=()=>{const{tokenProvider:e,getMint:t}=(0,n.useMint)(),{pools:s}=(0,n.usePool)(),r=(0,o.useCallback)((async(t,s)=>{try{var r;const n=await e.findByAddress(t);if(!n)return 0;const a=null===(r=n.extensions)||void 0===r?void 0:r.coingeckoId;if(!a)return 0;const o=await k(a);return Number(p.utils.undecimalize(s,n.decimals))*o.price}catch(n){return 0}}),[e]),a=(0,o.useCallback)((async(e,n)=>{const a=Object.values(s).find((t=>t.mint_lpt===e));if(!a)return 0;const{reserve_a:o,reserve_b:i,mint_a:l,mint_b:d}=a,{[e]:{supply:c}}=await t({address:e}),{deltaA:u,deltaB:h}=p.Swap.oracle.withdraw(n,c,o,i);return await r(l,u)+await r(d,h)}),[t,r,s]);return{getTotalValue:(0,o.useCallback)((async({mintAddress:t,amount:s})=>await e.findByAddress(t)?r(t,s):a(t,s)),[a,r,e])}},Ye=e=>{const t=(0,r.useSelector)((t=>t.farms[e])),{getTotalValue:s}=$e(),[n,a]=(0,o.useState)(0),i=(0,o.useCallback)((async()=>{const{total_shares:e,mint_stake:r}=t,n=await s({mintAddress:r,amount:e});return a(n)}),[t,s]);return(0,o.useEffect)((()=>{i()}),[i]),n},Ke=e=>{const t=(0,r.useSelector)((t=>t.farms[e])),s=Ye(e),{getTotalValue:n}=$e(),[a,i]=(0,o.useState)(0),l=(0,o.useCallback)((async()=>{if(!s)return i(0);const{mint_reward:e,reward:r,period:a}=t,o=r*BigInt(86400)/a,l=await n({mintAddress:e,amount:o});return i(l/s)}),[t,n,s]);(0,o.useEffect)((()=>{l()}),[l]);const d=(0,o.useMemo)((()=>365*a),[a]);return{roi:a,apr:d}},{sol:{senAddress:Xe,farming:et},manifest:{appId:tt}}=x,st=({farmAddress:e})=>{const t=(0,r.useSelector)((t=>{var s;return null===(s=t.farms)||void 0===s?void 0:s[e]})),{data:s}=Y(e),i=Ze(e),c=(e=>{const{pools:t}=(0,n.usePool)(),s=(0,r.useSelector)((t=>t.farms[e])),[a,i]=(0,o.useState)(),l=(0,o.useCallback)((async()=>{const e=null===s||void 0===s?void 0:s.mint_stake;if(!e)return i(void 0);let r="";for(const s in t)if(t[s].mint_lpt===e){r=s;break}const n=t[r];return X()(n,null===a||void 0===a?void 0:a.data)?void 0:i({address:r,data:n})}),[null===s||void 0===s?void 0:s.mint_stake,a,t]);return(0,o.useEffect)((()=>{l()}),[l]),a})(e),u=Ye(e),{apr:h}=Ke(e),{ui:{width:f}}=(0,n.useUI)(),{wallet:{address:x}}=(0,n.useWallet)(),m=(0,B.useLocation)().search,y=(0,B.useHistory)(),[j,g]=(0,o.useState)(),[w,v]=(0,o.useState)(!1),[b,C]=(0,o.useState)(!1),{owner:S}=t||{},A=S===x,k=(0,o.useMemo)((()=>new URLSearchParams(m)),[m]);(0,o.useEffect)((()=>{const t=k.get("farmAddress");t&&t===e&&g(t)}),[e,k]);let R="0";s&&(R=p.utils.undecimalize(s.shares,9));const E=f>768?j?"chevron-down-outline":"chevron-forward-outline":j?"chevron-up-outline":"chevron-down-outline";return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(a.Card,{bordered:!1,className:"farming-card",bodyStyle:{padding:16},style:{boxShadow:"unset",borderRadius:8,position:"relative",zIndex:1},children:(0,l.jsxs)(a.Row,{gutter:[16,16],justify:"center",align:"middle",children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsxs)(a.Row,{gutter:[16,16],align:"middle",children:[(0,l.jsx)(a.Col,{xs:24,md:5,children:(0,l.jsxs)(a.Space,{children:[(0,l.jsx)(z,{mintAddress:t.mint_stake,size:24}),(0,l.jsx)(I,{mintAddress:e}),(0,l.jsx)(a.Tooltip,{title:e,children:(0,l.jsx)(a.Button,{type:"text",shape:"circle",size:"small",icon:(0,l.jsx)(d,{name:"alert-circle-outline"})})})]})}),(0,l.jsx)(a.Col,{xs:12,md:4,children:(0,l.jsx)(Z,{label:"APR",tooltip:e,value:T(h).format("0,0.[00]a%")})}),(0,l.jsx)(a.Col,{xs:12,md:5,children:(0,l.jsx)(Z,{label:"Liquidity",value:T(u).format("0,0.00[00]a$")})}),(0,l.jsx)(a.Col,{xs:12,md:5,children:(0,l.jsx)(Z,{label:"Your staked LPT",value:T(R).format("0,0.00[00]")})}),(0,l.jsx)(a.Col,{xs:12,md:5,children:(0,l.jsx)(Z,{mintAddress:t.mint_reward,label:"Reward",value:T(i).format("0,0.00[00]")})})]})}),(0,l.jsx)(a.Col,{children:(0,l.jsx)(a.Button,{type:"text",icon:(0,l.jsx)(d,{name:E}),onClick:()=>j?g(void 0):(k.set("farmAddress",e),y.push(`/app/${tt}?`+k.toString()),g(e))})})]})}),(0,l.jsx)(a.Row,{children:(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Collapse,{activeKey:j,className:"expand-card",children:(0,l.jsx)(a.Collapse.Panel,{header:null,showArrow:!1,children:(0,l.jsxs)(a.Row,{gutter:[16,16],children:[(0,l.jsx)(a.Col,{xs:{order:2},md:{order:1},flex:"auto",children:c&&(0,l.jsxs)(a.Button,{type:"text",style:{padding:0,background:"transparent"},onClick:()=>{y.push(`/app/sen_lp?poolAddress=${c.address}`)},children:["Go pool",(0,l.jsx)(d,{name:"chevron-forward-outline"})]})}),(0,l.jsx)(a.Col,{xs:{order:1},md:{order:2},children:(0,l.jsxs)(a.Space,{children:[A&&(0,l.jsx)(Je,{farmAddress:e}),(0,l.jsx)(a.Button,{onClick:()=>v(!0),icon:(0,l.jsx)(d,{name:"add-outline"}),children:"Stake"}),(0,l.jsx)(a.Button,{type:"primary",icon:(0,l.jsx)(d,{name:"leaf-outline"}),loading:b,onClick:async()=>{C(!0);const{splt:t,wallet:s}=window.sentre,r=await t.deriveAssociatedAddress(x,Xe);try{if(!s)throw new Error("please connect wallet first!");const t=new Re;await t.validate(e);const{txId:n}=await et.harvest(e,r,s);return W("Harvest",n)}catch(n){return V(n)}finally{C(!1)}},disabled:0===i,children:"Harvest"})]})})]})},e)})})}),(0,l.jsx)(a.Modal,{onCancel:()=>v(!1),footer:null,title:null,visible:w,children:(0,l.jsxs)(a.Tabs,{children:[(0,l.jsx)(a.Tabs.TabPane,{tab:"Stake",children:(0,l.jsx)(Oe,{farmAddress:e,onClose:v})},"stake"),(0,l.jsx)(a.Tabs.TabPane,{tab:"Unstake",children:(0,l.jsx)(ze,{farmAddress:e,onClose:v})},"unstake")]})})]})},rt=()=>{const{tokenProvider:e}=(0,n.useMint)(),{pools:t}=(0,n.usePool)(),s=(0,r.useSelector)((e=>e.farms)),{search:a}=(0,r.useSelector)((e=>e.main)),[i,l]=(0,o.useState)({}),d=(0,o.useCallback)((async()=>{if(!a||!t||!s||a.length<3)return l(s);const r={};for(const t in s){const n=s[t],{mint_stake:o}=n;let i=!1;t===a&&(i=!0);const l=await e.findByAddress(o);if(l){(l.symbol+l.name).toLowerCase().includes(a.toLowerCase())&&(i=!0),l.address===a&&(i=!0)}i&&(r[t]=n)}l(r)}),[s,a,t,e]);return(0,o.useEffect)((()=>{d()}),[d]),i},nt=()=>{const e=(()=>{const e=rt(),[t,s]=(0,o.useState)([]),r=(0,o.useCallback)((()=>{let t=[];for(const s in e)t.push({address:s,data:e[s]});t=t.sort(((e,t)=>e.data.total_shares<t.data.total_shares?1:-1)),s(t)}),[e]);return(0,o.useEffect)((()=>{r()}),[r]),t})();return(0,l.jsx)(a.Row,{gutter:[16,16],children:e.map((e=>(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(q.ZP,{height:84,children:(0,l.jsx)(st,{farmAddress:e.address})})},e.address)))})},{sol:{senOwner:at}}=x,ot=()=>{const e=rt(),t=(0,o.useMemo)((()=>Object.keys(e)),[e]),s=(0,o.useMemo)((()=>t.filter((t=>at.includes(e[t].owner)))),[e,t]),r=(0,o.useMemo)((()=>s.sort(((t,s)=>e[t].total_shares<e[s].total_shares?1:-1))),[e,s]);return(0,l.jsx)(a.Row,{gutter:[16,16],children:r.map(((e,t)=>(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(q.ZP,{height:84,children:(0,l.jsx)(st,{farmAddress:e})})},e+t)))})},{sol:{farming:it}}=x,lt=()=>{const{debts:e}=(0,r.useSelector)((e=>e)),{wallet:{address:t}}=(0,n.useWallet)(),i=rt(),[d,c]=(0,o.useState)(),u=(0,o.useMemo)((()=>Object.keys(i)),[i]),h=(0,o.useCallback)((async()=>{const r={};for(const n of u){if(!n)continue;const a=await it.deriveDebtAddress(t,n),o=e[a];(null===o||void 0===o?void 0:o.shares)>s.g.BigInt(0)&&(r[n]=!0)}c(r)}),[e,u,t]);return(0,o.useEffect)((()=>{h()}),[h]),(0,l.jsx)(a.Row,{gutter:[16,16],children:Object.keys(i).map(((e,t)=>null!==d&&void 0!==d&&d[e]?(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(q.ZP,{height:84,children:(0,l.jsx)(st,{farmAddress:e})})},e+t):null))})},dt=()=>{const e=rt(),{wallet:{address:t}}=(0,n.useWallet)(),s=(0,o.useMemo)((()=>Object.keys(e)),[e]),r=(0,o.useMemo)((()=>s.filter((s=>t===e[s].owner))),[e,s,t]),i=(0,o.useMemo)((()=>r.sort(((t,s)=>e[t].total_shares<e[s].total_shares?1:-1))),[e,r]);return(0,l.jsx)(a.Row,{gutter:[16,16],children:i.map(((e,t)=>(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(q.ZP,{height:84,children:(0,l.jsx)(st,{farmAddress:e})})},e+t)))})},{sol:{senOwner:ct,farming:ut}}=x,ht=()=>{const{farms:e,debts:t}=(0,r.useSelector)((e=>e)),s=(0,B.useLocation)().search,{wallet:{address:i}}=(0,n.useWallet)(),[d,c]=(0,o.useState)("sen-farms"),u=(0,o.useMemo)((()=>new URLSearchParams(s)),[s]);return(0,o.useEffect)((()=>{(async()=>{var s;const r=u.get("farmAddress");if(!r)return;const n=null===(s=e[r])||void 0===s?void 0:s.owner,a=await ut.deriveDebtAddress(i,r);if(!n||!a)return;const o=t[a];n===i?c("your-farms"):(null===o||void 0===o?void 0:o.shares)>BigInt(0)?c("staked-farms"):ct.includes(n)?c("sen-farms"):c("all-farms")})()}),[t,e,u,i]),(0,l.jsxs)(a.Tabs,{activeKey:d,onChange:c,tabBarExtraContent:(0,l.jsx)(J,{}),children:[(0,l.jsx)(a.Tabs.TabPane,{tab:"Sen Farms",children:(0,l.jsx)(ot,{})},"sen-farms"),(0,l.jsx)(a.Tabs.TabPane,{tab:"Staked Farms",children:(0,l.jsx)(lt,{})},"staked-farms"),(0,l.jsx)(a.Tabs.TabPane,{tab:"Your Farms",children:(0,l.jsx)(dt,{})},"your-farms"),(0,l.jsx)(a.Tabs.TabPane,{tab:"All",children:(0,l.jsx)(nt,{})},"all-farms")]})},{sol:{farming:pt}}=x;let ft=0,xt=BigInt(0);const mt=({children:e})=>{const t=(0,r.useDispatch)(),{wallet:{address:s,lamports:a}}=(0,n.useWallet)(),i=(0,o.useCallback)((async()=>{try{if(!p.account.isAddress(s))return;await t(je({owner:s})).unwrap()}catch(e){await V(e)}}),[t,s]),l=(0,o.useCallback)((async()=>{if(!p.account.isAddress(s))return console.warn("Wallet is not connected");if(ft)return console.warn("Already watched");const e=[{dataSize:89},{memcmp:{bytes:s,offset:32}}];ft=pt.watch(((e,s)=>{if(e)return console.error(e);const{type:r,address:n,data:a}=s;return"debt"===r?t(we({address:n,data:a})):void 0}),e)}),[t,s]);return(0,o.useEffect)((()=>{xt&&a>xt&&t(je({owner:s})),xt=a}),[t,s,a]),(0,o.useEffect)((()=>(i(),l(),()=>{(async()=>{try{await pt.unwatch(ft)}catch(e){}})(),ft=0})),[i,l]),e},{sol:{farming:yt,senAddress:jt}}=x;let gt=0;const wt=({children:e,style:t={}})=>{const s=(0,r.useDispatch)(),[n,i]=(0,o.useState)(!1),d=(0,o.useCallback)((async()=>{try{i(!0),await s(he())}catch(e){await V(e)}finally{i(!1)}}),[s]),c=(0,o.useCallback)((async()=>{if(gt)return console.warn("Already watched");const e=[{dataSize:209},{memcmp:{bytes:jt,offset:97}}];gt=yt.watch(((e,t)=>{if(e)return console.error(e);const{type:r,address:n,data:a}=t;return"farm"===r?s(fe({address:n,data:a})):void 0}),e)}),[s]);return(0,o.useEffect)((()=>(d(),c(),()=>{(async()=>{try{yt.unwatch(gt)}catch(e){}})(),gt=0})),[d,c]),(0,l.jsx)(a.Spin,{spinning:n,style:t,children:e})},vt=({children:e,style:t})=>(0,l.jsx)(wt,{style:t,children:(0,l.jsx)(mt,{children:e})}),bt=()=>{const{search:e}=(0,r.useSelector)((e=>e.main)),t=(0,r.useDispatch)();return(0,l.jsx)(vt,{children:(0,l.jsxs)(a.Row,{gutter:[24,24],style:{paddingBottom:12},justify:"center",children:[(0,l.jsx)(a.Col,{xs:24,lg:18,children:(0,l.jsx)(O,{})}),(0,l.jsx)(a.Col,{xs:24,lg:18,children:(0,l.jsxs)(a.Row,{gutter:[8,8],children:[(0,l.jsx)(a.Col,{xs:24,lg:8,children:(0,l.jsx)(a.Input,{value:e,onChange:e=>t(Se({search:e.target.value})),prefix:(0,l.jsx)(d,{name:"search-outline"}),bordered:!0})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(ht,{})})]})})]})})},Ct=({isHidden:e})=>{const{search:t}=(0,r.useSelector)((e=>e.main)),s=(0,r.useDispatch)();return(0,l.jsx)(a.Card,{className:e?"hidden-class":"",bodyStyle:{padding:8},bordered:!1,children:(0,l.jsx)(a.Input,{value:t,onChange:e=>s(Se({search:e.target.value})),placeholder:"Search",size:"small",bordered:!1,prefix:(0,l.jsx)(a.Button,{type:"text",style:{marginLeft:-7},size:"small",icon:(0,l.jsx)(d,{name:"search-outline"})})})})},{manifest:{appId:St}}=x,At=({farmAddress:e})=>{const t=Ze(e),s=(0,r.useSelector)((t=>t.farms[e])),n=(0,B.useHistory)(),i=(0,B.useLocation)().search,{data:c}=Y(e),{apr:u}=Ke(e),h=(0,o.useMemo)((()=>new URLSearchParams(i)),[i]),f=(0,o.useCallback)((()=>{h.set("farmAddress",e),n.push(`/app/${St}?`+h.toString())}),[e,n,h]);let x="0";return c&&(x=p.utils.undecimalize(c.shares,9)),(0,l.jsx)(a.Card,{bordered:!1,className:"farm-card-widget",children:(0,l.jsxs)(a.Row,{children:[(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{align:"middle",gutter:[12,12],children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsxs)(a.Space,{children:[(0,l.jsx)(z,{mintAddress:s.mint_stake}),(0,l.jsx)(I,{mintAddress:s.mint_stake})]})}),(0,l.jsx)(a.Col,{children:(0,l.jsx)(a.Button,{onClick:f,type:"text",icon:(0,l.jsx)(d,{name:"open-outline"})})})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(a.Divider,{style:{margin:"12px 0"}})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{gutter:[6,6],children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsxs)(a.Space,{children:[(0,l.jsx)(z,{mintAddress:s.mint_reward}),(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Reward"})]})}),(0,l.jsx)(a.Col,{children:(0,l.jsxs)(a.Space,{children:[(0,l.jsx)(a.Typography.Text,{children:T(t).format("0,0.00[00]")}),(0,l.jsx)(I,{mintAddress:s.mint_reward})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"APR"})}),(0,l.jsx)(a.Col,{children:(0,l.jsx)(a.Space,{children:(0,l.jsx)(a.Typography.Text,{children:T(u).format("0,0.[00]%")})})})]})}),(0,l.jsx)(a.Col,{span:24,children:(0,l.jsxs)(a.Row,{children:[(0,l.jsx)(a.Col,{flex:"auto",children:(0,l.jsx)(a.Typography.Text,{type:"secondary",children:"Your stacked LPT"})}),(0,l.jsx)(a.Col,{children:(0,l.jsx)(a.Space,{children:(0,l.jsx)(a.Typography.Text,{children:T(x).format("0,0.00[00]")})})})]})})]})})]})})},{sol:{farming:Tt}}=x,kt=()=>{const{debts:e}=(0,r.useSelector)((e=>e)),t=rt(),{wallet:{address:i}}=(0,n.useWallet)(),[d,c]=(0,o.useState)(),u=(0,o.useMemo)((()=>Object.keys(t)),[t]),h=(0,o.useCallback)((async()=>{const t={};for(const r of u){if(!r)continue;const n=await Tt.deriveDebtAddress(i,r),a=e[n];(null===a||void 0===a?void 0:a.shares)>s.g.BigInt(0)&&(t[r]=!0)}c(t)}),[e,u,i]);return(0,o.useEffect)((()=>{h()}),[h]),(0,l.jsxs)(a.Row,{gutter:[12,12],children:[Object.keys(t).map(((e,t)=>null!==d&&void 0!==d&&d[e]?(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(q.ZP,{height:185,overflow:!0,children:(0,l.jsx)(At,{farmAddress:e})})},t):null)),(0,l.jsx)(a.Col,{})]})},Rt=()=>{const e=rt(),{wallet:{address:t}}=(0,n.useWallet)(),s=(0,o.useMemo)((()=>Object.keys(e)),[e]),r=(0,o.useMemo)((()=>s.filter((s=>t===e[s].owner))),[e,s,t]),i=(0,o.useMemo)((()=>r.sort(((t,s)=>e[t].total_shares<e[s].total_shares?1:-1))),[e,r]);return(0,l.jsxs)(a.Row,{gutter:[16,16],children:[i.map(((e,t)=>(0,l.jsx)(a.Col,{span:24,children:(0,l.jsx)(q.ZP,{height:84,children:(0,l.jsx)(At,{farmAddress:e})})},e+t))),(0,l.jsx)(a.Col,{})]})},Et=()=>{const[e,t]=(0,o.useState)(!1),s=(0,r.useDispatch)(),{search:n}=(0,r.useSelector)((e=>e.main));return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(a.Button,{className:"button-search",type:"text",icon:(0,l.jsx)(d,{name:e?"close-outline":"search-outline"}),onClick:()=>{e&&s(Se({search:""})),t(!e)}}),(0,l.jsx)(Ct,{isHidden:!n&&!e}),(0,l.jsx)(vt,{style:{height:336},children:(0,l.jsxs)(a.Tabs,{className:e?"hidden-tab":"",children:[(0,l.jsx)(a.Tabs.TabPane,{tab:"Staked farms",children:(0,l.jsx)(kt,{})},"staked-farm"),(0,l.jsx)(a.Tabs.TabPane,{tab:"Your farms",children:(0,l.jsx)(Rt,{})},"your-farm")]})})]})},{manifest:{appId:Pt}}=x,zt=()=>(0,l.jsx)(n.UIProvider,{appId:Pt,antd:!0,children:(0,l.jsx)(n.PoolProvider,{children:(0,l.jsx)(n.MintProvider,{children:(0,l.jsx)(n.AccountProvider,{children:(0,l.jsx)(n.WalletProvider,{children:(0,l.jsx)(r.Provider,{store:Te,children:(0,l.jsx)(bt,{})})})})})})}),It={size:"small",type:"solid"},_t=()=>(0,l.jsx)(n.UIProvider,{appId:Pt,antd:!0,children:(0,l.jsx)(n.PoolProvider,{children:(0,l.jsx)(n.MintProvider,{children:(0,l.jsx)(n.AccountProvider,{children:(0,l.jsx)(n.WalletProvider,{children:(0,l.jsx)(r.Provider,{store:Te,children:(0,l.jsx)(Et,{})})})})})})})},63805:(e,t,s)=>{"use strict";s.d(t,{OB:()=>n,ef:()=>a});var r=s(53933);const n="production",a=(()=>{switch(r.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},53933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const r="sentre",n=window.localStorage,a=e=>{if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},o={set:(e,t)=>{let s=a(n.getItem(r));s&&"object"===typeof s||(s={}),s[e]=t,n.setItem(r,JSON.stringify(s))},get:e=>{let t=a(n.getItem(r));return t&&"object"===typeof t?t[e]:null},clear:e=>{o.set(e,null)}},i=o},44891:(e,t,s)=>{"use strict";var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=s(92950),a=u(n),o=u(s(43091)),i=s(8227),l=u(s(75217)),d=u(s(59214)),c=u(s(25361));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=0,m=0,y=0,j=0,g="data-lazyload-listened",w=[],v=[],b=!1;try{var C=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("test",null,C)}catch(I){}var S=!!b&&{capture:!1,passive:!0},A=function(e){var t=e.ref;if(t instanceof HTMLElement){var s=(0,l.default)(t),r=e.props.overflow&&s!==t.ownerDocument&&s!==document&&s!==document.documentElement?function(e,t){var s=e.ref,r=void 0,n=void 0,a=void 0,o=void 0;try{var i=t.getBoundingClientRect();r=i.top,n=i.left,a=i.height,o=i.width}catch(I){r=x,n=m,a=j,o=y}var l=window.innerHeight||document.documentElement.clientHeight,d=window.innerWidth||document.documentElement.clientWidth,c=Math.max(r,0),u=Math.max(n,0),h=Math.min(l,r+a)-c,p=Math.min(d,n+o)-u,f=void 0,g=void 0,w=void 0,v=void 0;try{var b=s.getBoundingClientRect();f=b.top,g=b.left,w=b.height,v=b.width}catch(I){f=x,g=m,w=j,v=y}var C=f-c,S=g-u,A=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return C-A[0]<=h&&C+w+A[1]>=0&&S-A[0]<=p&&S+v+A[1]>=0}(e,s):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var s=void 0,r=void 0;try{var n=t.getBoundingClientRect();s=n.top,r=n.height}catch(I){s=x,r=j}var a=window.innerHeight||document.documentElement.clientHeight,o=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return s-o[0]<=a&&s+r+o[1]>=0}(e);r?e.visible||(e.props.once&&v.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},T=function(){v.forEach((function(e){var t=w.indexOf(e);-1!==t&&w.splice(t,1)})),v=[]},k=function(){for(var e=0;e<w.length;++e){var t=w[e];A(t)}T()},R=void 0,E=null,P=function(e){function t(e){h(this,t);var s=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.visible=!1,s.setRef=s.setRef.bind(s),s}return f(t,e),r(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"===typeof t&&(e=e.document.querySelector(t));var s=void 0!==this.props.debounce&&"throttle"===R||"debounce"===R&&void 0===this.props.debounce;if(s&&((0,i.off)(e,"scroll",E,S),(0,i.off)(window,"resize",E,S),E=null),E||(void 0!==this.props.debounce?(E=(0,d.default)(k,"number"===typeof this.props.debounce?this.props.debounce:300),R="debounce"):void 0!==this.props.throttle?(E=(0,c.default)(k,"number"===typeof this.props.throttle?this.props.throttle:300),R="throttle"):E=k),this.props.overflow){var r=(0,l.default)(this.ref);if(r&&"function"===typeof r.getAttribute){var n=+r.getAttribute(g)+1;1===n&&r.addEventListener("scroll",E,S),r.setAttribute(g,n)}}else if(0===w.length||s){var a=this.props,o=a.scroll,u=a.resize;o&&(0,i.on)(e,"scroll",E,S),u&&(0,i.on)(window,"resize",E,S)}w.push(this),A(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,l.default)(this.ref);if(e&&"function"===typeof e.getAttribute){var t=+e.getAttribute(g)-1;0===t?(e.removeEventListener("scroll",E,S),e.removeAttribute(g)):e.setAttribute(g,t)}}var s=w.indexOf(this);-1!==s&&w.splice(s,1),0===w.length&&"undefined"!==typeof window&&((0,i.off)(window,"resize",E,S),(0,i.off)(window,"scroll",E,S))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,s=e.children,r=e.placeholder,n=e.className,o=e.classNamePrefix,i=e.style;return a.default.createElement("div",{className:o+"-wrapper "+n,ref:this.setRef,style:i},this.visible?s:r||a.default.createElement("div",{style:{height:t},className:o+"-placeholder"}))}}]),t}(n.Component);P.propTypes={className:o.default.string,classNamePrefix:o.default.string,once:o.default.bool,height:o.default.oneOfType([o.default.number,o.default.string]),offset:o.default.oneOfType([o.default.number,o.default.arrayOf(o.default.number)]),overflow:o.default.bool,resize:o.default.bool,scroll:o.default.bool,children:o.default.node,throttle:o.default.oneOfType([o.default.number,o.default.bool]),debounce:o.default.oneOfType([o.default.number,o.default.bool]),placeholder:o.default.node,scrollContainer:o.default.oneOfType([o.default.string,o.default.object]),unmountIfInvisible:o.default.bool,style:o.default.object},P.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};var z=function(e){return e.displayName||e.name||"Component"};t.ZP=P},59214:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,l=function l(){var d=+new Date-o;d<t&&d>=0?r=setTimeout(l,t-d):(r=null,s||(i=e.apply(a,n),r||(a=null,n=null)))};return function(){a=this,n=arguments,o=+new Date;var d=s&&!r;return r||(r=setTimeout(l,t)),d&&(i=e.apply(a,n),a=null,n=null),i}}},8227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,s,r){r=r||!1,e.addEventListener?e.addEventListener(t,s,r):e.attachEvent&&e.attachEvent("on"+t,(function(t){s.call(e,t||window.event)}))},t.off=function(e,t,s,r){r=r||!1,e.removeEventListener?e.removeEventListener(t,s,r):e.detachEvent&&e.detachEvent("on"+t,s)}},75217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,s=/(scroll|auto|overlay)/,r=e;r;){if(!r.parentNode)return e.ownerDocument||document.documentElement;var n=window.getComputedStyle(r),a=n.position,o=n.overflow,i=n["overflow-x"],l=n["overflow-y"];if("static"===a&&t)r=r.parentNode;else{if(s.test(o)&&s.test(i)&&s.test(l))return r;r=r.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},25361:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var r,n;return t||(t=250),function(){var a=s||this,o=+new Date,i=arguments;r&&o<r+t?(clearTimeout(n),n=setTimeout((function(){r=o,e.apply(a,i)}),t)):(r=o,e.apply(a,i))}}},29548:(e,t,s)=>{"use strict";var r=s(21533),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var s,a,o,i,l,d,c=!1;t||(t={}),s=t.debug||!1;try{if(o=r(),i=document.createRange(),l=document.getSelection(),(d=document.createElement("span")).textContent=e,d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",d.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=n[t.format]||n.default;window.clipboardData.setData(a,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(d),i.selectNodeContents(d),l.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(u){s&&console.error("unable to copy using execCommand: ",u),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(u){s&&console.error("unable to copy using clipboardData: ",u),s&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(i):l.removeAllRanges()),d&&document.body.removeChild(d),o()}return c}},21111:e=>{var t="undefined"!==typeof Element,s="function"===typeof Map,r="function"===typeof Set,n="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var i,l,d,c;if(Array.isArray(e)){if((i=e.length)!=o.length)return!1;for(l=i;0!==l--;)if(!a(e[l],o[l]))return!1;return!0}if(s&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(c=e.entries();!(l=c.next()).done;)if(!o.has(l.value[0]))return!1;for(c=e.entries();!(l=c.next()).done;)if(!a(l.value[1],o.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(c=e.entries();!(l=c.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((i=e.length)!=o.length)return!1;for(l=i;0!==l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((i=(d=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=i;0!==l--;)if(!Object.prototype.hasOwnProperty.call(o,d[l]))return!1;if(t&&e instanceof Element)return!1;for(l=i;0!==l--;)if(("_owner"!==d[l]&&"__v"!==d[l]&&"__o"!==d[l]||!e.$$typeof)&&!a(e[d[l]],o[d[l]]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}}},21533:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,s=[],r=0;r<e.rangeCount;r++)s.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||s.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=974.ef8e043c.chunk.js.map